// GENERATED CODE - DO NOT MODIFY BY HAND
// ignore_for_file: type=lint, implicit_dynamic_list_literal, implicit_dynamic_map_literal, inference_failure_on_collection_literal

import 'package:mason/mason.dart';

final bunnyCliTemplateBundle = MasonBundle.fromJson(<String, dynamic>{
  "files": [
    {
      "path": "{{project_name}}/readme",
      "data":
          "IyB7e3Byb2plY3RfbmFtZX19CgpBIG5ldyBGbHV0dGVyIHByb2plY3QgY3JlYXRlZCB3aXRoIEJ1bm55IENMSS4KCiMjIFByb2plY3QgQ29uZmlndXJhdGlvbgoKIyMjIEJhc2ljIEluZm8KLSBQcm9qZWN0IE5hbWU6IHt7cHJvamVjdF9uYW1lfX0KLSBPcmdhbml6YXRpb246IHt7b3JnX25hbWV9fQoKIyMjIEFyY2hpdGVjdHVyZQpTZWxlY3RlZCBBcmNoaXRlY3R1cmU6IHt7YXJjaGl0ZWN0dXJlfX0KCkFyY2hpdGVjdHVyZSBEZXRhaWxzOgp7e2FyY2hpdGVjdHVyZURldGFpbHN9fQoKIyMjIFN0YXRlIE1hbmFnZW1lbnQKU2VsZWN0ZWQgU3RhdGUgTWFuYWdlbWVudDoge3tzdGF0ZV9tYW5hZ2VtZW50fX0KClN0YXRlIE1hbmFnZW1lbnQgRGV0YWlsczoKe3tzdGF0ZU1hbmFnZW1lbnREZXRhaWxzfX0KCiMjIyBTZWxlY3RlZCBGZWF0dXJlcwpGZWF0dXJlcyBpbmNsdWRlZCBpbiB0aGlzIHByb2plY3Q6Cnt7I2ZlYXR1cmVzfX0KLSB7ey59fQp7ey9mZWF0dXJlc319CgojIyMgU2VsZWN0ZWQgTW9kdWxlcwpNb2R1bGVzIGluY2x1ZGVkIGluIHRoaXMgcHJvamVjdDoKe3sjbW9kdWxlc319Ci0ge3sufX0Ke3svbW9kdWxlc319CgojIyBQcm9qZWN0IFN0cnVjdHVyZQpgYGAKbGliLwrilJzilIDilIAgY29yZS8K4pSCICAg4pSc4pSA4pSAIGNvbmZpZy8K4pSCICAg4pSc4pSA4pSAIHRoZW1lLwrilIIgICDilJTilIDilIAgdXRpbHMvCuKUnOKUgOKUgCBmZWF0dXJlcy8Ke3sjZmVhdHVyZXN9fQrilIIgICDilJzilIDilIAge3sufX0vCnt7L2ZlYXR1cmVzfX0K4pSU4pSA4pSAIG1vZHVsZXMvCnt7I21vZHVsZXN9fQogICAg4pSc4pSA4pSAIHt7Ln19Lwp7ey9tb2R1bGVzfX0KYGBgCgojIyBHZXR0aW5nIFN0YXJ0ZWQKCjEuIENsb25lIHRoZSByZXBvc2l0b3J5CjIuIEluc3RhbGwgZGVwZW5kZW5jaWVzOgogICBgYGBiYXNoCiAgIGZsdXR0ZXIgcHViIGdldAogICBgYGAKMy4gUnVuIHRoZSBkZXZlbG9wbWVudCBzZXJ2ZXI6CiAgIGBgYGJhc2gKICAgZmx1dHRlciBydW4KICAgYGBgCgojIyBEZXZlbG9wbWVudCBHdWlkZWxpbmVzCgojIyMgQ29kZSBTdHlsZQotIEZvbGxvdyBGbHV0dGVyJ3Mgb2ZmaWNpYWwgc3R5bGUgZ3VpZGUKLSBVc2UgbWVhbmluZ2Z1bCB2YXJpYWJsZSBhbmQgZnVuY3Rpb24gbmFtZXMKLSBXcml0ZSBjb21tZW50cyBmb3IgY29tcGxleCBsb2dpYwotIEtlZXAgZmlsZXMgYW5kIGNsYXNzZXMgZm9jdXNlZCBhbmQgc21hbGwKCiMjIyBBcmNoaXRlY3R1cmUgR3VpZGVsaW5lcwotIEZvbGxvdyB0aGUge3thcmNoaXRlY3R1cmV9fSBwYXR0ZXJuCi0gTWFpbnRhaW4gc2VwYXJhdGlvbiBvZiBjb25jZXJucwotIFdyaXRlIHVuaXQgdGVzdHMgZm9yIGJ1c2luZXNzIGxvZ2ljCi0gRG9jdW1lbnQgY29tcGxleCBpbXBsZW1lbnRhdGlvbnMKCiMjIyBTdGF0ZSBNYW5hZ2VtZW50Ci0gVXNlIHt7c3RhdGVfbWFuYWdlbWVudH19IGZvciBzdGF0ZSBtYW5hZ2VtZW50Ci0gRm9sbG93IGJlc3QgcHJhY3RpY2VzIGZvciBjaG9zZW4gc29sdXRpb24KLSBNYWludGFpbiBjbGVhciBzdGF0ZSB1cGRhdGUgcGF0dGVybnMKLSBEb2N1bWVudCBzdGF0ZSBmbG93IGZvciBjb21wbGV4IGZlYXR1cmVzCgojIyBUZXN0aW5nCgpgYGBiYXNoCiMgUnVuIGFsbCB0ZXN0cwpmbHV0dGVyIHRlc3QKCiMgUnVuIHRlc3RzIHdpdGggY292ZXJhZ2UKZmx1dHRlciB0ZXN0IC0tY292ZXJhZ2UKYGBgCgojIyBCdWlsZGluZyBmb3IgUHJvZHVjdGlvbgoKYGBgYmFzaAojIEJ1aWxkIEFQSwpmbHV0dGVyIGJ1aWxkIGFwawoKIyBCdWlsZCBpT1MKZmx1dHRlciBidWlsZCBpb3MKYGBgCgojIyBMaWNlbnNlCgpUaGlzIHByb2plY3QgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlIC0gc2VlIHRoZSBMSUNFTlNFIGZpbGUgZm9yIGRldGFpbHMu",
      "type": "text"
    }
  ],
  "hooks": [
    {
      "path": "lib/architecture_handler.dart",
      "data":
          "aW1wb3J0ICdkYXJ0OmlvJzsKaW1wb3J0ICdwYWNrYWdlOm1hc29uL21hc29uLmRhcnQnOwppbXBvcnQgJ3V0aWxzLmRhcnQnOwoKdm9pZCBjcmVhdGVBcmNoaXRlY3R1cmVTdHJ1Y3R1cmUoCiAgSG9va0NvbnRleHQgY29udGV4dCwgCiAgU3RyaW5nIHByb2plY3ROYW1lLCAKICBTdHJpbmcgYXJjaGl0ZWN0dXJlCikgewogIExpc3Q8U3RyaW5nPiBkaXJlY3RvcmllcyA9IFtdOwoKICBzd2l0Y2ggKGFyY2hpdGVjdHVyZSkgewogICAgY2FzZSAnQ2xlYW4gQXJjaGl0ZWN0dXJlJzoKICAgICAgZGlyZWN0b3JpZXMgPSBbCiAgICAgICAgJ2xpYi9jb3JlJywKICAgICAgICAnbGliL2NvcmUvZXJyb3InLAogICAgICAgICdsaWIvY29yZS9uZXR3b3JrJywKICAgICAgICAnbGliL2NvcmUvdXRpbHMnLAogICAgICAgICdsaWIvY29yZS90aGVtZScsCiAgICAgICAgJ2xpYi9pbmZyYXN0cnVjdHVyZS9pbmplY3RvcicsCiAgICAgICAgJ2xpYi9pbmZyYXN0cnVjdHVyZS9uYXZpZ2F0aW9uJywKICAgICAgXTsKICAgICAgYnJlYWs7CiAgICBjYXNlICdNVlZNJzoKICAgICAgZGlyZWN0b3JpZXMgPSBbCiAgICAgICAgJ2xpYi9jb3JlJywKICAgICAgICAnbGliL2NvcmUvc2VydmljZXMnLAogICAgICAgICdsaWIvY29yZS91dGlscycsCiAgICAgICAgJ2xpYi9zaGFyZWQnLAogICAgICAgICdsaWIvc2hhcmVkL3dpZGdldHMnLAogICAgICAgICdsaWIvc2hhcmVkL3V0aWxzJywKICAgICAgXTsKICAgICAgYnJlYWs7CiAgICBjYXNlICdNVkMnOgogICAgICBkaXJlY3RvcmllcyA9IFsKICAgICAgICAnbGliL2NvcmUnLAogICAgICAgICdsaWIvY29yZS9zZXJ2aWNlcycsCiAgICAgICAgJ2xpYi9jb3JlL3V0aWxzJywKICAgICAgICAnbGliL3NoYXJlZCcsCiAgICAgICAgJ2xpYi9zaGFyZWQvd2lkZ2V0cycsCiAgICAgICAgJ2xpYi9zaGFyZWQvdXRpbHMnLAogICAgICBdOwogICAgICBicmVhazsKICAgIGNhc2UgJ0ZlYXR1cmUtRHJpdmVuJzoKICAgICAgZGlyZWN0b3JpZXMgPSBbCiAgICAgICAgJ2xpYi9jb3JlJywKICAgICAgICAnbGliL2NvcmUvdXRpbHMnLAogICAgICAgICdsaWIvY29yZS9zZXJ2aWNlcycsCiAgICAgICAgJ2xpYi9zaGFyZWQvd2lkZ2V0cycsCiAgICAgICAgJ2xpYi9zaGFyZWQvc2VydmljZXMnLAogICAgICBdOwogICAgICBicmVhazsKICAgIGRlZmF1bHQ6CiAgICAgIGNvbnRleHQubG9nZ2VyLndhcm4oJ1Vua25vd24gYXJjaGl0ZWN0dXJlOiAkYXJjaGl0ZWN0dXJlJyk7CiAgICAgIHJldHVybjsKICB9CgogIGZvciAoZmluYWwgZGlyIGluIGRpcmVjdG9yaWVzKSB7CiAgICBmaW5hbCBkaXJlY3RvcnkgPSBEaXJlY3RvcnkoJyRwcm9qZWN0TmFtZS8kZGlyJyk7CiAgICBpZiAoIWRpcmVjdG9yeS5leGlzdHNTeW5jKCkpIHsKICAgICAgZGlyZWN0b3J5LmNyZWF0ZVN5bmMocmVjdXJzaXZlOiB0cnVlKTsKICAgICAgY29udGV4dC5sb2dnZXIuaW5mbygnQ3JlYXRlZCBhcmNoaXRlY3R1cmUgZGlyZWN0b3J5OiAkZGlyJyk7CiAgICB9CiAgfQogIAogIC8vIENyZWF0ZSBhcmNoaXRlY3R1cmUtc3BlY2lmaWMgZmlsZXMKICBjcmVhdGVBcmNoaXRlY3R1cmVGaWxlcyhjb250ZXh0LCBwcm9qZWN0TmFtZSwgYXJjaGl0ZWN0dXJlKTsKfQoKdm9pZCBjcmVhdGVBcmNoaXRlY3R1cmVGaWxlcygKICBIb29rQ29udGV4dCBjb250ZXh0LAogIFN0cmluZyBwcm9qZWN0TmFtZSwKICBTdHJpbmcgYXJjaGl0ZWN0dXJlCikgewogIHN3aXRjaCAoYXJjaGl0ZWN0dXJlKSB7CiAgICBjYXNlICdDbGVhbiBBcmNoaXRlY3R1cmUnOgogICAgICBjcmVhdGVDbGVhbkFyY2hpdGVjdHVyZUZpbGVzKGNvbnRleHQsIHByb2plY3ROYW1lKTsKICAgICAgYnJlYWs7CiAgICBjYXNlICdNVlZNJzoKICAgICAgY3JlYXRlTVZWTUFyY2hpdGVjdHVyZUZpbGVzKGNvbnRleHQsIHByb2plY3ROYW1lKTsKICAgICAgYnJlYWs7CiAgICBjYXNlICdNVkMnOgogICAgICBjcmVhdGVNVkNBcmNoaXRlY3R1cmVGaWxlcyhjb250ZXh0LCBwcm9qZWN0TmFtZSk7CiAgICAgIGJyZWFrOwogICAgY2FzZSAnRmVhdHVyZS1Ecml2ZW4nOgogICAgICBjcmVhdGVGZWF0dXJlRHJpdmVuQXJjaGl0ZWN0dXJlRmlsZXMoY29udGV4dCwgcHJvamVjdE5hbWUpOwogICAgICBicmVhazsKICAgIGRlZmF1bHQ6CiAgICAgIC8vIE5vIHNwZWNpZmljIGZpbGVzIHRvIGNyZWF0ZQogIH0KfQoKdm9pZCBjcmVhdGVDbGVhbkFyY2hpdGVjdHVyZUZpbGVzKEhvb2tDb250ZXh0IGNvbnRleHQsIFN0cmluZyBwcm9qZWN0TmFtZSkgewogIC8vIENvcmUgZXJyb3IgaGFuZGxpbmcKICBjcmVhdGVGaWxlKAogICAgJyRwcm9qZWN0TmFtZS9saWIvY29yZS9lcnJvci9mYWlsdXJlcy5kYXJ0JywKICAgICcnJwovLyBGYWlsdXJlIGJhc2UgY2xhc3MgYW5kIGltcGxlbWVudGF0aW9ucwovLyBHZW5lcmF0ZWQgYnkgTWFzb24KCmFic3RyYWN0IGNsYXNzIEZhaWx1cmUgewogIGZpbmFsIFN0cmluZyBtZXNzYWdlOwogIAogIGNvbnN0IEZhaWx1cmUoe3JlcXVpcmVkIHRoaXMubWVzc2FnZX0pOwp9CgpjbGFzcyBTZXJ2ZXJGYWlsdXJlIGV4dGVuZHMgRmFpbHVyZSB7CiAgY29uc3QgU2VydmVyRmFpbHVyZSh7cmVxdWlyZWQgU3RyaW5nIG1lc3NhZ2V9KSA6IHN1cGVyKG1lc3NhZ2U6IG1lc3NhZ2UpOwp9CgpjbGFzcyBDYWNoZUZhaWx1cmUgZXh0ZW5kcyBGYWlsdXJlIHsKICBjb25zdCBDYWNoZUZhaWx1cmUoe3JlcXVpcmVkIFN0cmluZyBtZXNzYWdlfSkgOiBzdXBlcihtZXNzYWdlOiBtZXNzYWdlKTsKfQoKY2xhc3MgTmV0d29ya0ZhaWx1cmUgZXh0ZW5kcyBGYWlsdXJlIHsKICBjb25zdCBOZXR3b3JrRmFpbHVyZSh7cmVxdWlyZWQgU3RyaW5nIG1lc3NhZ2V9KSA6IHN1cGVyKG1lc3NhZ2U6IG1lc3NhZ2UpOwp9CicnJywKICAgIGNvbnRleHQKICApOwogIAogIC8vIERJIHNldHVwIGZpbGUKICBjcmVhdGVGaWxlKAogICAgJyRwcm9qZWN0TmFtZS9saWIvaW5mcmFzdHJ1Y3R1cmUvaW5qZWN0b3IvaW5qZWN0b3IuZGFydCcsCiAgICAnJycKLy8gRGVwZW5kZW5jeSBpbmplY3Rpb24gc2V0dXAKLy8gR2VuZXJhdGVkIGJ5IE1hc29uCgovLyBUaGlzIGZpbGUgd2lsbCBiZSB1c2VkIHRvIHNldHVwIGRlcGVuZGVuY3kgaW5qZWN0aW9uCi8vIHdpdGggYSBwYWNrYWdlIGxpa2UgZ2V0X2l0LCBpbmplY3RhYmxlLCBldGMuCgp2b2lkIHNldHVwSW5qZWN0b3IoKSB7CiAgLy8gVE9ETzogUmVnaXN0ZXIgZGVwZW5kZW5jaWVzCn0KJycnLAogICAgY29udGV4dAogICk7Cn0KCnZvaWQgY3JlYXRlTVZWTUFyY2hpdGVjdHVyZUZpbGVzKEhvb2tDb250ZXh0IGNvbnRleHQsIFN0cmluZyBwcm9qZWN0TmFtZSkgewogIC8vIEJhc2UgdmlldyBtb2RlbAogIGNyZWF0ZUZpbGUoCiAgICAnJHByb2plY3ROYW1lL2xpYi9jb3JlL2Jhc2Vfdmlld19tb2RlbC5kYXJ0JywKICAgICcnJwovLyBCYXNlIHZpZXcgbW9kZWwKLy8gR2VuZXJhdGVkIGJ5IE1hc29uCgphYnN0cmFjdCBjbGFzcyBCYXNlVmlld01vZGVsIHsKICAvLyBCYXNlIHZpZXcgbW9kZWwgZnVuY3Rpb25hbGl0eQogIC8vIFRoaXMgd291bGQgdHlwaWNhbGx5IGluY2x1ZGUgY29tbW9uIHByb3BlcnRpZXMgYW5kIG1ldGhvZHMKICAvLyBmb3IgYWxsIHZpZXcgbW9kZWxzIGluIHRoZSBhcHBsaWNhdGlvbgogIAogIGJvb2wgaXNMb2FkaW5nID0gZmFsc2U7CiAgU3RyaW5nPyBlcnJvck1lc3NhZ2U7CiAgCiAgdm9pZCBzZXRMb2FkaW5nKGJvb2wgbG9hZGluZykgewogICAgaXNMb2FkaW5nID0gbG9hZGluZzsKICAgIC8vIE5vdGlmeSBsaXN0ZW5lcnMgLSBpbXBsZW1lbnRhdGlvbiBkZXBlbmRzIG9uIHN0YXRlIG1hbmFnZW1lbnQKICB9CiAgCiAgdm9pZCBzZXRFcnJvcihTdHJpbmc/IGVycm9yKSB7CiAgICBlcnJvck1lc3NhZ2UgPSBlcnJvcjsKICAgIC8vIE5vdGlmeSBsaXN0ZW5lcnMgLSBpbXBsZW1lbnRhdGlvbiBkZXBlbmRzIG9uIHN0YXRlIG1hbmFnZW1lbnQKICB9Cn0KJycnLAogICAgY29udGV4dAogICk7Cn0KCnZvaWQgY3JlYXRlTVZDQXJjaGl0ZWN0dXJlRmlsZXMoSG9va0NvbnRleHQgY29udGV4dCwgU3RyaW5nIHByb2plY3ROYW1lKSB7CiAgLy8gQmFzZSBjb250cm9sbGVyCiAgY3JlYXRlRmlsZSgKICAgICckcHJvamVjdE5hbWUvbGliL2NvcmUvYmFzZV9jb250cm9sbGVyLmRhcnQnLAogICAgJycnCi8vIEJhc2UgY29udHJvbGxlcgovLyBHZW5lcmF0ZWQgYnkgTWFzb24KCmFic3RyYWN0IGNsYXNzIEJhc2VDb250cm9sbGVyIHsKICAvLyBCYXNlIGNvbnRyb2xsZXIgZnVuY3Rpb25hbGl0eQogIC8vIFRoaXMgd291bGQgdHlwaWNhbGx5IGluY2x1ZGUgY29tbW9uIHByb3BlcnRpZXMgYW5kIG1ldGhvZHMKICAvLyBmb3IgYWxsIGNvbnRyb2xsZXJzIGluIHRoZSBhcHBsaWNhdGlvbgogIAogIGJvb2wgaXNMb2FkaW5nID0gZmFsc2U7CiAgU3RyaW5nPyBlcnJvck1lc3NhZ2U7CiAgCiAgdm9pZCBzZXRMb2FkaW5nKGJvb2wgbG9hZGluZykgewogICAgaXNMb2FkaW5nID0gbG9hZGluZzsKICAgIC8vIE5vdGlmeSBsaXN0ZW5lcnMgLSBpbXBsZW1lbnRhdGlvbiBkZXBlbmRzIG9uIHN0YXRlIG1hbmFnZW1lbnQKICB9CiAgCiAgdm9pZCBzZXRFcnJvcihTdHJpbmc/IGVycm9yKSB7CiAgICBlcnJvck1lc3NhZ2UgPSBlcnJvcjsKICAgIC8vIE5vdGlmeSBsaXN0ZW5lcnMgLSBpbXBsZW1lbnRhdGlvbiBkZXBlbmRzIG9uIHN0YXRlIG1hbmFnZW1lbnQKICB9Cn0KJycnLAogICAgY29udGV4dAogICk7Cn0KCnZvaWQgY3JlYXRlRmVhdHVyZURyaXZlbkFyY2hpdGVjdHVyZUZpbGVzKEhvb2tDb250ZXh0IGNvbnRleHQsIFN0cmluZyBwcm9qZWN0TmFtZSkgewogIC8vIEFwcCBuYXZpZ2F0aW9uCiAgY3JlYXRlRmlsZSgKICAgICckcHJvamVjdE5hbWUvbGliL2NvcmUvbmF2aWdhdGlvbi9hcHBfcm91dGVyLmRhcnQnLAogICAgJycnCi8vIEFwcCByb3V0ZXIKLy8gR2VuZXJhdGVkIGJ5IE1hc29uCgppbXBvcnQgJ3BhY2thZ2U6Zmx1dHRlci9tYXRlcmlhbC5kYXJ0JzsKCmNsYXNzIEFwcFJvdXRlciB7CiAgc3RhdGljIFJvdXRlPGR5bmFtaWM+IGdlbmVyYXRlUm91dGUoUm91dGVTZXR0aW5ncyBzZXR0aW5ncykgewogICAgLy8gVE9ETzogSW1wbGVtZW50IHJvdXRlIGdlbmVyYXRpb24gYmFzZWQgb24geW91ciBmZWF0dXJlcwogICAgc3dpdGNoIChzZXR0aW5ncy5uYW1lKSB7CiAgICAgIGRlZmF1bHQ6CiAgICAgICAgcmV0dXJuIE1hdGVyaWFsUGFnZVJvdXRlKAogICAgICAgICAgYnVpbGRlcjogKF8pID0+IFNjYWZmb2xkKAogICAgICAgICAgICBib2R5OiBDZW50ZXIoCiAgICAgICAgICAgICAgY2hpbGQ6IFRleHQoJ05vIHJvdXRlIGRlZmluZWQgZm9yIFwke3NldHRpbmdzLm5hbWV9JyksCiAgICAgICAgICAgICksCiAgICAgICAgICApLAogICAgICAgICk7CiAgICB9CiAgfQp9CicnJywKICAgIGNvbnRleHQKICApOwp9",
      "type": "text"
    },
    {
      "path": "lib/feature_generator.dart",
      "data":
          "aW1wb3J0ICdkYXJ0OmlvJzsKaW1wb3J0ICdwYWNrYWdlOm1hc29uL21hc29uLmRhcnQnOwppbXBvcnQgJ3V0aWxzLmRhcnQnOwppbXBvcnQgJ3N0YXRlX21hbmFnZW1lbnRfaGFuZGxlci5kYXJ0JzsKCnZvaWQgY3JlYXRlRmVhdHVyZVN0cnVjdHVyZXMoCiAgSG9va0NvbnRleHQgY29udGV4dCwgCiAgU3RyaW5nIHByb2plY3ROYW1lLCAKICBMaXN0PGR5bmFtaWM+IGZlYXR1cmVzLAogIFN0cmluZyBhcmNoaXRlY3R1cmUsCiAgU3RyaW5nIHN0YXRlTWFuYWdlbWVudAopIHsKICBmb3IgKGZpbmFsIGZlYXR1cmUgaW4gZmVhdHVyZXMpIHsKICAgIGZpbmFsIGZlYXR1cmVOYW1lID0gZmVhdHVyZS50b1N0cmluZygpLnRvTG93ZXJDYXNlKCkucmVwbGFjZUFsbCgnICcsICdfJyk7CiAgICAKICAgIHN3aXRjaCAoYXJjaGl0ZWN0dXJlKSB7CiAgICAgIGNhc2UgJ0NsZWFuIEFyY2hpdGVjdHVyZSc6CiAgICAgICAgY3JlYXRlQ2xlYW5BcmNoaXRlY3R1cmVGZWF0dXJlKGNvbnRleHQsIHByb2plY3ROYW1lLCBmZWF0dXJlTmFtZSwgc3RhdGVNYW5hZ2VtZW50KTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAnTVZWTSc6CiAgICAgICAgY3JlYXRlTVZWTUZlYXR1cmUoY29udGV4dCwgcHJvamVjdE5hbWUsIGZlYXR1cmVOYW1lLCBzdGF0ZU1hbmFnZW1lbnQpOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICdNVkMnOgogICAgICAgIGNyZWF0ZU1WQ0ZlYXR1cmUoY29udGV4dCwgcHJvamVjdE5hbWUsIGZlYXR1cmVOYW1lLCBzdGF0ZU1hbmFnZW1lbnQpOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICdGZWF0dXJlLURyaXZlbic6CiAgICAgICAgY3JlYXRlRmVhdHVyZURyaXZlbkZlYXR1cmUoY29udGV4dCwgcHJvamVjdE5hbWUsIGZlYXR1cmVOYW1lLCBzdGF0ZU1hbmFnZW1lbnQpOwogICAgICAgIGJyZWFrOwogICAgICBkZWZhdWx0OgogICAgICAgIGNvbnRleHQubG9nZ2VyLndhcm4oJ1Vua25vd24gYXJjaGl0ZWN0dXJlOiAkYXJjaGl0ZWN0dXJlJyk7CiAgICAgICAgY29udGludWU7CiAgICB9CiAgfQp9Cgp2b2lkIGNyZWF0ZUNsZWFuQXJjaGl0ZWN0dXJlRmVhdHVyZSgKICBIb29rQ29udGV4dCBjb250ZXh0LAogIFN0cmluZyBwcm9qZWN0TmFtZSwKICBTdHJpbmcgZmVhdHVyZU5hbWUsCiAgU3RyaW5nIHN0YXRlTWFuYWdlbWVudAopIHsKICAvLyBDcmVhdGUgQ2xlYW4gQXJjaGl0ZWN0dXJlIHN0cnVjdHVyZSBmb3IgdGhlIGZlYXR1cmUKICBmaW5hbCBiYXNlRGlyZWN0b3JpZXMgPSBbCiAgICAnbGliL2ZlYXR1cmVzLyRmZWF0dXJlTmFtZS9kb21haW4vZW50aXRpZXMnLAogICAgJ2xpYi9mZWF0dXJlcy8kZmVhdHVyZU5hbWUvZG9tYWluL3JlcG9zaXRvcmllcycsCiAgICAnbGliL2ZlYXR1cmVzLyRmZWF0dXJlTmFtZS9kb21haW4vdXNlY2FzZXMnLAogICAgJ2xpYi9mZWF0dXJlcy8kZmVhdHVyZU5hbWUvZGF0YS9tb2RlbHMnLAogICAgJ2xpYi9mZWF0dXJlcy8kZmVhdHVyZU5hbWUvZGF0YS9yZXBvc2l0b3JpZXMnLAogICAgJ2xpYi9mZWF0dXJlcy8kZmVhdHVyZU5hbWUvZGF0YS9kYXRhc291cmNlcycsCiAgICAnbGliL2ZlYXR1cmVzLyRmZWF0dXJlTmFtZS9wcmVzZW50YXRpb24vcGFnZXMnLAogICAgJ2xpYi9mZWF0dXJlcy8kZmVhdHVyZU5hbWUvcHJlc2VudGF0aW9uL3dpZGdldHMnLAogIF07CgogIC8vIENyZWF0ZSBhbGwgYmFzZSBkaXJlY3RvcmllcwogIGZvciAoZmluYWwgZGlyIGluIGJhc2VEaXJlY3RvcmllcykgewogICAgZmluYWwgZGlyZWN0b3J5ID0gRGlyZWN0b3J5KCckcHJvamVjdE5hbWUvJGRpcicpOwogICAgaWYgKCFkaXJlY3RvcnkuZXhpc3RzU3luYygpKSB7CiAgICAgIGRpcmVjdG9yeS5jcmVhdGVTeW5jKHJlY3Vyc2l2ZTogdHJ1ZSk7CiAgICAgIGNvbnRleHQubG9nZ2VyLmluZm8oJ0NyZWF0ZWQgZmVhdHVyZSBkaXJlY3Rvcnk6ICRkaXInKTsKICAgIH0KICB9CiAgCiAgLy8gQ3JlYXRlIHNhbXBsZSBlbnRpdHkKICBjcmVhdGVGaWxlKAogICAgJyRwcm9qZWN0TmFtZS9saWIvZmVhdHVyZXMvJGZlYXR1cmVOYW1lL2RvbWFpbi9lbnRpdGllcy8ke2ZlYXR1cmVOYW1lfV9lbnRpdHkuZGFydCcsCiAgICBnZW5lcmF0ZUVudGl0eVRlbXBsYXRlKGZlYXR1cmVOYW1lKSwKICAgIGNvbnRleHQKICApOwogIAogIC8vIENyZWF0ZSBzYW1wbGUgcmVwb3NpdG9yeSBpbnRlcmZhY2UKICBjcmVhdGVGaWxlKAogICAgJyRwcm9qZWN0TmFtZS9saWIvZmVhdHVyZXMvJGZlYXR1cmVOYW1lL2RvbWFpbi9yZXBvc2l0b3JpZXMvJHtmZWF0dXJlTmFtZX1fcmVwb3NpdG9yeS5kYXJ0JywKICAgIGdlbmVyYXRlUmVwb3NpdG9yeVRlbXBsYXRlKGZlYXR1cmVOYW1lKSwKICAgIGNvbnRleHQKICApOwogIAogIC8vIENyZWF0ZSBzYW1wbGUgdXNlIGNhc2UKICBjcmVhdGVGaWxlKAogICAgJyRwcm9qZWN0TmFtZS9saWIvZmVhdHVyZXMvJGZlYXR1cmVOYW1lL2RvbWFpbi91c2VjYXNlcy8ke2ZlYXR1cmVOYW1lfV91c2VjYXNlLmRhcnQnLAogICAgZ2VuZXJhdGVVc2VDYXNlVGVtcGxhdGUoZmVhdHVyZU5hbWUpLAogICAgY29udGV4dAogICk7CiAgCiAgLy8gQ3JlYXRlIHNhbXBsZSBtb2RlbAogIGNyZWF0ZUZpbGUoCiAgICAnJHByb2plY3ROYW1lL2xpYi9mZWF0dXJlcy8kZmVhdHVyZU5hbWUvZGF0YS9tb2RlbHMvJHtmZWF0dXJlTmFtZX1fbW9kZWwuZGFydCcsCiAgICBnZW5lcmF0ZU1vZGVsVGVtcGxhdGUoZmVhdHVyZU5hbWUpLAogICAgY29udGV4dAogICk7CiAgCiAgLy8gQ3JlYXRlIHNhbXBsZSByZXBvc2l0b3J5IGltcGxlbWVudGF0aW9uCiAgY3JlYXRlRmlsZSgKICAgICckcHJvamVjdE5hbWUvbGliL2ZlYXR1cmVzLyRmZWF0dXJlTmFtZS9kYXRhL3JlcG9zaXRvcmllcy8ke2ZlYXR1cmVOYW1lfV9yZXBvc2l0b3J5X2ltcGwuZGFydCcsCiAgICBnZW5lcmF0ZVJlcG9zaXRvcnlJbXBsVGVtcGxhdGUoZmVhdHVyZU5hbWUpLAogICAgY29udGV4dAogICk7CiAgCiAgLy8gQ3JlYXRlIHNhbXBsZSBkYXRhIHNvdXJjZQogIGNyZWF0ZUZpbGUoCiAgICAnJHByb2plY3ROYW1lL2xpYi9mZWF0dXJlcy8kZmVhdHVyZU5hbWUvZGF0YS9kYXRhc291cmNlcy8ke2ZlYXR1cmVOYW1lfV9kYXRhX3NvdXJjZS5kYXJ0JywKICAgIGdlbmVyYXRlRGF0YVNvdXJjZVRlbXBsYXRlKGZlYXR1cmVOYW1lKSwKICAgIGNvbnRleHQKICApOwogIAogIC8vIENyZWF0ZSBzYW1wbGUgcGFnZQogIGNyZWF0ZUZpbGUoCiAgICAnJHByb2plY3ROYW1lL2xpYi9mZWF0dXJlcy8kZmVhdHVyZU5hbWUvcHJlc2VudGF0aW9uL3BhZ2VzLyR7ZmVhdHVyZU5hbWV9X3BhZ2UuZGFydCcsCiAgICBnZW5lcmF0ZVBhZ2VUZW1wbGF0ZShmZWF0dXJlTmFtZSksCiAgICBjb250ZXh0CiAgKTsKICAKICAvLyBDcmVhdGUgc2FtcGxlIHdpZGdldAogIGNyZWF0ZUZpbGUoCiAgICAnJHByb2plY3ROYW1lL2xpYi9mZWF0dXJlcy8kZmVhdHVyZU5hbWUvcHJlc2VudGF0aW9uL3dpZGdldHMvJHtmZWF0dXJlTmFtZX1fd2lkZ2V0LmRhcnQnLAogICAgZ2VuZXJhdGVXaWRnZXRUZW1wbGF0ZShmZWF0dXJlTmFtZSksCiAgICBjb250ZXh0CiAgKTsKICAKICAvLyBDcmVhdGUgc3RhdGUgbWFuYWdlbWVudCBmaWxlcwogIGNyZWF0ZVN0YXRlTWFuYWdlbWVudEZpbGVzKAogICAgY29udGV4dCwgCiAgICBwcm9qZWN0TmFtZSwgCiAgICAnbGliL2ZlYXR1cmVzLyRmZWF0dXJlTmFtZS9wcmVzZW50YXRpb24nLAogICAgZmVhdHVyZU5hbWUsCiAgICBzdGF0ZU1hbmFnZW1lbnQKICApOwp9Cgp2b2lkIGNyZWF0ZU1WVk1GZWF0dXJlKAogIEhvb2tDb250ZXh0IGNvbnRleHQsCiAgU3RyaW5nIHByb2plY3ROYW1lLAogIFN0cmluZyBmZWF0dXJlTmFtZSwKICBTdHJpbmcgc3RhdGVNYW5hZ2VtZW50CikgewogIC8vIENyZWF0ZSBNVlZNIHN0cnVjdHVyZSBmb3IgdGhlIGZlYXR1cmUKICBmaW5hbCBiYXNlRGlyZWN0b3JpZXMgPSBbCiAgICAnbGliL2ZlYXR1cmVzLyRmZWF0dXJlTmFtZS9tb2RlbHMnLAogICAgJ2xpYi9mZWF0dXJlcy8kZmVhdHVyZU5hbWUvdmlld3MnLAogICAgJ2xpYi9mZWF0dXJlcy8kZmVhdHVyZU5hbWUvdmlld21vZGVscycsCiAgICAnbGliL2ZlYXR1cmVzLyRmZWF0dXJlTmFtZS9zZXJ2aWNlcycsCiAgXTsKCiAgLy8gQ3JlYXRlIGFsbCBiYXNlIGRpcmVjdG9yaWVzCiAgZm9yIChmaW5hbCBkaXIgaW4gYmFzZURpcmVjdG9yaWVzKSB7CiAgICBmaW5hbCBkaXJlY3RvcnkgPSBEaXJlY3RvcnkoJyRwcm9qZWN0TmFtZS8kZGlyJyk7CiAgICBpZiAoIWRpcmVjdG9yeS5leGlzdHNTeW5jKCkpIHsKICAgICAgZGlyZWN0b3J5LmNyZWF0ZVN5bmMocmVjdXJzaXZlOiB0cnVlKTsKICAgICAgY29udGV4dC5sb2dnZXIuaW5mbygnQ3JlYXRlZCBmZWF0dXJlIGRpcmVjdG9yeTogJGRpcicpOwogICAgfQogIH0KICAKICAvLyBDcmVhdGUgc2FtcGxlIG1vZGVsCiAgY3JlYXRlRmlsZSgKICAgICckcHJvamVjdE5hbWUvbGliL2ZlYXR1cmVzLyRmZWF0dXJlTmFtZS9tb2RlbHMvJHtmZWF0dXJlTmFtZX1fbW9kZWwuZGFydCcsCiAgICAnJycKLy8gJHt0b0NsYXNzTmFtZShmZWF0dXJlTmFtZSl9TW9kZWwKLy8gR2VuZXJhdGVkIGJ5IE1hc29uCgpjbGFzcyAke3RvQ2xhc3NOYW1lKGZlYXR1cmVOYW1lKX1Nb2RlbCB7CiAgZmluYWwgU3RyaW5nIGlkOwogIGZpbmFsIFN0cmluZyBuYW1lOwogIC8vIEFkZCBtb3JlIGZpZWxkcyBhcyBuZWVkZWQKICAKICAke3RvQ2xhc3NOYW1lKGZlYXR1cmVOYW1lKX1Nb2RlbCh7CiAgICByZXF1aXJlZCB0aGlzLmlkLAogICAgcmVxdWlyZWQgdGhpcy5uYW1lLAogIH0pOwogIAogIGZhY3RvcnkgJHt0b0NsYXNzTmFtZShmZWF0dXJlTmFtZSl9TW9kZWwuZnJvbUpzb24oTWFwPFN0cmluZywgZHluYW1pYz4ganNvbikgewogICAgcmV0dXJuICR7dG9DbGFzc05hbWUoZmVhdHVyZU5hbWUpfU1vZGVsKAogICAgICBpZDoganNvblsnaWQnXSwKICAgICAgbmFtZToganNvblsnbmFtZSddLAogICAgKTsKICB9CiAgCiAgTWFwPFN0cmluZywgZHluYW1pYz4gdG9Kc29uKCkgewogICAgcmV0dXJuIHsKICAgICAgJ2lkJzogaWQsCiAgICAgICduYW1lJzogbmFtZSwKICAgIH07CiAgfQp9CicnJywKICAgIGNvbnRleHQKICApOwogIAogIC8vIENyZWF0ZSBzYW1wbGUgdmlldwogIGNyZWF0ZUZpbGUoCiAgICAnJHByb2plY3ROYW1lL2xpYi9mZWF0dXJlcy8kZmVhdHVyZU5hbWUvdmlld3MvJHtmZWF0dXJlTmFtZX1fdmlldy5kYXJ0JywKICAgICcnJwovLyAke3RvQ2xhc3NOYW1lKGZlYXR1cmVOYW1lKX1WaWV3Ci8vIEdlbmVyYXRlZCBieSBNYXNvbgppbXBvcnQgJ3BhY2thZ2U6Zmx1dHRlci9tYXRlcmlhbC5kYXJ0JzsKaW1wb3J0ICcuLi92aWV3bW9kZWxzLyR7ZmVhdHVyZU5hbWV9X3ZpZXdtb2RlbC5kYXJ0JzsKCmNsYXNzICR7dG9DbGFzc05hbWUoZmVhdHVyZU5hbWUpfVZpZXcgZXh0ZW5kcyBTdGF0ZWxlc3NXaWRnZXQgewogIGNvbnN0ICR7dG9DbGFzc05hbWUoZmVhdHVyZU5hbWUpfVZpZXcoe0tleT8ga2V5fSkgOiBzdXBlcihrZXk6IGtleSk7CgogIEBvdmVycmlkZQogIFdpZGdldCBidWlsZChCdWlsZENvbnRleHQgY29udGV4dCkgewogICAgLy8gVXNlIHN0YXRlIG1hbmFnZW1lbnQgaGVyZSB0byBjb25uZWN0IHdpdGggdmlld21vZGVsCiAgICByZXR1cm4gU2NhZmZvbGQoCiAgICAgIGFwcEJhcjogQXBwQmFyKAogICAgICAgIHRpdGxlOiBUZXh0KCcke3RvQ2xhc3NOYW1lKGZlYXR1cmVOYW1lKX0nKSwKICAgICAgKSwKICAgICAgYm9keTogQ2VudGVyKAogICAgICAgIGNoaWxkOiBUZXh0KCcke3RvQ2xhc3NOYW1lKGZlYXR1cmVOYW1lKX0gVmlldycpLAogICAgICApLAogICAgKTsKICB9Cn0KJycnLAogICAgY29udGV4dAogICk7CiAgCiAgLy8gQ3JlYXRlIHNhbXBsZSBzZXJ2aWNlCiAgY3JlYXRlRmlsZSgKICAgICckcHJvamVjdE5hbWUvbGliL2ZlYXR1cmVzLyRmZWF0dXJlTmFtZS9zZXJ2aWNlcy8ke2ZlYXR1cmVOYW1lfV9zZXJ2aWNlLmRhcnQnLAogICAgJycnCi8vICR7dG9DbGFzc05hbWUoZmVhdHVyZU5hbWUpfVNlcnZpY2UKLy8gR2VuZXJhdGVkIGJ5IE1hc29uCgpjbGFzcyAke3RvQ2xhc3NOYW1lKGZlYXR1cmVOYW1lKX1TZXJ2aWNlIHsKICAvLyBUT0RPOiBJbXBsZW1lbnQgQVBJIGNhbGxzLCBkYXRhYmFzZSBvcGVyYXRpb25zLCBldGMuCiAgCiAgRnV0dXJlPHZvaWQ+IGZldGNoRGF0YSgpIGFzeW5jIHsKICAgIC8vIFNhbXBsZSBpbXBsZW1lbnRhdGlvbgogIH0KICAKICBGdXR1cmU8dm9pZD4gc2F2ZURhdGEoKSBhc3luYyB7CiAgICAvLyBTYW1wbGUgaW1wbGVtZW50YXRpb24KICB9Cn0KJycnLAogICAgY29udGV4dAogICk7CiAgCiAgLy8gQ3JlYXRlIHN0YXRlIG1hbmFnZW1lbnQtc3BlY2lmaWMgdmlld21vZGVsCiAgc3dpdGNoIChzdGF0ZU1hbmFnZW1lbnQpIHsKICAgIGNhc2UgJ1Byb3ZpZGVyJzoKICAgICAgY3JlYXRlRmlsZSgKICAgICAgICAnJHByb2plY3ROYW1lL2xpYi9mZWF0dXJlcy8kZmVhdHVyZU5hbWUvdmlld21vZGVscy8ke2ZlYXR1cmVOYW1lfV92aWV3bW9kZWwuZGFydCcsCiAgICAgICAgZ2VuZXJhdGVQcm92aWRlclZpZXdNb2RlbChmZWF0dXJlTmFtZSksCiAgICAgICAgY29udGV4dAogICAgICApOwogICAgICBicmVhazsKICAgIGNhc2UgJ1JpdmVycG9kJzoKICAgICAgY3JlYXRlRmlsZSgKICAgICAgICAnJHByb2plY3ROYW1lL2xpYi9mZWF0dXJlcy8kZmVhdHVyZU5hbWUvdmlld21vZGVscy8ke2ZlYXR1cmVOYW1lfV92aWV3bW9kZWwuZGFydCcsCiAgICAgICAgZ2VuZXJhdGVSaXZlcnBvZFZpZXdNb2RlbChmZWF0dXJlTmFtZSksCiAgICAgICAgY29udGV4dAogICAgICApOwogICAgICBicmVhazsKICAgIGNhc2UgJ0JMb0MnOgogICAgICBjcmVhdGVCbG9jRmlsZXMoY29udGV4dCwgcHJvamVjdE5hbWUsICdsaWIvZmVhdHVyZXMvJGZlYXR1cmVOYW1lL3ZpZXdtb2RlbHMnLCBmZWF0dXJlTmFtZSk7CiAgICAgIGJyZWFrOwogICAgY2FzZSAnR2V0WCc6CiAgICAgIGNyZWF0ZUZpbGUoCiAgICAgICAgJyRwcm9qZWN0TmFtZS9saWIvZmVhdHVyZXMvJGZlYXR1cmVOYW1lL3ZpZXdtb2RlbHMvJHtmZWF0dXJlTmFtZX1fdmlld21vZGVsLmRhcnQnLAogICAgICAgIGdlbmVyYXRlR2V0WFZpZXdNb2RlbChmZWF0dXJlTmFtZSksCiAgICAgICAgY29udGV4dAogICAgICApOwogICAgICBicmVhazsKICAgIGNhc2UgJ01vYlgnOgogICAgICBjcmVhdGVGaWxlKAogICAgICAgICckcHJvamVjdE5hbWUvbGliL2ZlYXR1cmVzLyRmZWF0dXJlTmFtZS92aWV3bW9kZWxzLyR7ZmVhdHVyZU5hbWV9X3ZpZXdtb2RlbC5kYXJ0JywKICAgICAgICBnZW5lcmF0ZU1vYlhWaWV3TW9kZWwoZmVhdHVyZU5hbWUpLAogICAgICAgIGNvbnRleHQKICAgICAgKTsKICAgICAgYnJlYWs7CiAgICBjYXNlICdSZWR1eCc6CiAgICAgIGNyZWF0ZVJlZHV4RmlsZXMoY29udGV4dCwgcHJvamVjdE5hbWUsICdsaWIvZmVhdHVyZXMvJGZlYXR1cmVOYW1lL3ZpZXdtb2RlbHMnLCBmZWF0dXJlTmFtZSk7CiAgICAgIGJyZWFrOwogICAgZGVmYXVsdDoKICAgICAgY3JlYXRlRmlsZSgKICAgICAgICAnJHByb2plY3ROYW1lL2xpYi9mZWF0dXJlcy8kZmVhdHVyZU5hbWUvdmlld21vZGVscy8ke2ZlYXR1cmVOYW1lfV92aWV3bW9kZWwuZGFydCcsCiAgICAgICAgZ2VuZXJhdGVCYXNpY1ZpZXdNb2RlbChmZWF0dXJlTmFtZSksCiAgICAgICAgY29udGV4dAogICAgICApOwogIH0KfQoKdm9pZCBjcmVhdGVNVkNGZWF0dXJlKAogIEhvb2tDb250ZXh0IGNvbnRleHQsCiAgU3RyaW5nIHByb2plY3ROYW1lLAogIFN0cmluZyBmZWF0dXJlTmFtZSwKICBTdHJpbmcgc3RhdGVNYW5hZ2VtZW50CikgewogIC8vIENyZWF0ZSBNVkMgc3RydWN0dXJlIGZvciB0aGUgZmVhdHVyZQogIGZpbmFsIGJhc2VEaXJlY3RvcmllcyA9IFsKICAgICdsaWIvZmVhdHVyZXMvJGZlYXR1cmVOYW1lL21vZGVscycsCiAgICAnbGliL2ZlYXR1cmVzLyRmZWF0dXJlTmFtZS92aWV3cycsCiAgICAnbGliL2ZlYXR1cmVzLyRmZWF0dXJlTmFtZS9jb250cm9sbGVycycsCiAgICAnbGliL2ZlYXR1cmVzLyRmZWF0dXJlTmFtZS9zZXJ2aWNlcycsCiAgXTsKCiAgLy8gQ3JlYXRlIGFsbCBiYXNlIGRpcmVjdG9yaWVzCiAgZm9yIChmaW5hbCBkaXIgaW4gYmFzZURpcmVjdG9yaWVzKSB7CiAgICBmaW5hbCBkaXJlY3RvcnkgPSBEaXJlY3RvcnkoJyRwcm9qZWN0TmFtZS8kZGlyJyk7CiAgICBpZiAoIWRpcmVjdG9yeS5leGlzdHNTeW5jKCkpIHsKICAgICAgZGlyZWN0b3J5LmNyZWF0ZVN5bmMocmVjdXJzaXZlOiB0cnVlKTsKICAgICAgY29udGV4dC5sb2dnZXIuaW5mbygnQ3JlYXRlZCBmZWF0dXJlIGRpcmVjdG9yeTogJGRpcicpOwogICAgfQogIH0KICAKICAvLyBDcmVhdGUgc2FtcGxlIG1vZGVsCiAgY3JlYXRlRmlsZSgKICAgICckcHJvamVjdE5hbWUvbGliL2ZlYXR1cmVzLyRmZWF0dXJlTmFtZS9tb2RlbHMvJHtmZWF0dXJlTmFtZX1fbW9kZWwuZGFydCcsCiAgICAnJycKLy8gJHt0b0NsYXNzTmFtZShmZWF0dXJlTmFtZSl9TW9kZWwKLy8gR2VuZXJhdGVkIGJ5IE1hc29uCgpjbGFzcyAke3RvQ2xhc3NOYW1lKGZlYXR1cmVOYW1lKX1Nb2RlbCB7CiAgZmluYWwgU3RyaW5nIGlkOwogIGZpbmFsIFN0cmluZyBuYW1lOwogIC8vIEFkZCBtb3JlIGZpZWxkcyBhcyBuZWVkZWQKICAKICAke3RvQ2xhc3NOYW1lKGZlYXR1cmVOYW1lKX1Nb2RlbCh7CiAgICByZXF1aXJlZCB0aGlzLmlkLAogICAgcmVxdWlyZWQgdGhpcy5uYW1lLAogIH0pOwogIAogIGZhY3RvcnkgJHt0b0NsYXNzTmFtZShmZWF0dXJlTmFtZSl9TW9kZWwuZnJvbUpzb24oTWFwPFN0cmluZywgZHluYW1pYz4ganNvbikgewogICAgcmV0dXJuICR7dG9DbGFzc05hbWUoZmVhdHVyZU5hbWUpfU1vZGVsKAogICAgICBpZDoganNvblsnaWQnXSwKICAgICAgbmFtZToganNvblsnbmFtZSddLAogICAgKTsKICB9CiAgCiAgTWFwPFN0cmluZywgZHluYW1pYz4gdG9Kc29uKCkgewogICAgcmV0dXJuIHsKICAgICAgJ2lkJzogaWQsCiAgICAgICduYW1lJzogbmFtZSwKICAgIH07CiAgfQp9CicnJywKICAgIGNvbnRleHQKICApOwogIAogIC8vIENyZWF0ZSBzYW1wbGUgdmlldwogIGNyZWF0ZUZpbGUoCiAgICAnJHByb2plY3ROYW1lL2xpYi9mZWF0dXJlcy8kZmVhdHVyZU5hbWUvdmlld3MvJHtmZWF0dXJlTmFtZX1fdmlldy5kYXJ0JywKICAgICcnJwovLyAke3RvQ2xhc3NOYW1lKGZlYXR1cmVOYW1lKX1WaWV3Ci8vIEdlbmVyYXRlZCBieSBNYXNvbgppbXBvcnQgJ3BhY2thZ2U6Zmx1dHRlci9tYXRlcmlhbC5kYXJ0JzsKaW1wb3J0ICcuLi9jb250cm9sbGVycy8ke2ZlYXR1cmVOYW1lfV9jb250cm9sbGVyLmRhcnQnOwoKY2xhc3MgJHt0b0NsYXNzTmFtZShmZWF0dXJlTmFtZSl9VmlldyBleHRlbmRzIFN0YXRlbGVzc1dpZGdldCB7CiAgY29uc3QgJHt0b0NsYXNzTmFtZShmZWF0dXJlTmFtZSl9Vmlldyh7S2V5PyBrZXl9KSA6IHN1cGVyKGtleToga2V5KTsKCiAgQG92ZXJyaWRlCiAgV2lkZ2V0IGJ1aWxkKEJ1aWxkQ29udGV4dCBjb250ZXh0KSB7CiAgICAvLyBVc2Ugc3RhdGUgbWFuYWdlbWVudCBoZXJlIHRvIGNvbm5lY3Qgd2l0aCBjb250cm9sbGVyCiAgICByZXR1cm4gU2NhZmZvbGQoCiAgICAgIGFwcEJhcjogQXBwQmFyKAogICAgICAgIHRpdGxlOiBUZXh0KCcke3RvQ2xhc3NOYW1lKGZlYXR1cmVOYW1lKX0nKSwKICAgICAgKSwKICAgICAgYm9keTogQ2VudGVyKAogICAgICAgIGNoaWxkOiBUZXh0KCcke3RvQ2xhc3NOYW1lKGZlYXR1cmVOYW1lKX0gVmlldycpLAogICAgICApLAogICAgKTsKICB9Cn0KJycnLAogICAgY29udGV4dAogICk7CiAgCiAgLy8gQ3JlYXRlIHNhbXBsZSBzZXJ2aWNlCiAgY3JlYXRlRmlsZSgKICAgICckcHJvamVjdE5hbWUvbGliL2ZlYXR1cmVzLyRmZWF0dXJlTmFtZS9zZXJ2aWNlcy8ke2ZlYXR1cmVOYW1lfV9zZXJ2aWNlLmRhcnQnLAogICAgJycnCi8vICR7dG9DbGFzc05hbWUoZmVhdHVyZU5hbWUpfVNlcnZpY2UKLy8gR2VuZXJhdGVkIGJ5IE1hc29uCgpjbGFzcyAke3RvQ2xhc3NOYW1lKGZlYXR1cmVOYW1lKX1TZXJ2aWNlIHsKICAvLyBUT0RPOiBJbXBsZW1lbnQgQVBJIGNhbGxzLCBkYXRhYmFzZSBvcGVyYXRpb25zLCBldGMuCiAgCiAgRnV0dXJlPHZvaWQ+IGZldGNoRGF0YSgpIGFzeW5jIHsKICAgIC8vIFNhbXBsZSBpbXBsZW1lbnRhdGlvbgogIH0KICAKICBGdXR1cmU8dm9pZD4gc2F2ZURhdGEoKSBhc3luYyB7CiAgICAvLyBTYW1wbGUgaW1wbGVtZW50YXRpb24KICB9Cn0KJycnLAogICAgY29udGV4dAogICk7CiAgCiAgLy8gQ3JlYXRlIHN0YXRlIG1hbmFnZW1lbnQtc3BlY2lmaWMgY29udHJvbGxlcgogIHN3aXRjaCAoc3RhdGVNYW5hZ2VtZW50KSB7CiAgICBjYXNlICdQcm92aWRlcic6CiAgICAgIGNyZWF0ZUZpbGUoCiAgICAgICAgJyRwcm9qZWN0TmFtZS9saWIvZmVhdHVyZXMvJGZlYXR1cmVOYW1lL2NvbnRyb2xsZXJzLyR7ZmVhdHVyZU5hbWV9X2NvbnRyb2xsZXIuZGFydCcsCiAgICAgICAgZ2VuZXJhdGVQcm92aWRlckNvbnRyb2xsZXIoZmVhdHVyZU5hbWUpLAogICAgICAgIGNvbnRleHQKICAgICAgKTsKICAgICAgYnJlYWs7CiAgICBjYXNlICdSaXZlcnBvZCc6CiAgICAgIGNyZWF0ZUZpbGUoCiAgICAgICAgJyRwcm9qZWN0TmFtZS9saWIvZmVhdHVyZXMvJGZlYXR1cmVOYW1lL2NvbnRyb2xsZXJzLyR7ZmVhdHVyZU5hbWV9X2NvbnRyb2xsZXIuZGFydCcsCiAgICAgICAgZ2VuZXJhdGVSaXZlcnBvZENvbnRyb2xsZXIoZmVhdHVyZU5hbWUpLAogICAgICAgIGNvbnRleHQKICAgICAgKTsKICAgICAgYnJlYWs7CiAgICBjYXNlICdCTG9DJzoKICAgICAgY3JlYXRlQmxvY0ZpbGVzKGNvbnRleHQsIHByb2plY3ROYW1lLCAnbGliL2ZlYXR1cmVzLyRmZWF0dXJlTmFtZS9jb250cm9sbGVycycsIGZlYXR1cmVOYW1lKTsKICAgICAgYnJlYWs7CiAgICBjYXNlICdHZXRYJzoKICAgICAgY3JlYXRlRmlsZSgKICAgICAgICAnJHByb2plY3ROYW1lL2xpYi9mZWF0dXJlcy8kZmVhdHVyZU5hbWUvY29udHJvbGxlcnMvJHtmZWF0dXJlTmFtZX1fY29udHJvbGxlci5kYXJ0JywKICAgICAgICBnZW5lcmF0ZUdldFhDb250cm9sbGVyKGZlYXR1cmVOYW1lKSwKICAgICAgICBjb250ZXh0CiAgICAgICk7CiAgICAgIGJyZWFrOwogICAgY2FzZSAnTW9iWCc6CiAgICAgIGNyZWF0ZUZpbGUoCiAgICAgICAgJyRwcm9qZWN0TmFtZS9saWIvZmVhdHVyZXMvJGZlYXR1cmVOYW1lL2NvbnRyb2xsZXJzLyR7ZmVhdHVyZU5hbWV9X2NvbnRyb2xsZXIuZGFydCcsCiAgICAgICAgZ2VuZXJhdGVNb2JYQ29udHJvbGxlcihmZWF0dXJlTmFtZSksCiAgICAgICAgY29udGV4dAogICAgICApOwogICAgICBicmVhazsKICAgIGNhc2UgJ1JlZHV4JzoKICAgICAgY3JlYXRlUmVkdXhGaWxlcyhjb250ZXh0LCBwcm9qZWN0TmFtZSwgJ2xpYi9mZWF0dXJlcy8kZmVhdHVyZU5hbWUvY29udHJvbGxlcnMnLCBmZWF0dXJlTmFtZSk7CiAgICAgIGJyZWFrOwogICAgZGVmYXVsdDoKICAgICAgY3JlYXRlRmlsZSgKICAgICAgICAnJHByb2plY3ROYW1lL2xpYi9mZWF0dXJlcy8kZmVhdHVyZU5hbWUvY29udHJvbGxlcnMvJHtmZWF0dXJlTmFtZX1fY29udHJvbGxlci5kYXJ0JywKICAgICAgICBnZW5lcmF0ZUJhc2ljQ29udHJvbGxlcihmZWF0dXJlTmFtZSksCiAgICAgICAgY29udGV4dAogICAgICApOwogIH0KfQoKdm9pZCBjcmVhdGVGZWF0dXJlRHJpdmVuRmVhdHVyZSgKICBIb29rQ29udGV4dCBjb250ZXh0LAogIFN0cmluZyBwcm9qZWN0TmFtZSwKICBTdHJpbmcgZmVhdHVyZU5hbWUsCiAgU3RyaW5nIHN0YXRlTWFuYWdlbWVudAopIHsKICAvLyBDcmVhdGUgRmVhdHVyZS1Ecml2ZW4gc3RydWN0dXJlIGZvciB0aGUgZmVhdHVyZQogIGZpbmFsIGJhc2VEaXJlY3RvcmllcyA9IFsKICAgICdsaWIvZmVhdHVyZXMvJGZlYXR1cmVOYW1lL2RvbWFpbi9lbnRpdGllcycsCiAgICAnbGliL2ZlYXR1cmVzLyRmZWF0dXJlTmFtZS9kb21haW4vcmVwb3NpdG9yaWVzJywKICAgICdsaWIvZmVhdHVyZXMvJGZlYXR1cmVOYW1lL2RvbWFpbi91c2VjYXNlcycsCiAgICAnbGliL2ZlYXR1cmVzLyRmZWF0dXJlTmFtZS9kYXRhL21vZGVscycsCiAgICAnbGliL2ZlYXR1cmVzLyRmZWF0dXJlTmFtZS9kYXRhL3JlcG9zaXRvcmllcycsCiAgICAnbGliL2ZlYXR1cmVzLyRmZWF0dXJlTmFtZS9kYXRhL2RhdGFzb3VyY2VzJywKICAgICdsaWIvZmVhdHVyZXMvJGZlYXR1cmVOYW1lL3ByZXNlbnRhdGlvbi9wYWdlcycsCiAgICAnbGliL2ZlYXR1cmVzLyRmZWF0dXJlTmFtZS9wcmVzZW50YXRpb24vd2lkZ2V0cycsCiAgXTsKCiAgLy8gQ3JlYXRlIGFsbCBiYXNlIGRpcmVjdG9yaWVzCiAgZm9yIChmaW5hbCBkaXIgaW4gYmFzZURpcmVjdG9yaWVzKSB7CiAgICBmaW5hbCBkaXJlY3RvcnkgPSBEaXJlY3RvcnkoJyRwcm9qZWN0TmFtZS8kZGlyJyk7CiAgICBpZiAoIWRpcmVjdG9yeS5leGlzdHNTeW5jKCkpIHsKICAgICAgZGlyZWN0b3J5LmNyZWF0ZVN5bmMocmVjdXJzaXZlOiB0cnVlKTsKICAgICAgY29udGV4dC5sb2dnZXIuaW5mbygnQ3JlYXRlZCBmZWF0dXJlIGRpcmVjdG9yeTogJGRpcicpOwogICAgfQogIH0KICAKICAvLyBDcmVhdGUgc2FtcGxlIGVudGl0eQogIGNyZWF0ZUZpbGUoCiAgICAnJHByb2plY3ROYW1lL2xpYi9mZWF0dXJlcy8kZmVhdHVyZU5hbWUvZG9tYWluL2VudGl0aWVzLyR7ZmVhdHVyZU5hbWV9X2VudGl0eS5kYXJ0JywKICAgIGdlbmVyYXRlRW50aXR5VGVtcGxhdGUoZmVhdHVyZU5hbWUpLAogICAgY29udGV4dAogICk7CiAgCiAgLy8gQ3JlYXRlIHNhbXBsZSByZXBvc2l0b3J5IGludGVyZmFjZQogIGNyZWF0ZUZpbGUoCiAgICAnJHByb2plY3ROYW1lL2xpYi9mZWF0dXJlcy8kZmVhdHVyZU5hbWUvZG9tYWluL3JlcG9zaXRvcmllcy8ke2ZlYXR1cmVOYW1lfV9yZXBvc2l0b3J5LmRhcnQnLAogICAgZ2VuZXJhdGVSZXBvc2l0b3J5VGVtcGxhdGUoZmVhdHVyZU5hbWUpLAogICAgY29udGV4dAogICk7CiAgCiAgLy8gQ3JlYXRlIHNhbXBsZSB1c2UgY2FzZQogIGNyZWF0ZUZpbGUoCiAgICAnJHByb2plY3ROYW1lL2xpYi9mZWF0dXJlcy8kZmVhdHVyZU5hbWUvZG9tYWluL3VzZWNhc2VzLyR7ZmVhdHVyZU5hbWV9X3VzZWNhc2UuZGFydCcsCiAgICBnZW5lcmF0ZVVzZUNhc2VUZW1wbGF0ZShmZWF0dXJlTmFtZSksCiAgICBjb250ZXh0CiAgKTsKICAKICAvLyBDcmVhdGUgc2FtcGxlIG1vZGVsCiAgY3JlYXRlRmlsZSgKICAgICckcHJvamVjdE5hbWUvbGliL2ZlYXR1cmVzLyRmZWF0dXJlTmFtZS9kYXRhL21vZGVscy8ke2ZlYXR1cmVOYW1lfV9tb2RlbC5kYXJ0JywKICAgIGdlbmVyYXRlTW9kZWxUZW1wbGF0ZShmZWF0dXJlTmFtZSksCiAgICBjb250ZXh0CiAgKTsKICAKICAvLyBDcmVhdGUgc2FtcGxlIHJlcG9zaXRvcnkgaW1wbGVtZW50YXRpb24KICBjcmVhdGVGaWxlKAogICAgJyRwcm9qZWN0TmFtZS9saWIvZmVhdHVyZXMvJGZlYXR1cmVOYW1lL2RhdGEvcmVwb3NpdG9yaWVzLyR7ZmVhdHVyZU5hbWV9X3JlcG9zaXRvcnlfaW1wbC5kYXJ0JywKICAgIGdlbmVyYXRlUmVwb3NpdG9yeUltcGxUZW1wbGF0ZShmZWF0dXJlTmFtZSksCiAgICBjb250ZXh0CiAgKTsKICAKICAvLyBDcmVhdGUgc2FtcGxlIGRhdGEgc291cmNlCiAgY3JlYXRlRmlsZSgKICAgICckcHJvamVjdE5hbWUvbGliL2ZlYXR1cmVzLyRmZWF0dXJlTmFtZS9kYXRhL2RhdGFzb3VyY2VzLyR7ZmVhdHVyZU5hbWV9X2RhdGFfc291cmNlLmRhcnQnLAogICAgZ2VuZXJhdGVEYXRhU291cmNlVGVtcGxhdGUoZmVhdHVyZU5hbWUpLAogICAgY29udGV4dAogICk7CiAgCiAgLy8gQ3JlYXRlIHNhbXBsZSBwYWdlCiAgY3JlYXRlRmlsZSgKICAgICckcHJvamVjdE5hbWUvbGliL2ZlYXR1cmVzLyRmZWF0dXJlTmFtZS9wcmVzZW50YXRpb24vcGFnZXMvJHtmZWF0dXJlTmFtZX1fcGFnZS5kYXJ0JywKICAgIGdlbmVyYXRlUGFnZVRlbXBsYXRlKGZlYXR1cmVOYW1lKSwKICAgIGNvbnRleHQKICApOwogIAogIC8vIENyZWF0ZSBzYW1wbGUgd2lkZ2V0CiAgY3JlYXRlRmlsZSgKICAgICckcHJvamVjdE5hbWUvbGliL2ZlYXR1cmVzLyRmZWF0dXJlTmFtZS9wcmVzZW50YXRpb24vd2lkZ2V0cy8ke2ZlYXR1cmVOYW1lfV93aWRnZXQuZGFydCcsCiAgICBnZW5lcmF0ZVdpZGdldFRlbXBsYXRlKGZlYXR1cmVOYW1lKSwKICAgIGNvbnRleHQKICApOwogIAogIC8vIENyZWF0ZSBzdGF0ZSBtYW5hZ2VtZW50IGZpbGVzCiAgY3JlYXRlU3RhdGVNYW5hZ2VtZW50RmlsZXMoCiAgICBjb250ZXh0LCAKICAgIHByb2plY3ROYW1lLCAKICAgICdsaWIvZmVhdHVyZXMvJGZlYXR1cmVOYW1lL3ByZXNlbnRhdGlvbicsCiAgICBmZWF0dXJlTmFtZSwKICAgIHN0YXRlTWFuYWdlbWVudAogICk7Cn0=",
      "type": "text"
    },
    {
      "path": "lib/state_management_handler.dart",
      "data":
          "aW1wb3J0ICdkYXJ0OmlvJzsKCmltcG9ydCAncGFja2FnZTptYXNvbi9tYXNvbi5kYXJ0JzsKCmltcG9ydCAndXRpbHMuZGFydCc7Cgp2b2lkIGNyZWF0ZVN0YXRlTWFuYWdlbWVudEZpbGVzKEhvb2tDb250ZXh0IGNvbnRleHQsIFN0cmluZyBwcm9qZWN0TmFtZSwKICAgIFN0cmluZyBiYXNlUGF0aCwgU3RyaW5nIGZlYXR1cmVOYW1lLCBTdHJpbmcgc3RhdGVNYW5hZ2VtZW50KSB7CiAgc3dpdGNoIChzdGF0ZU1hbmFnZW1lbnQpIHsKICAgIGNhc2UgJ0JMb0MnOgogICAgICBjcmVhdGVCbG9jRmlsZXMoY29udGV4dCwgcHJvamVjdE5hbWUsICckYmFzZVBhdGgvYmxvYycsIGZlYXR1cmVOYW1lKTsKICAgICAgYnJlYWs7CiAgICBjYXNlICdQcm92aWRlcic6CiAgICAgIGNyZWF0ZVByb3ZpZGVyRmlsZXMoCiAgICAgICAgICBjb250ZXh0LCBwcm9qZWN0TmFtZSwgJyRiYXNlUGF0aC9wcm92aWRlcnMnLCBmZWF0dXJlTmFtZSk7CiAgICAgIGJyZWFrOwogICAgY2FzZSAnUml2ZXJwb2QnOgogICAgICBjcmVhdGVSaXZlcnBvZEZpbGVzKAogICAgICAgICAgY29udGV4dCwgcHJvamVjdE5hbWUsICckYmFzZVBhdGgvcHJvdmlkZXJzJywgZmVhdHVyZU5hbWUpOwogICAgICBicmVhazsKICAgIGNhc2UgJ0dldFgnOgogICAgICBjcmVhdGVHZXRYRmlsZXMoCiAgICAgICAgICBjb250ZXh0LCBwcm9qZWN0TmFtZSwgJyRiYXNlUGF0aC9jb250cm9sbGVycycsIGZlYXR1cmVOYW1lKTsKICAgICAgYnJlYWs7CiAgICBjYXNlICdNb2JYJzoKICAgICAgY3JlYXRlTW9iWEZpbGVzKGNvbnRleHQsIHByb2plY3ROYW1lLCAnJGJhc2VQYXRoL3N0b3JlcycsIGZlYXR1cmVOYW1lKTsKICAgICAgYnJlYWs7CiAgICBjYXNlICdSZWR1eCc6CiAgICAgIGNyZWF0ZVJlZHV4RmlsZXMoY29udGV4dCwgcHJvamVjdE5hbWUsICckYmFzZVBhdGgvcmVkdXgnLCBmZWF0dXJlTmFtZSk7CiAgICAgIGJyZWFrOwogICAgZGVmYXVsdDoKICAgICAgY29udGV4dC5sb2dnZXIud2FybignVW5rbm93biBzdGF0ZSBtYW5hZ2VtZW50OiAkc3RhdGVNYW5hZ2VtZW50Jyk7CiAgfQp9Cgp2b2lkIGNyZWF0ZUJsb2NGaWxlcyhIb29rQ29udGV4dCBjb250ZXh0LCBTdHJpbmcgcHJvamVjdE5hbWUsIFN0cmluZyBibG9jUGF0aCwKICAgIFN0cmluZyBmZWF0dXJlTmFtZSkgewogIC8vIENyZWF0ZSB0aGUgYmxvYyBkaXJlY3RvcnkgaWYgaXQgZG9lc24ndCBleGlzdAogIGZpbmFsIGJsb2NEaXIgPSBEaXJlY3RvcnkoJyRwcm9qZWN0TmFtZS8kYmxvY1BhdGgnKTsKICBpZiAoIWJsb2NEaXIuZXhpc3RzU3luYygpKSB7CiAgICBibG9jRGlyLmNyZWF0ZVN5bmMocmVjdXJzaXZlOiB0cnVlKTsKICAgIGNvbnRleHQubG9nZ2VyLmluZm8oJ0NyZWF0ZWQgQkxvQyBkaXJlY3Rvcnk6ICRibG9jUGF0aCcpOwogIH0KCiAgLy8gQ3JlYXRlIEJMb0MgZmlsZXMKICBjcmVhdGVGaWxlKAogICAgICAnJHByb2plY3ROYW1lLyRibG9jUGF0aC8ke2ZlYXR1cmVOYW1lfV9ibG9jLmRhcnQnLAogICAgICAnJycKLy8gJHt0b0NsYXNzTmFtZShmZWF0dXJlTmFtZSl9QmxvYwovLyBHZW5lcmF0ZWQgYnkgTWFzb24KaW1wb3J0ICdwYWNrYWdlOmZsdXR0ZXJfYmxvYy9mbHV0dGVyX2Jsb2MuZGFydCc7CmltcG9ydCAnLi8ke2ZlYXR1cmVOYW1lfV9ldmVudC5kYXJ0JzsKaW1wb3J0ICcuLyR7ZmVhdHVyZU5hbWV9X3N0YXRlLmRhcnQnOwoKY2xhc3MgJHt0b0NsYXNzTmFtZShmZWF0dXJlTmFtZSl9QmxvYyBleHRlbmRzIEJsb2M8JHt0b0NsYXNzTmFtZShmZWF0dXJlTmFtZSl9RXZlbnQsICR7dG9DbGFzc05hbWUoZmVhdHVyZU5hbWUpfVN0YXRlPiB7CiAgJHt0b0NsYXNzTmFtZShmZWF0dXJlTmFtZSl9QmxvYygpIDogc3VwZXIoJHt0b0NsYXNzTmFtZShmZWF0dXJlTmFtZSl9SW5pdGlhbCgpKSB7CiAgICBvbjwke3RvQ2xhc3NOYW1lKGZlYXR1cmVOYW1lKX1TdGFydGVkPihfb24ke3RvQ2xhc3NOYW1lKGZlYXR1cmVOYW1lKX1TdGFydGVkKTsKICAgIG9uPCR7dG9DbGFzc05hbWUoZmVhdHVyZU5hbWUpfUZldGNoPihfb24ke3RvQ2xhc3NOYW1lKGZlYXR1cmVOYW1lKX1GZXRjaCk7CiAgfQoKICBGdXR1cmU8dm9pZD4gX29uJHt0b0NsYXNzTmFtZShmZWF0dXJlTmFtZSl9U3RhcnRlZCgKICAgICR7dG9DbGFzc05hbWUoZmVhdHVyZU5hbWUpfVN0YXJ0ZWQgZXZlbnQsCiAgICBFbWl0dGVyPCR7dG9DbGFzc05hbWUoZmVhdHVyZU5hbWUpfVN0YXRlPiBlbWl0LAogICkgYXN5bmMgewogICAgZW1pdCgke3RvQ2xhc3NOYW1lKGZlYXR1cmVOYW1lKX1Jbml0aWFsKCkpOwogIH0KCiAgRnV0dXJlPHZvaWQ+IF9vbiR7dG9DbGFzc05hbWUoZmVhdHVyZU5hbWUpfUZldGNoKAogICAgJHt0b0NsYXNzTmFtZShmZWF0dXJlTmFtZSl9RmV0Y2ggZXZlbnQsCiAgICBFbWl0dGVyPCR7dG9DbGFzc05hbWUoZmVhdHVyZU5hbWUpfVN0YXRlPiBlbWl0LAogICkgYXN5bmMgewogICAgZW1pdCgke3RvQ2xhc3NOYW1lKGZlYXR1cmVOYW1lKX1Mb2FkaW5nKCkpOwogICAgdHJ5IHsKICAgICAgLy8gVE9ETzogSW1wbGVtZW50IGZldGNoaW5nIGRhdGEKICAgICAgLy8gRXhhbXBsZTogZmluYWwgcmVzdWx0ID0gYXdhaXQgcmVwb3NpdG9yeS5nZXREYXRhKCk7CiAgICAgIGVtaXQoJHt0b0NsYXNzTmFtZShmZWF0dXJlTmFtZSl9TG9hZGVkKFtdKSk7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIGVtaXQoJHt0b0NsYXNzTmFtZShmZWF0dXJlTmFtZSl9RXJyb3IoZS50b1N0cmluZygpKSk7CiAgICB9CiAgfQp9CicnJywKICAgICAgY29udGV4dCk7CgogIGNyZWF0ZUZpbGUoCiAgICAgICckcHJvamVjdE5hbWUvJGJsb2NQYXRoLyR7ZmVhdHVyZU5hbWV9X2V2ZW50LmRhcnQnLAogICAgICAnJycKLy8gJHt0b0NsYXNzTmFtZShmZWF0dXJlTmFtZSl9RXZlbnQKLy8gR2VuZXJhdGVkIGJ5IE1hc29uCgphYnN0cmFjdCBjbGFzcyAke3RvQ2xhc3NOYW1lKGZlYXR1cmVOYW1lKX1FdmVudCB7CiAgY29uc3QgJHt0b0NsYXNzTmFtZShmZWF0dXJlTmFtZSl9RXZlbnQoKTsKfQoKY2xhc3MgJHt0b0NsYXNzTmFtZShmZWF0dXJlTmFtZSl9U3RhcnRlZCBleHRlbmRzICR7dG9DbGFzc05hbWUoZmVhdHVyZU5hbWUpfUV2ZW50IHsKICBjb25zdCAke3RvQ2xhc3NOYW1lKGZlYXR1cmVOYW1lKX1TdGFydGVkKCk7Cn0KCmNsYXNzICR7dG9DbGFzc05hbWUoZmVhdHVyZU5hbWUpfUZldGNoIGV4dGVuZHMgJHt0b0NsYXNzTmFtZShmZWF0dXJlTmFtZSl9RXZlbnQgewogIGNvbnN0ICR7dG9DbGFzc05hbWUoZmVhdHVyZU5hbWUpfUZldGNoKCk7Cn0KCmNsYXNzICR7dG9DbGFzc05hbWUoZmVhdHVyZU5hbWUpfUNyZWF0ZSBleHRlbmRzICR7dG9DbGFzc05hbWUoZmVhdHVyZU5hbWUpfUV2ZW50IHsKICBmaW5hbCBkeW5hbWljIGRhdGE7CiAgY29uc3QgJHt0b0NsYXNzTmFtZShmZWF0dXJlTmFtZSl9Q3JlYXRlKHRoaXMuZGF0YSk7Cn0KCmNsYXNzICR7dG9DbGFzc05hbWUoZmVhdHVyZU5hbWUpfVVwZGF0ZSBleHRlbmRzICR7dG9DbGFzc05hbWUoZmVhdHVyZU5hbWUpfUV2ZW50IHsKICBmaW5hbCBTdHJpbmcgaWQ7CiAgZmluYWwgZHluYW1pYyBkYXRhOwogIGNvbnN0ICR7dG9DbGFzc05hbWUoZmVhdHVyZU5hbWUpfVVwZGF0ZSh0aGlzLmlkLCB0aGlzLmRhdGEpOwp9CgpjbGFzcyAke3RvQ2xhc3NOYW1lKGZlYXR1cmVOYW1lKX1EZWxldGUgZXh0ZW5kcyAke3RvQ2xhc3NOYW1lKGZlYXR1cmVOYW1lKX1FdmVudCB7CiAgZmluYWwgU3RyaW5nIGlkOwogIGNvbnN0ICR7dG9DbGFzc05hbWUoZmVhdHVyZU5hbWUpfURlbGV0ZSh0aGlzLmlkKTsKfQonJycsCiAgICAgIGNvbnRleHQpOwoKICBjcmVhdGVGaWxlKAogICAgICAnJHByb2plY3ROYW1lLyRibG9jUGF0aC8ke2ZlYXR1cmVOYW1lfV9zdGF0ZS5kYXJ0JywKICAgICAgJycnCi8vICR7dG9DbGFzc05hbWUoZmVhdHVyZU5hbWUpfVN0YXRlCi8vIEdlbmVyYXRlZCBieSBNYXNvbgoKYWJzdHJhY3QgY2xhc3MgJHt0b0NsYXNzTmFtZShmZWF0dXJlTmFtZSl9U3RhdGUgewogIGNvbnN0ICR7dG9DbGFzc05hbWUoZmVhdHVyZU5hbWUpfVN0YXRlKCk7Cn0KCmNsYXNzICR7dG9DbGFzc05hbWUoZmVhdHVyZU5hbWUpfUluaXRpYWwgZXh0ZW5kcyAke3RvQ2xhc3NOYW1lKGZlYXR1cmVOYW1lKX1TdGF0ZSB7fQoKY2xhc3MgJHt0b0NsYXNzTmFtZShmZWF0dXJlTmFtZSl9TG9hZGluZyBleHRlbmRzICR7dG9DbGFzc05hbWUoZmVhdHVyZU5hbWUpfVN0YXRlIHt9CgpjbGFzcyAke3RvQ2xhc3NOYW1lKGZlYXR1cmVOYW1lKX1Mb2FkZWQgZXh0ZW5kcyAke3RvQ2xhc3NOYW1lKGZlYXR1cmVOYW1lKX1TdGF0ZSB7CiAgZmluYWwgTGlzdDxkeW5hbWljPiBpdGVtczsKICBjb25zdCAke3RvQ2xhc3NOYW1lKGZlYXR1cmVOYW1lKX1Mb2FkZWQodGhpcy5pdGVtcyk7Cn0KCmNsYXNzICR7dG9DbGFzc05hbWUoZmVhdHVyZU5hbWUpfUVycm9yIGV4dGVuZHMgJHt0b0NsYXNzTmFtZShmZWF0dXJlTmFtZSl9U3RhdGUgewogIGZpbmFsIFN0cmluZyBtZXNzYWdlOwogIGNvbnN0ICR7dG9DbGFzc05hbWUoZmVhdHVyZU5hbWUpfUVycm9yKHRoaXMubWVzc2FnZSk7Cn0KJycnLAogICAgICBjb250ZXh0KTsKfQoKdm9pZCBjcmVhdGVQcm92aWRlckZpbGVzKEhvb2tDb250ZXh0IGNvbnRleHQsIFN0cmluZyBwcm9qZWN0TmFtZSwKICAgIFN0cmluZyBwcm92aWRlclBhdGgsIFN0cmluZyBmZWF0dXJlTmFtZSkgewogIC8vIENyZWF0ZSB0aGUgcHJvdmlkZXIgZGlyZWN0b3J5IGlmIGl0IGRvZXNuJ3QgZXhpc3QKICBmaW5hbCBwcm92aWRlckRpciA9IERpcmVjdG9yeSgnJHByb2plY3ROYW1lLyRwcm92aWRlclBhdGgnKTsKICBpZiAoIXByb3ZpZGVyRGlyLmV4aXN0c1N5bmMoKSkgewogICAgcHJvdmlkZXJEaXIuY3JlYXRlU3luYyhyZWN1cnNpdmU6IHRydWUpOwogICAgY29udGV4dC5sb2dnZXIuaW5mbygnQ3JlYXRlZCBQcm92aWRlciBkaXJlY3Rvcnk6ICRwcm92aWRlclBhdGgnKTsKICB9CgogIC8vIENyZWF0ZSBwcm92aWRlciBmaWxlCiAgY3JlYXRlRmlsZSgKICAgICAgJyRwcm9qZWN0TmFtZS8kcHJvdmlkZXJQYXRoLyR7ZmVhdHVyZU5hbWV9X3Byb3ZpZGVyLmRhcnQnLAogICAgICAnJycKLy8gJHt0b0NsYXNzTmFtZShmZWF0dXJlTmFtZSl9UHJvdmlkZXIKLy8gR2VuZXJhdGVkIGJ5IE1hc29uCmltcG9ydCAncGFja2FnZTpmbHV0dGVyL2ZvdW5kYXRpb24uZGFydCc7CgpjbGFzcyAke3RvQ2xhc3NOYW1lKGZlYXR1cmVOYW1lKX1Qcm92aWRlciBleHRlbmRzIENoYW5nZU5vdGlmaWVyIHsKICBib29sIF9pc0xvYWRpbmcgPSBmYWxzZTsKICBTdHJpbmc/IF9lcnJvck1lc3NhZ2U7CiAgTGlzdDxkeW5hbWljPiBfaXRlbXMgPSBbXTsKICAKICBib29sIGdldCBpc0xvYWRpbmcgPT4gX2lzTG9hZGluZzsKICBTdHJpbmc/IGdldCBlcnJvck1lc3NhZ2UgPT4gX2Vycm9yTWVzc2FnZTsKICBMaXN0PGR5bmFtaWM+IGdldCBpdGVtcyA9PiBfaXRlbXM7CiAgCiAgRnV0dXJlPHZvaWQ+IGZldGNoRGF0YSgpIGFzeW5jIHsKICAgIF9pc0xvYWRpbmcgPSB0cnVlOwogICAgX2Vycm9yTWVzc2FnZSA9IG51bGw7CiAgICBub3RpZnlMaXN0ZW5lcnMoKTsKICAgIAogICAgdHJ5IHsKICAgICAgLy8gVE9ETzogSW1wbGVtZW50IEFQSSBjYWxsIG9yIGRhdGEgZmV0Y2gKICAgICAgLy8gRXhhbXBsZTogX2l0ZW1zID0gYXdhaXQgc2VydmljZS5nZXRJdGVtcygpOwogICAgICBfaXRlbXMgPSBbXTsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgX2Vycm9yTWVzc2FnZSA9IGUudG9TdHJpbmcoKTsKICAgIH0gZmluYWxseSB7CiAgICAgIF9pc0xvYWRpbmcgPSBmYWxzZTsKICAgICAgbm90aWZ5TGlzdGVuZXJzKCk7CiAgICB9CiAgfQogIAogIEZ1dHVyZTx2b2lkPiBjcmVhdGVJdGVtKGR5bmFtaWMgaXRlbSkgYXN5bmMgewogICAgX2lzTG9hZGluZyA9IHRydWU7CiAgICBfZXJyb3JNZXNzYWdlID0gbnVsbDsKICAgIG5vdGlmeUxpc3RlbmVycygpOwogICAgCiAgICB0cnkgewogICAgICAvLyBUT0RPOiBJbXBsZW1lbnQgY3JlYXRlIGl0ZW0KICAgICAgLy8gRXhhbXBsZTogYXdhaXQgc2VydmljZS5jcmVhdGVJdGVtKGl0ZW0pOwogICAgICAvLyBfaXRlbXMuYWRkKGl0ZW0pOwogICAgfSBjYXRjaCAoZSkgewogICAgICBfZXJyb3JNZXNzYWdlID0gZS50b1N0cmluZygpOwogICAgfSBmaW5hbGx5IHsKICAgICAgX2lzTG9hZGluZyA9IGZhbHNlOwogICAgICBub3RpZnlMaXN0ZW5lcnMoKTsKICAgIH0KICB9CiAgCiAgRnV0dXJlPHZvaWQ+IHVwZGF0ZUl0ZW0oU3RyaW5nIGlkLCBkeW5hbWljIGl0ZW0pIGFzeW5jIHsKICAgIF9pc0xvYWRpbmcgPSB0cnVlOwogICAgX2Vycm9yTWVzc2FnZSA9IG51bGw7CiAgICBub3RpZnlMaXN0ZW5lcnMoKTsKICAgIAogICAgdHJ5IHsKICAgICAgLy8gVE9ETzogSW1wbGVtZW50IHVwZGF0ZSBpdGVtCiAgICAgIC8vIEV4YW1wbGU6IGF3YWl0IHNlcnZpY2UudXBkYXRlSXRlbShpZCwgaXRlbSk7CiAgICAgIC8vIFVwZGF0ZSBpdGVtIGluIF9pdGVtcyBsaXN0CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIF9lcnJvck1lc3NhZ2UgPSBlLnRvU3RyaW5nKCk7CiAgICB9IGZpbmFsbHkgewogICAgICBfaXNMb2FkaW5nID0gZmFsc2U7CiAgICAgIG5vdGlmeUxpc3RlbmVycygpOwogICAgfQogIH0KICAKICBGdXR1cmU8dm9pZD4gZGVsZXRlSXRlbShTdHJpbmcgaWQpIGFzeW5jIHsKICAgIF9pc0xvYWRpbmcgPSB0cnVlOwogICAgX2Vycm9yTWVzc2FnZSA9IG51bGw7CiAgICBub3RpZnlMaXN0ZW5lcnMoKTsKICAgIAogICAgdHJ5IHsKICAgICAgLy8gVE9ETzogSW1wbGVtZW50IGRlbGV0ZSBpdGVtCiAgICAgIC8vIEV4YW1wbGU6IGF3YWl0IHNlcnZpY2UuZGVsZXRlSXRlbShpZCk7CiAgICAgIC8vIFJlbW92ZSBpdGVtIGZyb20gX2l0ZW1zIGxpc3QKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgX2Vycm9yTWVzc2FnZSA9IGUudG9TdHJpbmcoKTsKICAgIH0gZmluYWxseSB7CiAgICAgIF9pc0xvYWRpbmcgPSBmYWxzZTsKICAgICAgbm90aWZ5TGlzdGVuZXJzKCk7CiAgICB9CiAgfQp9CicnJywKICAgICAgY29udGV4dCk7Cn0KCnZvaWQgY3JlYXRlUml2ZXJwb2RGaWxlcyhIb29rQ29udGV4dCBjb250ZXh0LCBTdHJpbmcgcHJvamVjdE5hbWUsCiAgICBTdHJpbmcgcml2ZXJwb2RQYXRoLCBTdHJpbmcgZmVhdHVyZU5hbWUpIHsKICAvLyBDcmVhdGUgdGhlIHJpdmVycG9kIGRpcmVjdG9yeSBpZiBpdCBkb2Vzbid0IGV4aXN0CiAgZmluYWwgcml2ZXJwb2REaXIgPSBEaXJlY3RvcnkoJyRwcm9qZWN0TmFtZS8kcml2ZXJwb2RQYXRoJyk7CiAgaWYgKCFyaXZlcnBvZERpci5leGlzdHNTeW5jKCkpIHsKICAgIHJpdmVycG9kRGlyLmNyZWF0ZVN5bmMocmVjdXJzaXZlOiB0cnVlKTsKICAgIGNvbnRleHQubG9nZ2VyLmluZm8oJ0NyZWF0ZWQgUml2ZXJwb2QgZGlyZWN0b3J5OiAkcml2ZXJwb2RQYXRoJyk7CiAgfQoKICAvLyBDcmVhdGUgcml2ZXJwb2QgZmlsZXMKICBjcmVhdGVGaWxlKAogICAgICAnJHByb2plY3ROYW1lLyRyaXZlcnBvZFBhdGgvJHtmZWF0dXJlTmFtZX1fcHJvdmlkZXIuZGFydCcsCiAgICAgICcnJwovLyAke3RvQ2xhc3NOYW1lKGZlYXR1cmVOYW1lKX1Qcm92aWRlcgovLyBHZW5lcmF0ZWQgYnkgTWFzb24KaW1wb3J0ICdwYWNrYWdlOmZsdXR0ZXJfcml2ZXJwb2QvZmx1dHRlcl9yaXZlcnBvZC5kYXJ0JzsKCi8vIFN0YXRlCmNsYXNzICR7dG9DbGFzc05hbWUoZmVhdHVyZU5hbWUpfVN0YXRlIHsKICBmaW5hbCBib29sIGlzTG9hZGluZzsKICBmaW5hbCBTdHJpbmc/IGVycm9yTWVzc2FnZTsKICBmaW5hbCBMaXN0PGR5bmFtaWM+IGl0ZW1zOwogIAogIGNvbnN0ICR7dG9DbGFzc05hbWUoZmVhdHVyZU5hbWUpfVN0YXRlKHsKICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2UsCiAgICB0aGlzLmVycm9yTWVzc2FnZSwKICAgIHRoaXMuaXRlbXMgPSBjb25zdCBbXSwKICB9KTsKICAKICAke3RvQ2xhc3NOYW1lKGZlYXR1cmVOYW1lKX1TdGF0ZSBjb3B5V2l0aCh7CiAgICBib29sPyBpc0xvYWRpbmcsCiAgICBTdHJpbmc/IGVycm9yTWVzc2FnZSwKICAgIExpc3Q8ZHluYW1pYz4/IGl0ZW1zLAogIH0pIHsKICAgIHJldHVybiAke3RvQ2xhc3NOYW1lKGZlYXR1cmVOYW1lKX1TdGF0ZSgKICAgICAgaXNMb2FkaW5nOiBpc0xvYWRpbmcgPz8gdGhpcy5pc0xvYWRpbmcsCiAgICAgIGVycm9yTWVzc2FnZTogZXJyb3JNZXNzYWdlID8/IHRoaXMuZXJyb3JNZXNzYWdlLAogICAgICBpdGVtczogaXRlbXMgPz8gdGhpcy5pdGVtcywKICAgICk7CiAgfQp9CgovLyBQcm92aWRlcgpmaW5hbCAke2ZlYXR1cmVOYW1lfVByb3ZpZGVyID0gU3RhdGVOb3RpZmllclByb3ZpZGVyPCR7dG9DbGFzc05hbWUoZmVhdHVyZU5hbWUpfU5vdGlmaWVyLCAke3RvQ2xhc3NOYW1lKGZlYXR1cmVOYW1lKX1TdGF0ZT4oKHJlZikgewogIHJldHVybiAke3RvQ2xhc3NOYW1lKGZlYXR1cmVOYW1lKX1Ob3RpZmllcigpOwp9KTsKCi8vIE5vdGlmaWVyCmNsYXNzICR7dG9DbGFzc05hbWUoZmVhdHVyZU5hbWUpfU5vdGlmaWVyIGV4dGVuZHMgU3RhdGVOb3RpZmllcjwke3RvQ2xhc3NOYW1lKGZlYXR1cmVOYW1lKX1TdGF0ZT4gewogICR7dG9DbGFzc05hbWUoZmVhdHVyZU5hbWUpfU5vdGlmaWVyKCkgOiBzdXBlcihjb25zdCAke3RvQ2xhc3NOYW1lKGZlYXR1cmVOYW1lKX1TdGF0ZSgpKSB7CiAgICBmZXRjaERhdGEoKTsKICB9CiAgCiAgRnV0dXJlPHZvaWQ+IGZldGNoRGF0YSgpIGFzeW5jIHsKICAgIHN0YXRlID0gc3RhdGUuY29weVdpdGgoaXNMb2FkaW5nOiB0cnVlLCBlcnJvck1lc3NhZ2U6IG51bGwpOwogICAgCiAgICB0cnkgewogICAgICAvLyBUT0RPOiBJbXBsZW1lbnQgQVBJIGNhbGwgb3IgZGF0YSBmZXRjaAogICAgICAvLyBFeGFtcGxlOiBmaW5hbCBpdGVtcyA9IGF3YWl0IHNlcnZpY2UuZ2V0SXRlbXMoKTsKICAgICAgZmluYWwgaXRlbXMgPSBbXTsKICAgICAgc3RhdGUgPSBzdGF0ZS5jb3B5V2l0aChpc0xvYWRpbmc6IGZhbHNlLCBpdGVtczogaXRlbXMpOwogICAgfSBjYXRjaCAoZSkgewogICAgICBzdGF0ZSA9IHN0YXRlLmNvcHlXaXRoKGlzTG9hZGluZzogZmFsc2UsIGVycm9yTWVzc2FnZTogZS50b1N0cmluZygpKTsKICAgIH0KICB9CiAgCiAgRnV0dXJlPHZvaWQ+IGNyZWF0ZUl0ZW0oZHluYW1pYyBpdGVtKSBhc3luYyB7CiAgICBzdGF0ZSA9IHN0YXRlLmNvcHlXaXRoKGlzTG9hZGluZzogdHJ1ZSwgZXJyb3JNZXNzYWdlOiBudWxsKTsKICAgIAogICAgdHJ5IHsKICAgICAgLy8gVE9ETzogSW1wbGVtZW50IGNyZWF0ZSBpdGVtCiAgICAgIC8vIEV4YW1wbGU6IGF3YWl0IHNlcnZpY2UuY3JlYXRlSXRlbShpdGVtKTsKICAgICAgLy8gVXBkYXRlIHN0YXRlIHdpdGggbmV3IGl0ZW0KICAgICAgc3RhdGUgPSBzdGF0ZS5jb3B5V2l0aChpc0xvYWRpbmc6IGZhbHNlKTsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgc3RhdGUgPSBzdGF0ZS5jb3B5V2l0aChpc0xvYWRpbmc6IGZhbHNlLCBlcnJvck1lc3NhZ2U6IGUudG9TdHJpbmcoKSk7CiAgICB9CiAgfQogIAogIEZ1dHVyZTx2b2lkPiB1cGRhdGVJdGVtKFN0cmluZyBpZCwgZHluYW1pYyBpdGVtKSBhc3luYyB7CiAgICBzdGF0ZSA9IHN0YXRlLmNvcHlXaXRoKGlzTG9hZGluZzogdHJ1ZSwgZXJyb3JNZXNzYWdlOiBudWxsKTsKICAgIAogICAgdHJ5IHsKICAgICAgLy8gVE9ETzogSW1wbGVtZW50IHVwZGF0ZSBpdGVtCiAgICAgIC8vIEV4YW1wbGU6IGF3YWl0IHNlcnZpY2UudXBkYXRlSXRlbShpZCwgaXRlbSk7CiAgICAgIC8vIFVwZGF0ZSBzdGF0ZSB3aXRoIHVwZGF0ZWQgaXRlbQogICAgICBzdGF0ZSA9IHN0YXRlLmNvcHlXaXRoKGlzTG9hZGluZzogZmFsc2UpOwogICAgfSBjYXRjaCAoZSkgewogICAgICBzdGF0ZSA9IHN0YXRlLmNvcHlXaXRoKGlzTG9hZGluZzogZmFsc2UsIGVycm9yTWVzc2FnZTogZS50b1N0cmluZygpKTsKICAgIH0KICB9CiAgCiAgRnV0dXJlPHZvaWQ+IGRlbGV0ZUl0ZW0oU3RyaW5nIGlkKSBhc3luYyB7CiAgICBzdGF0ZSA9IHN0YXRlLmNvcHlXaXRoKGlzTG9hZGluZzogdHJ1ZSwgZXJyb3JNZXNzYWdlOiBudWxsKTsKICAgIAogICAgdHJ5IHsKICAgICAgLy8gVE9ETzogSW1wbGVtZW50IGRlbGV0ZSBpdGVtCiAgICAgIC8vIEV4YW1wbGU6IGF3YWl0IHNlcnZpY2UuZGVsZXRlSXRlbShpZCk7CiAgICAgIC8vIFVwZGF0ZSBzdGF0ZSBieSByZW1vdmluZyBpdGVtCiAgICAgIHN0YXRlID0gc3RhdGUuY29weVdpdGgoaXNMb2FkaW5nOiBmYWxzZSk7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIHN0YXRlID0gc3RhdGUuY29weVdpdGgoaXNMb2FkaW5nOiBmYWxzZSwgZXJyb3JNZXNzYWdlOiBlLnRvU3RyaW5nKCkpOwogICAgfQogIH0KfQonJycsCiAgICAgIGNvbnRleHQpOwp9Cgp2b2lkIGNyZWF0ZUdldFhGaWxlcyhIb29rQ29udGV4dCBjb250ZXh0LCBTdHJpbmcgcHJvamVjdE5hbWUsIFN0cmluZyBnZXR4UGF0aCwKICAgIFN0cmluZyBmZWF0dXJlTmFtZSkgewogIC8vIENyZWF0ZSB0aGUgR2V0WCBkaXJlY3RvcnkgaWYgaXQgZG9lc24ndCBleGlzdAogIGZpbmFsIGdldHhEaXIgPSBEaXJlY3RvcnkoJyRwcm9qZWN0TmFtZS8kZ2V0eFBhdGgnKTsKICBpZiAoIWdldHhEaXIuZXhpc3RzU3luYygpKSB7CiAgICBnZXR4RGlyLmNyZWF0ZVN5bmMocmVjdXJzaXZlOiB0cnVlKTsKICAgIGNvbnRleHQubG9nZ2VyLmluZm8oJ0NyZWF0ZWQgR2V0WCBkaXJlY3Rvcnk6ICRnZXR4UGF0aCcpOwogIH0KCiAgLy8gQ3JlYXRlIEdldFggY29udHJvbGxlciBmaWxlCiAgY3JlYXRlRmlsZSgKICAgICAgJyRwcm9qZWN0TmFtZS8kZ2V0eFBhdGgvJHtmZWF0dXJlTmFtZX1fY29udHJvbGxlci5kYXJ0JywKICAgICAgJycnCi8vICR7dG9DbGFzc05hbWUoZmVhdHVyZU5hbWUpfUNvbnRyb2xsZXIKLy8gR2VuZXJhdGVkIGJ5IE1hc29uCmltcG9ydCAncGFja2FnZTpnZXQvZ2V0LmRhcnQnOwoKY2xhc3MgJHt0b0NsYXNzTmFtZShmZWF0dXJlTmFtZSl9Q29udHJvbGxlciBleHRlbmRzIEdldHhDb250cm9sbGVyIHsKICBmaW5hbCBSeEJvb2wgaXNMb2FkaW5nID0gZmFsc2Uub2JzOwogIGZpbmFsIFJ4PFN0cmluZz8+IGVycm9yTWVzc2FnZSA9IFJ4PFN0cmluZz8+KG51bGwpOwogIGZpbmFsIFJ4TGlzdDxkeW5hbWljPiBpdGVtcyA9IDxkeW5hbWljPltdLm9iczsKICAKICBAb3ZlcnJpZGUKICB2b2lkIG9uSW5pdCgpIHsKICAgIHN1cGVyLm9uSW5pdCgpOwogICAgZmV0Y2hEYXRhKCk7CiAgfQogIAogIEZ1dHVyZTx2b2lkPiBmZXRjaERhdGEoKSBhc3luYyB7CiAgICBpc0xvYWRpbmcudmFsdWUgPSB0cnVlOwogICAgZXJyb3JNZXNzYWdlLnZhbHVlID0gbnVsbDsKICAgIAogICAgdHJ5IHsKICAgICAgLy8gVE9ETzogSW1wbGVtZW50IEFQSSBjYWxsIG9yIGRhdGEgZmV0Y2gKICAgICAgLy8gRXhhbXBsZTogZmluYWwgcmVzdWx0ID0gYXdhaXQgc2VydmljZS5nZXRJdGVtcygpOwogICAgICBpdGVtcy5jbGVhcigpOwogICAgICAvLyBpdGVtcy5hZGRBbGwocmVzdWx0KTsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgZXJyb3JNZXNzYWdlLnZhbHVlID0gZS50b1N0cmluZygpOwogICAgfSBmaW5hbGx5IHsKICAgICAgaXNMb2FkaW5nLnZhbHVlID0gZmFsc2U7CiAgICB9CiAgfQogIAogIEZ1dHVyZTx2b2lkPiBjcmVhdGVJdGVtKGR5bmFtaWMgaXRlbSkgYXN5bmMgewogICAgaXNMb2FkaW5nLnZhbHVlID0gdHJ1ZTsKICAgIGVycm9yTWVzc2FnZS52YWx1ZSA9IG51bGw7CiAgICAKICAgIHRyeSB7CiAgICAgIC8vIFRPRE86IEltcGxlbWVudCBjcmVhdGUgaXRlbQogICAgICAvLyBFeGFtcGxlOiBhd2FpdCBzZXJ2aWNlLmNyZWF0ZUl0ZW0oaXRlbSk7CiAgICAgIC8vIGl0ZW1zLmFkZChpdGVtKTsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgZXJyb3JNZXNzYWdlLnZhbHVlID0gZS50b1N0cmluZygpOwogICAgfSBmaW5hbGx5IHsKICAgICAgaXNMb2FkaW5nLnZhbHVlID0gZmFsc2U7CiAgICB9CiAgfQogIAogIEZ1dHVyZTx2b2lkPiB1cGRhdGVJdGVtKFN0cmluZyBpZCwgZHluYW1pYyBpdGVtKSBhc3luYyB7CiAgICBpc0xvYWRpbmcudmFsdWUgPSB0cnVlOwogICAgZXJyb3JNZXNzYWdlLnZhbHVlID0gbnVsbDsKICAgIAogICAgdHJ5IHsKICAgICAgLy8gVE9ETzogSW1wbGVtZW50IHVwZGF0ZSBpdGVtCiAgICAgIC8vIEV4YW1wbGU6IGF3YWl0IHNlcnZpY2UudXBkYXRlSXRlbShpZCwgaXRlbSk7CiAgICAgIC8vIFVwZGF0ZSBpdGVtIGluIGl0ZW1zIGxpc3QKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgZXJyb3JNZXNzYWdlLnZhbHVlID0gZS50b1N0cmluZygpOwogICAgfSBmaW5hbGx5IHsKICAgICAgaXNMb2FkaW5nLnZhbHVlID0gZmFsc2U7CiAgICB9CiAgfQogIAogIEZ1dHVyZTx2b2lkPiBkZWxldGVJdGVtKFN0cmluZyBpZCkgYXN5bmMgewogICAgaXNMb2FkaW5nLnZhbHVlID0gdHJ1ZTsKICAgIGVycm9yTWVzc2FnZS52YWx1ZSA9IG51bGw7CiAgICAKICAgIHRyeSB7CiAgICAgIC8vIFRPRE86IEltcGxlbWVudCBkZWxldGUgaXRlbQogICAgICAvLyBFeGFtcGxlOiBhd2FpdCBzZXJ2aWNlLmRlbGV0ZUl0ZW0oaWQpOwogICAgICAvLyBSZW1vdmUgaXRlbSBmcm9tIGl0ZW1zIGxpc3QKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgZXJyb3JNZXNzYWdlLnZhbHVlID0gZS50b1N0cmluZygpOwogICAgfSBmaW5hbGx5IHsKICAgICAgaXNMb2FkaW5nLnZhbHVlID0gZmFsc2U7CiAgICB9CiAgfQp9CicnJywKICAgICAgY29udGV4dCk7Cn0KCnZvaWQgY3JlYXRlTW9iWEZpbGVzKEhvb2tDb250ZXh0IGNvbnRleHQsIFN0cmluZyBwcm9qZWN0TmFtZSwgU3RyaW5nIG1vYnhQYXRoLAogICAgU3RyaW5nIGZlYXR1cmVOYW1lKSB7CiAgLy8gQ3JlYXRlIHRoZSBNb2JYIGRpcmVjdG9yeSBpZiBpdCBkb2Vzbid0IGV4aXN0CiAgZmluYWwgbW9ieERpciA9IERpcmVjdG9yeSgnJHByb2plY3ROYW1lLyRtb2J4UGF0aCcpOwogIGlmICghbW9ieERpci5leGlzdHNTeW5jKCkpIHsKICAgIG1vYnhEaXIuY3JlYXRlU3luYyhyZWN1cnNpdmU6IHRydWUpOwogICAgY29udGV4dC5sb2dnZXIuaW5mbygnQ3JlYXRlZCBNb2JYIGRpcmVjdG9yeTogJG1vYnhQYXRoJyk7CiAgfQoKICAvLyBDcmVhdGUgTW9iWCBzdG9yZSBmaWxlCiAgY3JlYXRlRmlsZSgKICAgICAgJyRwcm9qZWN0TmFtZS8kbW9ieFBhdGgvJHtmZWF0dXJlTmFtZX1fc3RvcmUuZGFydCcsCiAgICAgICcnJwovLyAke3RvQ2xhc3NOYW1lKGZlYXR1cmVOYW1lKX1TdG9yZQovLyBHZW5lcmF0ZWQgYnkgTWFzb24KaW1wb3J0ICdwYWNrYWdlOm1vYngvbW9ieC5kYXJ0JzsKCi8vIEluY2x1ZGUgZ2VuZXJhdGVkIGZpbGUKcGFydCAnJHtmZWF0dXJlTmFtZX1fc3RvcmUuZy5kYXJ0JzsKCi8vIFRoaXMgaXMgdGhlIGNsYXNzIHVzZWQgYnkgcmVzdCBvZiB0aGUgY29kZWJhc2UKY2xhc3MgJHt0b0NsYXNzTmFtZShmZWF0dXJlTmFtZSl9U3RvcmUgPSBfJHt0b0NsYXNzTmFtZShmZWF0dXJlTmFtZSl9U3RvcmUgd2l0aCBfXCQke3RvQ2xhc3NOYW1lKGZlYXR1cmVOYW1lKX1TdG9yZTsKCi8vIFRoZSBzdG9yZSBjbGFzcwphYnN0cmFjdCBjbGFzcyBfJHt0b0NsYXNzTmFtZShmZWF0dXJlTmFtZSl9U3RvcmUgd2l0aCBTdG9yZSB7CiAgQG9ic2VydmFibGUKICBib29sIGlzTG9hZGluZyA9IGZhbHNlOwoKICBAb2JzZXJ2YWJsZQogIFN0cmluZz8gZXJyb3JNZXNzYWdlOwogIAogIEBvYnNlcnZhYmxlCiAgT2JzZXJ2YWJsZUxpc3Q8ZHluYW1pYz4gaXRlbXMgPSBPYnNlcnZhYmxlTGlzdDxkeW5hbWljPigpOwogIAogIEBhY3Rpb24KICBGdXR1cmU8dm9pZD4gZmV0Y2hEYXRhKCkgYXN5bmMgewogICAgaXNMb2FkaW5nID0gdHJ1ZTsKICAgIGVycm9yTWVzc2FnZSA9IG51bGw7CiAgICAKICAgIHRyeSB7CiAgICAgIC8vIFRPRE86IEltcGxlbWVudCBBUEkgY2FsbCBvciBkYXRhIGZldGNoCiAgICAgIC8vIEV4YW1wbGU6IGZpbmFsIHJlc3VsdCA9IGF3YWl0IHNlcnZpY2UuZ2V0SXRlbXMoKTsKICAgICAgaXRlbXMuY2xlYXIoKTsKICAgICAgLy8gaXRlbXMuYWRkQWxsKHJlc3VsdCk7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIGVycm9yTWVzc2FnZSA9IGUudG9TdHJpbmcoKTsKICAgIH0gZmluYWxseSB7CiAgICAgIGlzTG9hZGluZyA9IGZhbHNlOwogICAgfQogIH0KICAKICBAYWN0aW9uCiAgRnV0dXJlPHZvaWQ+IGNyZWF0ZUl0ZW0oZHluYW1pYyBpdGVtKSBhc3luYyB7CiAgICBpc0xvYWRpbmcgPSB0cnVlOwogICAgZXJyb3JNZXNzYWdlID0gbnVsbDsKICAgIAogICAgdHJ5IHsKICAgICAgLy8gVE9ETzogSW1wbGVtZW50IGNyZWF0ZSBpdGVtCiAgICAgIC8vIEV4YW1wbGU6IGF3YWl0IHNlcnZpY2UuY3JlYXRlSXRlbShpdGVtKTsKICAgICAgLy8gaXRlbXMuYWRkKGl0ZW0pOwogICAgfSBjYXRjaCAoZSkgewogICAgICBlcnJvck1lc3NhZ2UgPSBlLnRvU3RyaW5nKCk7CiAgICB9IGZpbmFsbHkgewogICAgICBpc0xvYWRpbmcgPSBmYWxzZTsKICAgIH0KICB9CiAgCiAgQGFjdGlvbgogIEZ1dHVyZTx2b2lkPiB1cGRhdGVJdGVtKFN0cmluZyBpZCwgZHluYW1pYyBpdGVtKSBhc3luYyB7CiAgICBpc0xvYWRpbmcgPSB0cnVlOwogICAgZXJyb3JNZXNzYWdlID0gbnVsbDsKICAgIAogICAgdHJ5IHsKICAgICAgLy8gVE9ETzogSW1wbGVtZW50IHVwZGF0ZSBpdGVtCiAgICAgIC8vIEV4YW1wbGU6IGF3YWl0IHNlcnZpY2UudXBkYXRlSXRlbShpZCwgaXRlbSk7CiAgICAgIC8vIFVwZGF0ZSBpdGVtIGluIGl0ZW1zIGxpc3QKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgZXJyb3JNZXNzYWdlID0gZS50b1N0cmluZygpOwogICAgfSBmaW5hbGx5IHsKICAgICAgaXNMb2FkaW5nID0gZmFsc2U7CiAgICB9CiAgfQogIAogIEBhY3Rpb24KICBGdXR1cmU8dm9pZD4gZGVsZXRlSXRlbShTdHJpbmcgaWQpIGFzeW5jIHsKICAgIGlzTG9hZGluZyA9IHRydWU7CiAgICBlcnJvck1lc3NhZ2UgPSBudWxsOwogICAgCiAgICB0cnkgewogICAgICAvLyBUT0RPOiBJbXBsZW1lbnQgZGVsZXRlIGl0ZW0KICAgICAgLy8gRXhhbXBsZTogYXdhaXQgc2VydmljZS5kZWxldGVJdGVtKGlkKTsKICAgICAgLy8gUmVtb3ZlIGl0ZW0gZnJvbSBpdGVtcyBsaXN0CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIGVycm9yTWVzc2FnZSA9IGUudG9TdHJpbmcoKTsKICAgIH0gZmluYWxseSB7CiAgICAgIGlzTG9hZGluZyA9IGZhbHNlOwogICAgfQogIH0KfQonJycsCiAgICAgIGNvbnRleHQpOwp9Cgp2b2lkIGNyZWF0ZVJlZHV4RmlsZXMoSG9va0NvbnRleHQgY29udGV4dCwgU3RyaW5nIHByb2plY3ROYW1lLCBTdHJpbmcgcmVkdXhQYXRoLAogICAgU3RyaW5nIGZlYXR1cmVOYW1lKSB7CiAgLy8gQ3JlYXRlIHRoZSBSZWR1eCBkaXJlY3RvcnkgYW5kIHN1YmRpcmVjdG9yaWVzIGlmIHRoZXkgZG9uJ3QgZXhpc3QKICBmaW5hbCByZWR1eERpcnMgPSBbCiAgICAnJHJlZHV4UGF0aCcsCiAgICAnJHJlZHV4UGF0aC9hY3Rpb25zJywKICAgICckcmVkdXhQYXRoL3JlZHVjZXJzJywKICAgICckcmVkdXhQYXRoL21pZGRsZXdhcmUnLAogICAgJyRyZWR1eFBhdGgvc3RhdGUnLAogIF07CgogIGZvciAoZmluYWwgZGlyIGluIHJlZHV4RGlycykgewogICAgZmluYWwgZGlyZWN0b3J5ID0gRGlyZWN0b3J5KCckcHJvamVjdE5hbWUvJGRpcicpOwogICAgaWYgKCFkaXJlY3RvcnkuZXhpc3RzU3luYygpKSB7CiAgICAgIGRpcmVjdG9yeS5jcmVhdGVTeW5jKHJlY3Vyc2l2ZTogdHJ1ZSk7CiAgICAgIGNvbnRleHQubG9nZ2VyLmluZm8oJ0NyZWF0ZWQgUmVkdXggZGlyZWN0b3J5OiAkZGlyJyk7CiAgICB9CiAgfQoKICAvLyBDcmVhdGUgUmVkdXggYWN0aW9uIGZpbGUKICBjcmVhdGVGaWxlKAogICAgICAnJHByb2plY3ROYW1lLyRyZWR1eFBhdGgvYWN0aW9ucy8ke2ZlYXR1cmVOYW1lfV9hY3Rpb25zLmRhcnQnLAogICAgICAnJycKLy8gJHt0b0NsYXNzTmFtZShmZWF0dXJlTmFtZSl9QWN0aW9ucwovLyBHZW5lcmF0ZWQgYnkgTWFzb24KCmNsYXNzICR7dG9DbGFzc05hbWUoZmVhdHVyZU5hbWUpfUZldGNoQWN0aW9uIHsKICBjb25zdCAke3RvQ2xhc3NOYW1lKGZlYXR1cmVOYW1lKX1GZXRjaEFjdGlvbigpOwp9CgpjbGFzcyAke3RvQ2xhc3NOYW1lKGZlYXR1cmVOYW1lKX1GZXRjaFN1Y2Nlc3NBY3Rpb24gewogIGZpbmFsIExpc3Q8ZHluYW1pYz4gaXRlbXM7CiAgY29uc3QgJHt0b0NsYXNzTmFtZShmZWF0dXJlTmFtZSl9RmV0Y2hTdWNjZXNzQWN0aW9uKHRoaXMuaXRlbXMpOwp9CgpjbGFzcyAke3RvQ2xhc3NOYW1lKGZlYXR1cmVOYW1lKX1GZXRjaEZhaWx1cmVBY3Rpb24gewogIGZpbmFsIFN0cmluZyBlcnJvcjsKICBjb25zdCAke3RvQ2xhc3NOYW1lKGZlYXR1cmVOYW1lKX1GZXRjaEZhaWx1cmVBY3Rpb24odGhpcy5lcnJvcik7Cn0KCmNsYXNzICR7dG9DbGFzc05hbWUoZmVhdHVyZU5hbWUpfUNyZWF0ZUFjdGlvbiB7CiAgZmluYWwgZHluYW1pYyBpdGVtOwogIGNvbnN0ICR7dG9DbGFzc05hbWUoZmVhdHVyZU5hbWUpfUNyZWF0ZUFjdGlvbih0aGlzLml0ZW0pOwp9CgpjbGFzcyAke3RvQ2xhc3NOYW1lKGZlYXR1cmVOYW1lKX1VcGRhdGVBY3Rpb24gewogIGZpbmFsIFN0cmluZyBpZDsKICBmaW5hbCBkeW5hbWljIGl0ZW07CiAgY29uc3QgJHt0b0NsYXNzTmFtZShmZWF0dXJlTmFtZSl9VXBkYXRlQWN0aW9uKHRoaXMuaWQsIHRoaXMuaXRlbSk7Cn0KCmNsYXNzICR7dG9DbGFzc05hbWUoZmVhdHVyZU5hbWUpfURlbGV0ZUFjdGlvbiB7CiAgZmluYWwgU3RyaW5nIGlkOwogIGNvbnN0ICR7dG9DbGFzc05hbWUoZmVhdHVyZU5hbWUpfURlbGV0ZUFjdGlvbih0aGlzLmlkKTsKfQonJycsCiAgICAgIGNvbnRleHQpOwoKICAvLyBDcmVhdGUgUmVkdXggc3RhdGUgZmlsZQogIGNyZWF0ZUZpbGUoCiAgICAgICckcHJvamVjdE5hbWUvJHJlZHV4UGF0aC9zdGF0ZS8ke2ZlYXR1cmVOYW1lfV9zdGF0ZS5kYXJ0JywKICAgICAgJycnCi8vICR7dG9DbGFzc05hbWUoZmVhdHVyZU5hbWUpfVN0YXRlCi8vIEdlbmVyYXRlZCBieSBNYXNvbgoKY2xhc3MgJHt0b0NsYXNzTmFtZShmZWF0dXJlTmFtZSl9U3RhdGUgewogIGZpbmFsIGJvb2wgaXNMb2FkaW5nOwogIGZpbmFsIFN0cmluZz8gZXJyb3JNZXNzYWdlOwogIGZpbmFsIExpc3Q8ZHluYW1pYz4gaXRlbXM7CiAgCiAgY29uc3QgJHt0b0NsYXNzTmFtZShmZWF0dXJlTmFtZSl9U3RhdGUoewogICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZSwKICAgIHRoaXMuZXJyb3JNZXNzYWdlLAogICAgdGhpcy5pdGVtcyA9IGNvbnN0IFtdLAogIH0pOwogIAogICR7dG9DbGFzc05hbWUoZmVhdHVyZU5hbWUpfVN0YXRlIGNvcHlXaXRoKHsKICAgIGJvb2w/IGlzTG9hZGluZywKICAgIFN0cmluZz8gZXJyb3JNZXNzYWdlLAogICAgTGlzdDxkeW5hbWljPj8gaXRlbXMsCiAgfSkgewogICAgcmV0dXJuICR7dG9DbGFzc05hbWUoZmVhdHVyZU5hbWUpfVN0YXRlKAogICAgICBpc0xvYWRpbmc6IGlzTG9hZGluZyA/PyB0aGlzLmlzTG9hZGluZywKICAgICAgZXJyb3JNZXNzYWdlOiBlcnJvck1lc3NhZ2UgPz8gdGhpcy5lcnJvck1lc3NhZ2UsCiAgICAgIGl0ZW1zOiBpdGVtcyA/PyB0aGlzLml0ZW1zLAogICAgKTsKICB9CiAgCiAgZmFjdG9yeSAke3RvQ2xhc3NOYW1lKGZlYXR1cmVOYW1lKX1TdGF0ZS5pbml0aWFsKCkgewogICAgcmV0dXJuIGNvbnN0ICR7dG9DbGFzc05hbWUoZmVhdHVyZU5hbWUpfVN0YXRlKCk7CiAgfQp9CicnJywKICAgICAgY29udGV4dCk7CgogIC8vIENyZWF0ZSBSZWR1eCByZWR1Y2VyIGZpbGUKICBjcmVhdGVGaWxlKAogICAgICAnJHByb2plY3ROYW1lLyRyZWR1eFBhdGgvcmVkdWNlcnMvJHtmZWF0dXJlTmFtZX1fcmVkdWNlci5kYXJ0JywKICAgICAgJycnCi8vICR7dG9DbGFzc05hbWUoZmVhdHVyZU5hbWUpfVJlZHVjZXIKLy8gR2VuZXJhdGVkIGJ5IE1hc29uCmltcG9ydCAnLi4vYWN0aW9ucy8ke2ZlYXR1cmVOYW1lfV9hY3Rpb25zLmRhcnQnOwppbXBvcnQgJy4uL3N0YXRlLyR7ZmVhdHVyZU5hbWV9X3N0YXRlLmRhcnQnOwoKJHt0b0NsYXNzTmFtZShmZWF0dXJlTmFtZSl9U3RhdGUgJHtmZWF0dXJlTmFtZX1SZWR1Y2VyKCR7dG9DbGFzc05hbWUoZmVhdHVyZU5hbWUpfVN0YXRlIHN0YXRlLCBkeW5hbWljIGFjdGlvbikgewogIGlmIChhY3Rpb24gaXMgJHt0b0NsYXNzTmFtZShmZWF0dXJlTmFtZSl9RmV0Y2hBY3Rpb24pIHsKICAgIHJldHVybiBzdGF0ZS5jb3B5V2l0aCgKICAgICAgaXNMb2FkaW5nOiB0cnVlLAogICAgICBlcnJvck1lc3NhZ2U6IG51bGwsCiAgICApOwogIH0gZWxzZSBpZiAoYWN0aW9uIGlzICR7dG9DbGFzc05hbWUoZmVhdHVyZU5hbWUpfUZldGNoU3VjY2Vzc0FjdGlvbikgewogICAgcmV0dXJuIHN0YXRlLmNvcHlXaXRoKAogICAgICBpc0xvYWRpbmc6IGZhbHNlLAogICAgICBpdGVtczogYWN0aW9uLml0ZW1zLAogICAgKTsKICB9IGVsc2UgaWYgKGFjdGlvbiBpcyAke3RvQ2xhc3NOYW1lKGZlYXR1cmVOYW1lKX1GZXRjaEZhaWx1cmVBY3Rpb24pIHsKICAgIHJldHVybiBzdGF0ZS5jb3B5V2l0aCgKICAgICAgaXNMb2FkaW5nOiBmYWxzZSwKICAgICAgZXJyb3JNZXNzYWdlOiBhY3Rpb24uZXJyb3IsCiAgICApOwogIH0KICAKICByZXR1cm4gc3RhdGU7Cn0KJycnLAogICAgICBjb250ZXh0KTsKCiAgLy8gQ3JlYXRlIFJlZHV4IG1pZGRsZXdhcmUgZmlsZQogIGNyZWF0ZUZpbGUoCiAgICAgICckcHJvamVjdE5hbWUvJHJlZHV4UGF0aC9taWRkbGV3YXJlLyR7ZmVhdHVyZU5hbWV9X21pZGRsZXdhcmUuZGFydCcsCiAgICAgICcnJwovLyAke3RvQ2xhc3NOYW1lKGZlYXR1cmVOYW1lKX1NaWRkbGV3YXJlCi8vIEdlbmVyYXRlZCBieSBNYXNvbgppbXBvcnQgJ3BhY2thZ2U6cmVkdXgvcmVkdXguZGFydCc7CmltcG9ydCAnLi4vYWN0aW9ucy8ke2ZlYXR1cmVOYW1lfV9hY3Rpb25zLmRhcnQnOwppbXBvcnQgJy4uL3N0YXRlLyR7ZmVhdHVyZU5hbWV9X3N0YXRlLmRhcnQnOwoKTGlzdDxNaWRkbGV3YXJlPCR7dG9DbGFzc05hbWUoZmVhdHVyZU5hbWUpfVN0YXRlPj4gY3JlYXRlJHt0b0NsYXNzTmFtZShmZWF0dXJlTmFtZSl9TWlkZGxld2FyZSgpIHsKICByZXR1cm4gWwogICAgVHlwZWRNaWRkbGV3YXJlPCR7dG9DbGFzc05hbWUoZmVhdHVyZU5hbWUpfVN0YXRlLCAke3RvQ2xhc3NOYW1lKGZlYXR1cmVOYW1lKX1GZXRjaEFjdGlvbj4oX29uRmV0Y2gpLAogICAgVHlwZWRNaWRkbGV3YXJlPCR7dG9DbGFzc05hbWUoZmVhdHVyZU5hbWUpfVN0YXRlLCAke3RvQ2xhc3NOYW1lKGZlYXR1cmVOYW1lKX1DcmVhdGVBY3Rpb24+KF9vbkNyZWF0ZSksCiAgICBUeXBlZE1pZGRsZXdhcmU8JHt0b0NsYXNzTmFtZShmZWF0dXJlTmFtZSl9U3RhdGUsICR7dG9DbGFzc05hbWUoZmVhdHVyZU5hbWUpfVVwZGF0ZUFjdGlvbj4oX29uVXBkYXRlKSwKICAgIFR5cGVkTWlkZGxld2FyZTwke3RvQ2xhc3NOYW1lKGZlYXR1cmVOYW1lKX1TdGF0ZSwgJHt0b0NsYXNzTmFtZShmZWF0dXJlTmFtZSl9RGVsZXRlQWN0aW9uPihfb25EZWxldGUpLAogIF07Cn0KCnZvaWQgX29uRmV0Y2goU3RvcmU8JHt0b0NsYXNzTmFtZShmZWF0dXJlTmFtZSl9U3RhdGU+IHN0b3JlLCAke3RvQ2xhc3NOYW1lKGZlYXR1cmVOYW1lKX1GZXRjaEFjdGlvbiBhY3Rpb24sIE5leHREaXNwYXRjaGVyIG5leHQpIGFzeW5jIHsKICBuZXh0KGFjdGlvbik7CiAgCiAgdHJ5IHsKICAgIC8vIFRPRE86IEltcGxlbWVudCBBUEkgY2FsbCBvciBkYXRhIGZldGNoCiAgICAvLyBFeGFtcGxlOiBmaW5hbCBpdGVtcyA9IGF3YWl0IHNlcnZpY2UuZ2V0SXRlbXMoKTsKICAgIGZpbmFsIGl0ZW1zID0gW107CiAgICBzdG9yZS5kaXNwYXRjaCgke3RvQ2xhc3NOYW1lKGZlYXR1cmVOYW1lKX1GZXRjaFN1Y2Nlc3NBY3Rpb24oaXRlbXMpKTsKICB9IGNhdGNoIChlKSB7CiAgICBzdG9yZS5kaXNwYXRjaCgke3RvQ2xhc3NOYW1lKGZlYXR1cmVOYW1lKX1GZXRjaEZhaWx1cmVBY3Rpb24oZS50b1N0cmluZygpKSk7CiAgfQp9Cgp2b2lkIF9vbkNyZWF0ZShTdG9yZTwke3RvQ2xhc3NOYW1lKGZlYXR1cmVOYW1lKX1TdGF0ZT4gc3RvcmUsICR7dG9DbGFzc05hbWUoZmVhdHVyZU5hbWUpfUNyZWF0ZUFjdGlvbiBhY3Rpb24sIE5leHREaXNwYXRjaGVyIG5leHQpIGFzeW5jIHsKICBuZXh0KGFjdGlvbik7CiAgCiAgdHJ5IHsKICAgIC8vIFRPRE86IEltcGxlbWVudCBjcmVhdGUgaXRlbQogICAgLy8gRXhhbXBsZTogYXdhaXQgc2VydmljZS5jcmVhdGVJdGVtKGFjdGlvbi5pdGVtKTsKICAgIHN0b3JlLmRpc3BhdGNoKCR7dG9DbGFzc05hbWUoZmVhdHVyZU5hbWUpfUZldGNoQWN0aW9uKCkpOwogIH0gY2F0Y2ggKGUpIHsKICAgIHN0b3JlLmRpc3BhdGNoKCR7dG9DbGFzc05hbWUoZmVhdHVyZU5hbWUpfUZldGNoRmFpbHVyZUFjdGlvbihlLnRvU3RyaW5nKCkpKTsKICB9Cn0KCnZvaWQgX29uVXBkYXRlKFN0b3JlPCR7dG9DbGFzc05hbWUoZmVhdHVyZU5hbWUpfVN0YXRlPiBzdG9yZSwgJHt0b0NsYXNzTmFtZShmZWF0dXJlTmFtZSl9VXBkYXRlQWN0aW9uIGFjdGlvbiwgTmV4dERpc3BhdGNoZXIgbmV4dCkgYXN5bmMgewogIG5leHQoYWN0aW9uKTsKICAKICB0cnkgewogICAgLy8gVE9ETzogSW1wbGVtZW50IHVwZGF0ZSBpdGVtCiAgICAvLyBFeGFtcGxlOiBhd2FpdCBzZXJ2aWNlLnVwZGF0ZUl0ZW0oYWN0aW9uLmlkLCBhY3Rpb24uaXRlbSk7CiAgICBzdG9yZS5kaXNwYXRjaCgke3RvQ2xhc3NOYW1lKGZlYXR1cmVOYW1lKX1GZXRjaEFjdGlvbigpKTsKICB9IGNhdGNoIChlKSB7CiAgICBzdG9yZS5kaXNwYXRjaCgke3RvQ2xhc3NOYW1lKGZlYXR1cmVOYW1lKX1GZXRjaEZhaWx1cmVBY3Rpb24oZS50b1N0cmluZygpKSk7CiAgfQp9Cgp2b2lkIF9vbkRlbGV0ZShTdG9yZTwke3RvQ2xhc3NOYW1lKGZlYXR1cmVOYW1lKX1TdGF0ZT4gc3RvcmUsICR7dG9DbGFzc05hbWUoZmVhdHVyZU5hbWUpfURlbGV0ZUFjdGlvbiBhY3Rpb24sIE5leHREaXNwYXRjaGVyIG5leHQpIGFzeW5jIHsKICBuZXh0KGFjdGlvbik7CiAgCiAgdHJ5IHsKICAgIC8vIFRPRE86IEltcGxlbWVudCBkZWxldGUgaXRlbQogICAgLy8gRXhhbXBsZTogYXdhaXQgc2VydmljZS5kZWxldGVJdGVtKGFjdGlvbi5pZCk7CiAgICBzdG9yZS5kaXNwYXRjaCgke3RvQ2xhc3NOYW1lKGZlYXR1cmVOYW1lKX1GZXRjaEFjdGlvbigpKTsKICB9IGNhdGNoIChlKSB7CiAgICBzdG9yZS5kaXNwYXRjaCgke3RvQ2xhc3NOYW1lKGZlYXR1cmVOYW1lKX1GZXRjaEZhaWx1cmVBY3Rpb24oZS50b1N0cmluZygpKSk7CiAgfQp9CicnJywKICAgICAgY29udGV4dCk7Cn0KCi8vIFRlbXBsYXRlIGdlbmVyYXRvciBoZWxwZXIgZnVuY3Rpb25zClN0cmluZyBnZW5lcmF0ZVByb3ZpZGVyVmlld01vZGVsKFN0cmluZyBmZWF0dXJlTmFtZSkgewogIGZpbmFsIGNsYXNzTmFtZSA9IHRvQ2xhc3NOYW1lKGZlYXR1cmVOYW1lKTsKICByZXR1cm4gJycnCi8vICR7Y2xhc3NOYW1lfVZpZXdNb2RlbCB3aXRoIFByb3ZpZGVyCi8vIEdlbmVyYXRlZCBieSBNYXNvbgppbXBvcnQgJ3BhY2thZ2U6Zmx1dHRlci9mb3VuZGF0aW9uLmRhcnQnOwppbXBvcnQgJy4uL3NlcnZpY2VzLyR7ZmVhdHVyZU5hbWV9X3NlcnZpY2UuZGFydCc7CgpjbGFzcyAke2NsYXNzTmFtZX1WaWV3TW9kZWwgZXh0ZW5kcyBDaGFuZ2VOb3RpZmllciB7CiAgZmluYWwgJHtjbGFzc05hbWV9U2VydmljZSBfc2VydmljZSA9ICR7Y2xhc3NOYW1lfVNlcnZpY2UoKTsKICAKICBib29sIF9pc0xvYWRpbmcgPSBmYWxzZTsKICBTdHJpbmc/IF9lcnJvck1lc3NhZ2U7CiAgTGlzdDxkeW5hbWljPiBfaXRlbXMgPSBbXTsKICAKICBib29sIGdldCBpc0xvYWRpbmcgPT4gX2lzTG9hZGluZzsKICBTdHJpbmc/IGdldCBlcnJvck1lc3NhZ2UgPT4gX2Vycm9yTWVzc2FnZTsKICBMaXN0PGR5bmFtaWM+IGdldCBpdGVtcyA9PiBfaXRlbXM7CiAgCiAgRnV0dXJlPHZvaWQ+IGZldGNoRGF0YSgpIGFzeW5jIHsKICAgIF9pc0xvYWRpbmcgPSB0cnVlOwogICAgX2Vycm9yTWVzc2FnZSA9IG51bGw7CiAgICBub3RpZnlMaXN0ZW5lcnMoKTsKICAgIAogICAgdHJ5IHsKICAgICAgLy8gVE9ETzogSW1wbGVtZW50IGRhdGEgZmV0Y2hpbmcKICAgICAgLy8gRXhhbXBsZTogX2l0ZW1zID0gYXdhaXQgX3NlcnZpY2UuZ2V0SXRlbXMoKTsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgX2Vycm9yTWVzc2FnZSA9IGUudG9TdHJpbmcoKTsKICAgIH0gZmluYWxseSB7CiAgICAgIF9pc0xvYWRpbmcgPSBmYWxzZTsKICAgICAgbm90aWZ5TGlzdGVuZXJzKCk7CiAgICB9CiAgfQp9CicnJzsKfQoKU3RyaW5nIGdlbmVyYXRlUml2ZXJwb2RWaWV3TW9kZWwoU3RyaW5nIGZlYXR1cmVOYW1lKSB7CiAgZmluYWwgY2xhc3NOYW1lID0gdG9DbGFzc05hbWUoZmVhdHVyZU5hbWUpOwogIHJldHVybiAnJycKLy8gJHtjbGFzc05hbWV9Vmlld01vZGVsIHdpdGggUml2ZXJwb2QKLy8gR2VuZXJhdGVkIGJ5IE1hc29uCmltcG9ydCAncGFja2FnZTpmbHV0dGVyX3JpdmVycG9kL2ZsdXR0ZXJfcml2ZXJwb2QuZGFydCc7CmltcG9ydCAnLi4vc2VydmljZXMvJHtmZWF0dXJlTmFtZX1fc2VydmljZS5kYXJ0JzsKCi8vIFN0YXRlIGNsYXNzCmNsYXNzICR7Y2xhc3NOYW1lfVN0YXRlIHsKICBmaW5hbCBib29sIGlzTG9hZGluZzsKICBmaW5hbCBTdHJpbmc/IGVycm9yTWVzc2FnZTsKICBmaW5hbCBMaXN0PGR5bmFtaWM+IGl0ZW1zOwogIAogIGNvbnN0ICR7Y2xhc3NOYW1lfVN0YXRlKHsKICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2UsCiAgICB0aGlzLmVycm9yTWVzc2FnZSwKICAgIHRoaXMuaXRlbXMgPSBjb25zdCBbXSwKICB9KTsKICAKICAke2NsYXNzTmFtZX1TdGF0ZSBjb3B5V2l0aCh7CiAgICBib29sPyBpc0xvYWRpbmcsCiAgICBTdHJpbmc/IGVycm9yTWVzc2FnZSwKICAgIExpc3Q8ZHluYW1pYz4/IGl0ZW1zLAogIH0pIHsKICAgIHJldHVybiAke2NsYXNzTmFtZX1TdGF0ZSgKICAgICAgaXNMb2FkaW5nOiBpc0xvYWRpbmcgPz8gdGhpcy5pc0xvYWRpbmcsCiAgICAgIGVycm9yTWVzc2FnZTogZXJyb3JNZXNzYWdlID8/IHRoaXMuZXJyb3JNZXNzYWdlLAogICAgICBpdGVtczogaXRlbXMgPz8gdGhpcy5pdGVtcywKICAgICk7CiAgfQp9CgovLyBQcm92aWRlcgpmaW5hbCAke2ZlYXR1cmVOYW1lfVByb3ZpZGVyID0gU3RhdGVOb3RpZmllclByb3ZpZGVyPCR7Y2xhc3NOYW1lfVZpZXdNb2RlbCwgJHtjbGFzc05hbWV9U3RhdGU+KChyZWYpIHsKICByZXR1cm4gJHtjbGFzc05hbWV9Vmlld01vZGVsKCk7Cn0pOwoKLy8gVmlld01vZGVsCmNsYXNzICR7Y2xhc3NOYW1lfVZpZXdNb2RlbCBleHRlbmRzIFN0YXRlTm90aWZpZXI8JHtjbGFzc05hbWV9U3RhdGU+IHsKICBmaW5hbCAke2NsYXNzTmFtZX1TZXJ2aWNlIF9zZXJ2aWNlID0gJHtjbGFzc05hbWV9U2VydmljZSgpOwogIAogICR7Y2xhc3NOYW1lfVZpZXdNb2RlbCgpIDogc3VwZXIoY29uc3QgJHtjbGFzc05hbWV9U3RhdGUoKSkgewogICAgZmV0Y2hEYXRhKCk7CiAgfQogIAogIEZ1dHVyZTx2b2lkPiBmZXRjaERhdGEoKSBhc3luYyB7CiAgICBzdGF0ZSA9IHN0YXRlLmNvcHlXaXRoKGlzTG9hZGluZzogdHJ1ZSwgZXJyb3JNZXNzYWdlOiBudWxsKTsKICAgIAogICAgdHJ5IHsKICAgICAgLy8gVE9ETzogSW1wbGVtZW50IGRhdGEgZmV0Y2hpbmcKICAgICAgLy8gRXhhbXBsZTogZmluYWwgaXRlbXMgPSBhd2FpdCBfc2VydmljZS5nZXRJdGVtcygpOwogICAgICAvLyBzdGF0ZSA9IHN0YXRlLmNvcHlXaXRoKGl0ZW1zOiBpdGVtcywgaXNMb2FkaW5nOiBmYWxzZSk7CiAgICAgIHN0YXRlID0gc3RhdGUuY29weVdpdGgoaXNMb2FkaW5nOiBmYWxzZSk7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIHN0YXRlID0gc3RhdGUuY29weVdpdGgoCiAgICAgICAgaXNMb2FkaW5nOiBmYWxzZSwKICAgICAgICBlcnJvck1lc3NhZ2U6IGUudG9TdHJpbmcoKSwKICAgICAgKTsKICAgIH0KICB9Cn0KJycnOwp9CgpTdHJpbmcgZ2VuZXJhdGVHZXRYVmlld01vZGVsKFN0cmluZyBmZWF0dXJlTmFtZSkgewogIGZpbmFsIGNsYXNzTmFtZSA9IHRvQ2xhc3NOYW1lKGZlYXR1cmVOYW1lKTsKICByZXR1cm4gJycnCi8vICR7Y2xhc3NOYW1lfVZpZXdNb2RlbCB3aXRoIEdldFgKLy8gR2VuZXJhdGVkIGJ5IE1hc29uCmltcG9ydCAncGFja2FnZTpnZXQvZ2V0LmRhcnQnOwppbXBvcnQgJy4uL3NlcnZpY2VzLyR7ZmVhdHVyZU5hbWV9X3NlcnZpY2UuZGFydCc7CgpjbGFzcyAke2NsYXNzTmFtZX1WaWV3TW9kZWwgZXh0ZW5kcyBHZXR4Q29udHJvbGxlciB7CiAgZmluYWwgJHtjbGFzc05hbWV9U2VydmljZSBfc2VydmljZSA9ICR7Y2xhc3NOYW1lfVNlcnZpY2UoKTsKICAKICBmaW5hbCBSeEJvb2wgaXNMb2FkaW5nID0gZmFsc2Uub2JzOwogIGZpbmFsIFJ4PFN0cmluZz8+IGVycm9yTWVzc2FnZSA9IFJ4PFN0cmluZz8+KG51bGwpOwogIGZpbmFsIFJ4TGlzdDxkeW5hbWljPiBpdGVtcyA9IDxkeW5hbWljPltdLm9iczsKICAKICBAb3ZlcnJpZGUKICB2b2lkIG9uSW5pdCgpIHsKICAgIHN1cGVyLm9uSW5pdCgpOwogICAgZmV0Y2hEYXRhKCk7CiAgfQogIAogIEZ1dHVyZTx2b2lkPiBmZXRjaERhdGEoKSBhc3luYyB7CiAgICBpc0xvYWRpbmcudmFsdWUgPSB0cnVlOwogICAgZXJyb3JNZXNzYWdlLnZhbHVlID0gbnVsbDsKICAgIAogICAgdHJ5IHsKICAgICAgLy8gVE9ETzogSW1wbGVtZW50IGRhdGEgZmV0Y2hpbmcKICAgICAgLy8gRXhhbXBsZTogZmluYWwgcmVzdWx0ID0gYXdhaXQgX3NlcnZpY2UuZ2V0SXRlbXMoKTsKICAgICAgLy8gaXRlbXMudmFsdWUgPSByZXN1bHQ7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIGVycm9yTWVzc2FnZS52YWx1ZSA9IGUudG9TdHJpbmcoKTsKICAgIH0gZmluYWxseSB7CiAgICAgIGlzTG9hZGluZy52YWx1ZSA9IGZhbHNlOwogICAgfQogIH0KfQonJyc7Cn0KClN0cmluZyBnZW5lcmF0ZU1vYlhWaWV3TW9kZWwoU3RyaW5nIGZlYXR1cmVOYW1lKSB7CiAgZmluYWwgY2xhc3NOYW1lID0gdG9DbGFzc05hbWUoZmVhdHVyZU5hbWUpOwogIHJldHVybiAnJycKLy8gJHtjbGFzc05hbWV9Vmlld01vZGVsIHdpdGggTW9iWAovLyBHZW5lcmF0ZWQgYnkgTWFzb24KaW1wb3J0ICdwYWNrYWdlOm1vYngvbW9ieC5kYXJ0JzsKaW1wb3J0ICcuLi9zZXJ2aWNlcy8ke2ZlYXR1cmVOYW1lfV9zZXJ2aWNlLmRhcnQnOwoKLy8gSW5jbHVkZSBnZW5lcmF0ZWQgZmlsZQpwYXJ0ICcke2ZlYXR1cmVOYW1lfV92aWV3bW9kZWwuZy5kYXJ0JzsKCi8vIFRoaXMgaXMgdGhlIGNsYXNzIHVzZWQgYnkgcmVzdCBvZiB0aGUgY29kZWJhc2UKY2xhc3MgJHtjbGFzc05hbWV9Vmlld01vZGVsID0gXyR7Y2xhc3NOYW1lfVZpZXdNb2RlbCB3aXRoIF9cJCR7Y2xhc3NOYW1lfVZpZXdNb2RlbDsKCi8vIFRoZSBzdG9yZSBjbGFzcwphYnN0cmFjdCBjbGFzcyBfJHtjbGFzc05hbWV9Vmlld01vZGVsIHdpdGggU3RvcmUgewogIGZpbmFsICR7Y2xhc3NOYW1lfVNlcnZpY2UgX3NlcnZpY2UgPSAke2NsYXNzTmFtZX1TZXJ2aWNlKCk7CiAgCiAgQG9ic2VydmFibGUKICBib29sIGlzTG9hZGluZyA9IGZhbHNlOwoKICBAb2JzZXJ2YWJsZQogIFN0cmluZz8gZXJyb3JNZXNzYWdlOwogIAogIEBvYnNlcnZhYmxlCiAgT2JzZXJ2YWJsZUxpc3Q8ZHluYW1pYz4gaXRlbXMgPSBPYnNlcnZhYmxlTGlzdDxkeW5hbWljPigpOwogIAogIF8ke2NsYXNzTmFtZX1WaWV3TW9kZWwoKSB7CiAgICBmZXRjaERhdGEoKTsKICB9CiAgCiAgQGFjdGlvbgogIEZ1dHVyZTx2b2lkPiBmZXRjaERhdGEoKSBhc3luYyB7CiAgICBpc0xvYWRpbmcgPSB0cnVlOwogICAgZXJyb3JNZXNzYWdlID0gbnVsbDsKICAgIAogICAgdHJ5IHsKICAgICAgLy8gVE9ETzogSW1wbGVtZW50IGRhdGEgZmV0Y2hpbmcKICAgICAgLy8gRXhhbXBsZTogZmluYWwgcmVzdWx0ID0gYXdhaXQgX3NlcnZpY2UuZ2V0SXRlbXMoKTsKICAgICAgLy8gaXRlbXMuY2xlYXIoKTsKICAgICAgLy8gaXRlbXMuYWRkQWxsKHJlc3VsdCk7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIGVycm9yTWVzc2FnZSA9IGUudG9TdHJpbmcoKTsKICAgIH0gZmluYWxseSB7CiAgICAgIGlzTG9hZGluZyA9IGZhbHNlOwogICAgfQogIH0KfQonJyc7Cn0KCi8vIENvbnRpbnVpbmcgZnJvbSBwcmV2aW91cyBmaWxlLi4uCgpTdHJpbmcgZ2VuZXJhdGVCYXNpY1ZpZXdNb2RlbChTdHJpbmcgZmVhdHVyZU5hbWUpIHsKICBmaW5hbCBjbGFzc05hbWUgPSB0b0NsYXNzTmFtZShmZWF0dXJlTmFtZSk7CiAgcmV0dXJuICcnJwovLyAke2NsYXNzTmFtZX1WaWV3TW9kZWwgYmFzaWMgaW1wbGVtZW50YXRpb24KLy8gR2VuZXJhdGVkIGJ5IE1hc29uCmltcG9ydCAnLi4vc2VydmljZXMvJHtmZWF0dXJlTmFtZX1fc2VydmljZS5kYXJ0JzsKCmNsYXNzICR7Y2xhc3NOYW1lfVZpZXdNb2RlbCB7CiAgZmluYWwgJHtjbGFzc05hbWV9U2VydmljZSBfc2VydmljZSA9ICR7Y2xhc3NOYW1lfVNlcnZpY2UoKTsKICAKICBib29sIGlzTG9hZGluZyA9IGZhbHNlOwogIFN0cmluZz8gZXJyb3JNZXNzYWdlOwogIExpc3Q8ZHluYW1pYz4gaXRlbXMgPSBbXTsKICAKICBGdXR1cmU8dm9pZD4gZmV0Y2hEYXRhKCkgYXN5bmMgewogICAgaXNMb2FkaW5nID0gdHJ1ZTsKICAgIAogICAgdHJ5IHsKICAgICAgLy8gVE9ETzogSW1wbGVtZW50IGRhdGEgZmV0Y2hpbmcKICAgICAgLy8gRXhhbXBsZTogaXRlbXMgPSBhd2FpdCBfc2VydmljZS5nZXRJdGVtcygpOwogICAgICBlcnJvck1lc3NhZ2UgPSBudWxsOwogICAgfSBjYXRjaCAoZSkgewogICAgICBlcnJvck1lc3NhZ2UgPSBlLnRvU3RyaW5nKCk7CiAgICB9IGZpbmFsbHkgewogICAgICBpc0xvYWRpbmcgPSBmYWxzZTsKICAgIH0KICB9Cn0KJycnOwp9CgovLyBIZWxwZXIgbWV0aG9kcyBmb3IgZ2VuZXJhdGluZyBmZWF0dXJlLXNwZWNpZmljIGZpbGVzIGZvciBkaWZmZXJlbnQgYXJjaGl0ZWN0dXJlcwoKLy8gQXV0aGVudGljYXRpb24gZmVhdHVyZSBzcGVjaWZpYyBmaWxlcwoKLy8gR2VuZXJhdGUgYXV0aGVudGljYXRpb24gZW50aXR5IGZvciBDbGVhbiBBcmNoaXRlY3R1cmUKU3RyaW5nIGdlbmVyYXRlQXV0aGVudGljYXRpb25FbnRpdHkoKSB7CiAgcmV0dXJuICcnJwovLyBVc2VyIEVudGl0eQovLyBHZW5lcmF0ZWQgYnkgTWFzb24KCmVudW0gQXV0aFN0YXR1cyB7CiAgdW5rbm93biwKICBhdXRoZW50aWNhdGVkLAogIHVuYXV0aGVudGljYXRlZCwKICB1bnZlcmlmaWVkLAp9CgpjbGFzcyBVc2VyIHsKICBmaW5hbCBTdHJpbmcgaWQ7CiAgZmluYWwgU3RyaW5nIGVtYWlsOwogIGZpbmFsIFN0cmluZz8gZGlzcGxheU5hbWU7CiAgZmluYWwgU3RyaW5nPyBwaG90b1VybDsKICBmaW5hbCBBdXRoU3RhdHVzIHN0YXR1czsKICAKICBVc2VyKHsKICAgIHJlcXVpcmVkIHRoaXMuaWQsCiAgICByZXF1aXJlZCB0aGlzLmVtYWlsLAogICAgdGhpcy5kaXNwbGF5TmFtZSwKICAgIHRoaXMucGhvdG9VcmwsCiAgICB0aGlzLnN0YXR1cyA9IEF1dGhTdGF0dXMudW5rbm93biwKICB9KTsKICAKICBVc2VyIGNvcHlXaXRoKHsKICAgIFN0cmluZz8gaWQsCiAgICBTdHJpbmc/IGVtYWlsLAogICAgU3RyaW5nPyBkaXNwbGF5TmFtZSwKICAgIFN0cmluZz8gcGhvdG9VcmwsCiAgICBBdXRoU3RhdHVzPyBzdGF0dXMsCiAgfSkgewogICAgcmV0dXJuIFVzZXIoCiAgICAgIGlkOiBpZCA/PyB0aGlzLmlkLAogICAgICBlbWFpbDogZW1haWwgPz8gdGhpcy5lbWFpbCwKICAgICAgZGlzcGxheU5hbWU6IGRpc3BsYXlOYW1lID8/IHRoaXMuZGlzcGxheU5hbWUsCiAgICAgIHBob3RvVXJsOiBwaG90b1VybCA/PyB0aGlzLnBob3RvVXJsLAogICAgICBzdGF0dXM6IHN0YXR1cyA/PyB0aGlzLnN0YXR1cywKICAgICk7CiAgfQp9CicnJzsKfQoKLy8gR2VuZXJhdGUgYXV0aGVudGljYXRpb24gcmVwb3NpdG9yeSBmb3IgQ2xlYW4gQXJjaGl0ZWN0dXJlClN0cmluZyBnZW5lcmF0ZUF1dGhlbnRpY2F0aW9uUmVwb3NpdG9yeSgpIHsKICByZXR1cm4gJycnCi8vIEF1dGhlbnRpY2F0aW9uIFJlcG9zaXRvcnkgSW50ZXJmYWNlCi8vIEdlbmVyYXRlZCBieSBNYXNvbgppbXBvcnQgJy4uL2VudGl0aWVzL3VzZXIuZGFydCc7CgphYnN0cmFjdCBjbGFzcyBBdXRoUmVwb3NpdG9yeSB7CiAgRnV0dXJlPFVzZXI+IHNpZ25JbldpdGhFbWFpbEFuZFBhc3N3b3JkKFN0cmluZyBlbWFpbCwgU3RyaW5nIHBhc3N3b3JkKTsKICBGdXR1cmU8VXNlcj4gc2lnblVwV2l0aEVtYWlsQW5kUGFzc3dvcmQoU3RyaW5nIGVtYWlsLCBTdHJpbmcgcGFzc3dvcmQpOwogIEZ1dHVyZTx2b2lkPiBzaWduT3V0KCk7CiAgRnV0dXJlPFVzZXI/PiBnZXRDdXJyZW50VXNlcigpOwogIEZ1dHVyZTxib29sPiBpc1NpZ25lZEluKCk7CiAgRnV0dXJlPHZvaWQ+IHNlbmRQYXNzd29yZFJlc2V0RW1haWwoU3RyaW5nIGVtYWlsKTsKfQonJyc7Cn0KCi8vIEdlbmVyYXRlIGF1dGhlbnRpY2F0aW9uIHVzZSBjYXNlcyBmb3IgQ2xlYW4gQXJjaGl0ZWN0dXJlClN0cmluZyBnZW5lcmF0ZUF1dGhlbnRpY2F0aW9uVXNlQ2FzZXMoKSB7CiAgcmV0dXJuICcnJwovLyBBdXRoZW50aWNhdGlvbiBVc2UgQ2FzZXMKLy8gR2VuZXJhdGVkIGJ5IE1hc29uCmltcG9ydCAnLi4vZW50aXRpZXMvdXNlci5kYXJ0JzsKaW1wb3J0ICcuLi9yZXBvc2l0b3JpZXMvYXV0aF9yZXBvc2l0b3J5LmRhcnQnOwoKY2xhc3MgU2lnbkluVXNlQ2FzZSB7CiAgZmluYWwgQXV0aFJlcG9zaXRvcnkgcmVwb3NpdG9yeTsKICAKICBTaWduSW5Vc2VDYXNlKHRoaXMucmVwb3NpdG9yeSk7CiAgCiAgRnV0dXJlPFVzZXI+IGV4ZWN1dGUoU3RyaW5nIGVtYWlsLCBTdHJpbmcgcGFzc3dvcmQpIHsKICAgIHJldHVybiByZXBvc2l0b3J5LnNpZ25JbldpdGhFbWFpbEFuZFBhc3N3b3JkKGVtYWlsLCBwYXNzd29yZCk7CiAgfQp9CgpjbGFzcyBTaWduVXBVc2VDYXNlIHsKICBmaW5hbCBBdXRoUmVwb3NpdG9yeSByZXBvc2l0b3J5OwogIAogIFNpZ25VcFVzZUNhc2UodGhpcy5yZXBvc2l0b3J5KTsKICAKICBGdXR1cmU8VXNlcj4gZXhlY3V0ZShTdHJpbmcgZW1haWwsIFN0cmluZyBwYXNzd29yZCkgewogICAgcmV0dXJuIHJlcG9zaXRvcnkuc2lnblVwV2l0aEVtYWlsQW5kUGFzc3dvcmQoZW1haWwsIHBhc3N3b3JkKTsKICB9Cn0KCmNsYXNzIFNpZ25PdXRVc2VDYXNlIHsKICBmaW5hbCBBdXRoUmVwb3NpdG9yeSByZXBvc2l0b3J5OwogIAogIFNpZ25PdXRVc2VDYXNlKHRoaXMucmVwb3NpdG9yeSk7CiAgCiAgRnV0dXJlPHZvaWQ+IGV4ZWN1dGUoKSB7CiAgICByZXR1cm4gcmVwb3NpdG9yeS5zaWduT3V0KCk7CiAgfQp9CgpjbGFzcyBHZXRDdXJyZW50VXNlclVzZUNhc2UgewogIGZpbmFsIEF1dGhSZXBvc2l0b3J5IHJlcG9zaXRvcnk7CiAgCiAgR2V0Q3VycmVudFVzZXJVc2VDYXNlKHRoaXMucmVwb3NpdG9yeSk7CiAgCiAgRnV0dXJlPFVzZXI/PiBleGVjdXRlKCkgewogICAgcmV0dXJuIHJlcG9zaXRvcnkuZ2V0Q3VycmVudFVzZXIoKTsKICB9Cn0KCmNsYXNzIElzU2lnbmVkSW5Vc2VDYXNlIHsKICBmaW5hbCBBdXRoUmVwb3NpdG9yeSByZXBvc2l0b3J5OwogIAogIElzU2lnbmVkSW5Vc2VDYXNlKHRoaXMucmVwb3NpdG9yeSk7CiAgCiAgRnV0dXJlPGJvb2w+IGV4ZWN1dGUoKSB7CiAgICByZXR1cm4gcmVwb3NpdG9yeS5pc1NpZ25lZEluKCk7CiAgfQp9CgpjbGFzcyBTZW5kUGFzc3dvcmRSZXNldEVtYWlsVXNlQ2FzZSB7CiAgZmluYWwgQXV0aFJlcG9zaXRvcnkgcmVwb3NpdG9yeTsKICAKICBTZW5kUGFzc3dvcmRSZXNldEVtYWlsVXNlQ2FzZSh0aGlzLnJlcG9zaXRvcnkpOwogIAogIEZ1dHVyZTx2b2lkPiBleGVjdXRlKFN0cmluZyBlbWFpbCkgewogICAgcmV0dXJuIHJlcG9zaXRvcnkuc2VuZFBhc3N3b3JkUmVzZXRFbWFpbChlbWFpbCk7CiAgfQp9CicnJzsKfQoKLy8gR2VuZXJhdGUgYXV0aGVudGljYXRpb24gbW9kZWwgZm9yIENsZWFuIEFyY2hpdGVjdHVyZQpTdHJpbmcgZ2VuZXJhdGVBdXRoZW50aWNhdGlvbk1vZGVsKCkgewogIHJldHVybiAnJycKLy8gVXNlciBNb2RlbAovLyBHZW5lcmF0ZWQgYnkgTWFzb24KaW1wb3J0ICcuLi8uLi9kb21haW4vZW50aXRpZXMvdXNlci5kYXJ0JzsKCmNsYXNzIFVzZXJNb2RlbCBleHRlbmRzIFVzZXIgewogIFVzZXJNb2RlbCh7CiAgICByZXF1aXJlZCBTdHJpbmcgaWQsCiAgICByZXF1aXJlZCBTdHJpbmcgZW1haWwsCiAgICBTdHJpbmc/IGRpc3BsYXlOYW1lLAogICAgU3RyaW5nPyBwaG90b1VybCwKICAgIEF1dGhTdGF0dXMgc3RhdHVzID0gQXV0aFN0YXR1cy51bmtub3duLAogIH0pIDogc3VwZXIoCiAgICBpZDogaWQsCiAgICBlbWFpbDogZW1haWwsCiAgICBkaXNwbGF5TmFtZTogZGlzcGxheU5hbWUsCiAgICBwaG90b1VybDogcGhvdG9VcmwsCiAgICBzdGF0dXM6IHN0YXR1cywKICApOwogIAogIGZhY3RvcnkgVXNlck1vZGVsLmZyb21Kc29uKE1hcDxTdHJpbmcsIGR5bmFtaWM+IGpzb24pIHsKICAgIHJldHVybiBVc2VyTW9kZWwoCiAgICAgIGlkOiBqc29uWydpZCddLAogICAgICBlbWFpbDoganNvblsnZW1haWwnXSwKICAgICAgZGlzcGxheU5hbWU6IGpzb25bJ2Rpc3BsYXlOYW1lJ10sCiAgICAgIHBob3RvVXJsOiBqc29uWydwaG90b1VybCddLAogICAgICBzdGF0dXM6IEF1dGhTdGF0dXMudmFsdWVzW2pzb25bJ3N0YXR1cyddID8/IDBdLAogICAgKTsKICB9CiAgCiAgTWFwPFN0cmluZywgZHluYW1pYz4gdG9Kc29uKCkgewogICAgcmV0dXJuIHsKICAgICAgJ2lkJzogaWQsCiAgICAgICdlbWFpbCc6IGVtYWlsLAogICAgICAnZGlzcGxheU5hbWUnOiBkaXNwbGF5TmFtZSwKICAgICAgJ3Bob3RvVXJsJzogcGhvdG9VcmwsCiAgICAgICdzdGF0dXMnOiBzdGF0dXMuaW5kZXgsCiAgICB9OwogIH0KICAKICBmYWN0b3J5IFVzZXJNb2RlbC5mcm9tRW50aXR5KFVzZXIgdXNlcikgewogICAgcmV0dXJuIFVzZXJNb2RlbCgKICAgICAgaWQ6IHVzZXIuaWQsCiAgICAgIGVtYWlsOiB1c2VyLmVtYWlsLAogICAgICBkaXNwbGF5TmFtZTogdXNlci5kaXNwbGF5TmFtZSwKICAgICAgcGhvdG9Vcmw6IHVzZXIucGhvdG9VcmwsCiAgICAgIHN0YXR1czogdXNlci5zdGF0dXMsCiAgICApOwogIH0KfQonJyc7Cn0KCi8vIEdlbmVyYXRlIGF1dGhlbnRpY2F0aW9uIGRhdGEgc291cmNlIGZvciBDbGVhbiBBcmNoaXRlY3R1cmUKU3RyaW5nIGdlbmVyYXRlQXV0aGVudGljYXRpb25EYXRhU291cmNlKCkgewogIHJldHVybiAnJycKLy8gQXV0aGVudGljYXRpb24gRGF0YSBTb3VyY2VzCi8vIEdlbmVyYXRlZCBieSBNYXNvbgppbXBvcnQgJy4uL21vZGVscy91c2VyX21vZGVsLmRhcnQnOwoKYWJzdHJhY3QgY2xhc3MgQXV0aFJlbW90ZURhdGFTb3VyY2UgewogIEZ1dHVyZTxVc2VyTW9kZWw+IHNpZ25JbldpdGhFbWFpbEFuZFBhc3N3b3JkKFN0cmluZyBlbWFpbCwgU3RyaW5nIHBhc3N3b3JkKTsKICBGdXR1cmU8VXNlck1vZGVsPiBzaWduVXBXaXRoRW1haWxBbmRQYXNzd29yZChTdHJpbmcgZW1haWwsIFN0cmluZyBwYXNzd29yZCk7CiAgRnV0dXJlPHZvaWQ+IHNpZ25PdXQoKTsKICBGdXR1cmU8VXNlck1vZGVsPz4gZ2V0Q3VycmVudFVzZXIoKTsKICBGdXR1cmU8Ym9vbD4gaXNTaWduZWRJbigpOwogIEZ1dHVyZTx2b2lkPiBzZW5kUGFzc3dvcmRSZXNldEVtYWlsKFN0cmluZyBlbWFpbCk7Cn0KCmNsYXNzIEF1dGhSZW1vdGVEYXRhU291cmNlSW1wbCBpbXBsZW1lbnRzIEF1dGhSZW1vdGVEYXRhU291cmNlIHsKICAvLyBUT0RPOiBJbXBsZW1lbnQgd2l0aCBGaXJlYmFzZSBBdXRoIG9yIGFueSBvdGhlciBhdXRoIHByb3ZpZGVyCiAgCiAgQG92ZXJyaWRlCiAgRnV0dXJlPFVzZXJNb2RlbD4gc2lnbkluV2l0aEVtYWlsQW5kUGFzc3dvcmQoU3RyaW5nIGVtYWlsLCBTdHJpbmcgcGFzc3dvcmQpIGFzeW5jIHsKICAgIC8vIFRPRE86IEltcGxlbWVudCBhY3R1YWwgc2lnbiBpbgogICAgLy8gVGhpcyBpcyBqdXN0IGEgcGxhY2Vob2xkZXIKICAgIHJldHVybiBVc2VyTW9kZWwoCiAgICAgIGlkOiAndXNlcl9pZCcsCiAgICAgIGVtYWlsOiBlbWFpbCwKICAgICAgc3RhdHVzOiBBdXRoU3RhdHVzLmF1dGhlbnRpY2F0ZWQsCiAgICApOwogIH0KICAKICBAb3ZlcnJpZGUKICBGdXR1cmU8VXNlck1vZGVsPiBzaWduVXBXaXRoRW1haWxBbmRQYXNzd29yZChTdHJpbmcgZW1haWwsIFN0cmluZyBwYXNzd29yZCkgYXN5bmMgewogICAgLy8gVE9ETzogSW1wbGVtZW50IGFjdHVhbCBzaWduIHVwCiAgICAvLyBUaGlzIGlzIGp1c3QgYSBwbGFjZWhvbGRlcgogICAgcmV0dXJuIFVzZXJNb2RlbCgKICAgICAgaWQ6ICduZXdfdXNlcl9pZCcsCiAgICAgIGVtYWlsOiBlbWFpbCwKICAgICAgc3RhdHVzOiBBdXRoU3RhdHVzLmF1dGhlbnRpY2F0ZWQsCiAgICApOwogIH0KICAKICBAb3ZlcnJpZGUKICBGdXR1cmU8dm9pZD4gc2lnbk91dCgpIGFzeW5jIHsKICAgIC8vIFRPRE86IEltcGxlbWVudCBhY3R1YWwgc2lnbiBvdXQKICB9CiAgCiAgQG92ZXJyaWRlCiAgRnV0dXJlPFVzZXJNb2RlbD8+IGdldEN1cnJlbnRVc2VyKCkgYXN5bmMgewogICAgLy8gVE9ETzogSW1wbGVtZW50IGFjdHVhbCBnZXQgY3VycmVudCB1c2VyCiAgICByZXR1cm4gbnVsbDsgCiAgfQogIAogIEBvdmVycmlkZQogIEZ1dHVyZTxib29sPiBpc1NpZ25lZEluKCkgYXN5bmMgewogICAgLy8gVE9ETzogSW1wbGVtZW50IGFjdHVhbCBjaGVjawogICAgcmV0dXJuIGZhbHNlOwogIH0KICAKICBAb3ZlcnJpZGUKICBGdXR1cmU8dm9pZD4gc2VuZFBhc3N3b3JkUmVzZXRFbWFpbChTdHJpbmcgZW1haWwpIGFzeW5jIHsKICAgIC8vIFRPRE86IEltcGxlbWVudCBhY3R1YWwgcGFzc3dvcmQgcmVzZXQKICB9Cn0KCmFic3RyYWN0IGNsYXNzIEF1dGhMb2NhbERhdGFTb3VyY2UgewogIEZ1dHVyZTx2b2lkPiBjYWNoZVVzZXIoVXNlck1vZGVsIHVzZXIpOwogIEZ1dHVyZTx2b2lkPiBjbGVhclVzZXIoKTsKICBGdXR1cmU8VXNlck1vZGVsPz4gZ2V0TGFzdFVzZXIoKTsKfQoKY2xhc3MgQXV0aExvY2FsRGF0YVNvdXJjZUltcGwgaW1wbGVtZW50cyBBdXRoTG9jYWxEYXRhU291cmNlIHsKICAvLyBUT0RPOiBJbXBsZW1lbnQgd2l0aCBzaGFyZWQgcHJlZmVyZW5jZXMsIHNlY3VyZSBzdG9yYWdlLCBvciBhbnkgbG9jYWwgc3RvcmFnZQogIAogIEBvdmVycmlkZQogIEZ1dHVyZTx2b2lkPiBjYWNoZVVzZXIoVXNlck1vZGVsIHVzZXIpIGFzeW5jIHsKICAgIC8vIFRPRE86IEltcGxlbWVudCBjYWNoaW5nIHVzZXIKICB9CiAgCiAgQG92ZXJyaWRlCiAgRnV0dXJlPHZvaWQ+IGNsZWFyVXNlcigpIGFzeW5jIHsKICAgIC8vIFRPRE86IEltcGxlbWVudCBjbGVhcmluZyBjYWNoZWQgdXNlcgogIH0KICAKICBAb3ZlcnJpZGUKICBGdXR1cmU8VXNlck1vZGVsPz4gZ2V0TGFzdFVzZXIoKSBhc3luYyB7CiAgICAvLyBUT0RPOiBJbXBsZW1lbnQgZ2V0dGluZyBjYWNoZWQgdXNlcgogICAgcmV0dXJuIG51bGw7CiAgfQp9CicnJzsKfQoKLy8gR2VuZXJhdGUgYXV0aGVudGljYXRpb24gcmVwb3NpdG9yeSBpbXBsZW1lbnRhdGlvbiBmb3IgQ2xlYW4gQXJjaGl0ZWN0dXJlClN0cmluZyBnZW5lcmF0ZUF1dGhlbnRpY2F0aW9uUmVwb3NpdG9yeUltcGwoKSB7CiAgcmV0dXJuICcnJwovLyBBdXRoZW50aWNhdGlvbiBSZXBvc2l0b3J5IEltcGxlbWVudGF0aW9uCi8vIEdlbmVyYXRlZCBieSBNYXNvbgppbXBvcnQgJy4uLy4uL2RvbWFpbi9lbnRpdGllcy91c2VyLmRhcnQnOwppbXBvcnQgJy4uLy4uL2RvbWFpbi9yZXBvc2l0b3JpZXMvYXV0aF9yZXBvc2l0b3J5LmRhcnQnOwppbXBvcnQgJy4uL2RhdGFzb3VyY2VzL2F1dGhfZGF0YV9zb3VyY2UuZGFydCc7CmltcG9ydCAnLi4vbW9kZWxzL3VzZXJfbW9kZWwuZGFydCc7CgpjbGFzcyBBdXRoUmVwb3NpdG9yeUltcGwgaW1wbGVtZW50cyBBdXRoUmVwb3NpdG9yeSB7CiAgZmluYWwgQXV0aFJlbW90ZURhdGFTb3VyY2UgcmVtb3RlRGF0YVNvdXJjZTsKICBmaW5hbCBBdXRoTG9jYWxEYXRhU291cmNlIGxvY2FsRGF0YVNvdXJjZTsKICAKICBBdXRoUmVwb3NpdG9yeUltcGwoewogICAgcmVxdWlyZWQgdGhpcy5yZW1vdGVEYXRhU291cmNlLAogICAgcmVxdWlyZWQgdGhpcy5sb2NhbERhdGFTb3VyY2UsCiAgfSk7CiAgCiAgQG92ZXJyaWRlCiAgRnV0dXJlPFVzZXI+IHNpZ25JbldpdGhFbWFpbEFuZFBhc3N3b3JkKFN0cmluZyBlbWFpbCwgU3RyaW5nIHBhc3N3b3JkKSBhc3luYyB7CiAgICBmaW5hbCB1c2VyTW9kZWwgPSBhd2FpdCByZW1vdGVEYXRhU291cmNlLnNpZ25JbldpdGhFbWFpbEFuZFBhc3N3b3JkKGVtYWlsLCBwYXNzd29yZCk7CiAgICBhd2FpdCBsb2NhbERhdGFTb3VyY2UuY2FjaGVVc2VyKHVzZXJNb2RlbCk7CiAgICByZXR1cm4gdXNlck1vZGVsOwogIH0KICAKICBAb3ZlcnJpZGUKICBGdXR1cmU8VXNlcj4gc2lnblVwV2l0aEVtYWlsQW5kUGFzc3dvcmQoU3RyaW5nIGVtYWlsLCBTdHJpbmcgcGFzc3dvcmQpIGFzeW5jIHsKICAgIGZpbmFsIHVzZXJNb2RlbCA9IGF3YWl0IHJlbW90ZURhdGFTb3VyY2Uuc2lnblVwV2l0aEVtYWlsQW5kUGFzc3dvcmQoZW1haWwsIHBhc3N3b3JkKTsKICAgIGF3YWl0IGxvY2FsRGF0YVNvdXJjZS5jYWNoZVVzZXIodXNlck1vZGVsKTsKICAgIHJldHVybiB1c2VyTW9kZWw7CiAgfQogIAogIEBvdmVycmlkZQogIEZ1dHVyZTx2b2lkPiBzaWduT3V0KCkgYXN5bmMgewogICAgYXdhaXQgcmVtb3RlRGF0YVNvdXJjZS5zaWduT3V0KCk7CiAgICBhd2FpdCBsb2NhbERhdGFTb3VyY2UuY2xlYXJVc2VyKCk7CiAgfQogIAogIEBvdmVycmlkZQogIEZ1dHVyZTxVc2VyPz4gZ2V0Q3VycmVudFVzZXIoKSBhc3luYyB7CiAgICB0cnkgewogICAgICAvLyBGaXJzdCB0cnkgdG8gZ2V0IGZyb20gcmVtb3RlCiAgICAgIHJldHVybiBhd2FpdCByZW1vdGVEYXRhU291cmNlLmdldEN1cnJlbnRVc2VyKCk7CiAgICB9IGNhdGNoIChfKSB7CiAgICAgIC8vIElmIHJlbW90ZSBmYWlscywgdHJ5IGZyb20gbG9jYWwgY2FjaGUKICAgICAgcmV0dXJuIGF3YWl0IGxvY2FsRGF0YVNvdXJjZS5nZXRMYXN0VXNlcigpOwogICAgfQogIH0KICAKICBAb3ZlcnJpZGUKICBGdXR1cmU8Ym9vbD4gaXNTaWduZWRJbigpIGFzeW5jIHsKICAgIHJldHVybiBhd2FpdCByZW1vdGVEYXRhU291cmNlLmlzU2lnbmVkSW4oKTsKICB9CiAgCiAgQG92ZXJyaWRlCiAgRnV0dXJlPHZvaWQ+IHNlbmRQYXNzd29yZFJlc2V0RW1haWwoU3RyaW5nIGVtYWlsKSBhc3luYyB7CiAgICBhd2FpdCByZW1vdGVEYXRhU291cmNlLnNlbmRQYXNzd29yZFJlc2V0RW1haWwoZW1haWwpOwogIH0KfQonJyc7Cn0KCi8vIEdlbmVyYXRlIGF1dGhlbnRpY2F0aW9uIHNjcmVlbnMgZm9yIENsZWFuIEFyY2hpdGVjdHVyZQpTdHJpbmcgZ2VuZXJhdGVBdXRoZW50aWNhdGlvblNjcmVlbnMoKSB7CiAgcmV0dXJuICcnJwovLyBMb2dpbiBTY3JlZW4KLy8gR2VuZXJhdGVkIGJ5IE1hc29uCmltcG9ydCAncGFja2FnZTpmbHV0dGVyL21hdGVyaWFsLmRhcnQnOwoKY2xhc3MgTG9naW5TY3JlZW4gZXh0ZW5kcyBTdGF0ZWZ1bFdpZGdldCB7CiAgY29uc3QgTG9naW5TY3JlZW4oe0tleT8ga2V5fSkgOiBzdXBlcihrZXk6IGtleSk7CgogIEBvdmVycmlkZQogIF9Mb2dpblNjcmVlblN0YXRlIGNyZWF0ZVN0YXRlKCkgPT4gX0xvZ2luU2NyZWVuU3RhdGUoKTsKfQoKY2xhc3MgX0xvZ2luU2NyZWVuU3RhdGUgZXh0ZW5kcyBTdGF0ZTxMb2dpblNjcmVlbj4gewogIGZpbmFsIF9mb3JtS2V5ID0gR2xvYmFsS2V5PEZvcm1TdGF0ZT4oKTsKICBmaW5hbCBfZW1haWxDb250cm9sbGVyID0gVGV4dEVkaXRpbmdDb250cm9sbGVyKCk7CiAgZmluYWwgX3Bhc3N3b3JkQ29udHJvbGxlciA9IFRleHRFZGl0aW5nQ29udHJvbGxlcigpOwogIGJvb2wgX2lzTG9hZGluZyA9IGZhbHNlOwogIGJvb2wgX29ic2N1cmVQYXNzd29yZCA9IHRydWU7CgogIEBvdmVycmlkZQogIHZvaWQgZGlzcG9zZSgpIHsKICAgIF9lbWFpbENvbnRyb2xsZXIuZGlzcG9zZSgpOwogICAgX3Bhc3N3b3JkQ29udHJvbGxlci5kaXNwb3NlKCk7CiAgICBzdXBlci5kaXNwb3NlKCk7CiAgfQoKICB2b2lkIF90b2dnbGVQYXNzd29yZFZpc2liaWxpdHkoKSB7CiAgICBzZXRTdGF0ZSgoKSB7CiAgICAgIF9vYnNjdXJlUGFzc3dvcmQgPSAhX29ic2N1cmVQYXNzd29yZDsKICAgIH0pOwogIH0KCiAgRnV0dXJlPHZvaWQ+IF9sb2dpbigpIGFzeW5jIHsKICAgIGlmIChfZm9ybUtleS5jdXJyZW50U3RhdGU/LnZhbGlkYXRlKCkgPz8gZmFsc2UpIHsKICAgICAgc2V0U3RhdGUoKCkgewogICAgICAgIF9pc0xvYWRpbmcgPSB0cnVlOwogICAgICB9KTsKCiAgICAgIHRyeSB7CiAgICAgICAgLy8gVE9ETzogSW1wbGVtZW50IGxvZ2luIGxvZ2ljIHdpdGggc3RhdGUgbWFuYWdlbWVudAogICAgICAgIC8vIEV4YW1wbGU6IGF3YWl0IGF1dGhCbG9jLmFkZChMb2dpbkV2ZW50KF9lbWFpbENvbnRyb2xsZXIudGV4dCwgX3Bhc3N3b3JkQ29udHJvbGxlci50ZXh0KSk7CiAgICAgICAgCiAgICAgICAgLy8gTmF2aWdhdGUgdG8gaG9tZSBvbiBzdWNjZXNzCiAgICAgICAgLy8gTmF2aWdhdG9yLm9mKGNvbnRleHQpLnB1c2hSZXBsYWNlbWVudE5hbWVkKCcvaG9tZScpOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgLy8gU2hvdyBlcnJvcgogICAgICAgIFNjYWZmb2xkTWVzc2VuZ2VyLm9mKGNvbnRleHQpLnNob3dTbmFja0JhcigKICAgICAgICAgIFNuYWNrQmFyKGNvbnRlbnQ6IFRleHQoZS50b1N0cmluZygpKSksCiAgICAgICAgKTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICBpZiAobW91bnRlZCkgewogICAgICAgICAgc2V0U3RhdGUoKCkgewogICAgICAgICAgICBfaXNMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9CgogIEBvdmVycmlkZQogIFdpZGdldCBidWlsZChCdWlsZENvbnRleHQgY29udGV4dCkgewogICAgcmV0dXJuIFNjYWZmb2xkKAogICAgICBhcHBCYXI6IEFwcEJhcigKICAgICAgICB0aXRsZTogY29uc3QgVGV4dCgnTG9naW4nKSwKICAgICAgKSwKICAgICAgYm9keTogUGFkZGluZygKICAgICAgICBwYWRkaW5nOiBjb25zdCBFZGdlSW5zZXRzLmFsbCgxNi4wKSwKICAgICAgICBjaGlsZDogRm9ybSgKICAgICAgICAgIGtleTogX2Zvcm1LZXksCiAgICAgICAgICBjaGlsZDogQ29sdW1uKAogICAgICAgICAgICBtYWluQXhpc0FsaWdubWVudDogTWFpbkF4aXNBbGlnbm1lbnQuY2VudGVyLAogICAgICAgICAgICBjcm9zc0F4aXNBbGlnbm1lbnQ6IENyb3NzQXhpc0FsaWdubWVudC5zdHJldGNoLAogICAgICAgICAgICBjaGlsZHJlbjogWwogICAgICAgICAgICAgIFRleHRGb3JtRmllbGQoCiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiBfZW1haWxDb250cm9sbGVyLAogICAgICAgICAgICAgICAga2V5Ym9hcmRUeXBlOiBUZXh0SW5wdXRUeXBlLmVtYWlsQWRkcmVzcywKICAgICAgICAgICAgICAgIGRlY29yYXRpb246IGNvbnN0IElucHV0RGVjb3JhdGlvbigKICAgICAgICAgICAgICAgICAgbGFiZWxUZXh0OiAnRW1haWwnLAogICAgICAgICAgICAgICAgICBib3JkZXI6IE91dGxpbmVJbnB1dEJvcmRlcigpLAogICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgIHZhbGlkYXRvcjogKHZhbHVlKSB7CiAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PSBudWxsIHx8IHZhbHVlLmlzRW1wdHkpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ1BsZWFzZSBlbnRlciB5b3VyIGVtYWlsJzsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBpZiAoIXZhbHVlLmNvbnRhaW5zKCdAJykpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ1BsZWFzZSBlbnRlciBhIHZhbGlkIGVtYWlsJzsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICBjb25zdCBTaXplZEJveChoZWlnaHQ6IDE2KSwKICAgICAgICAgICAgICBUZXh0Rm9ybUZpZWxkKAogICAgICAgICAgICAgICAgY29udHJvbGxlcjogX3Bhc3N3b3JkQ29udHJvbGxlciwKICAgICAgICAgICAgICAgIG9ic2N1cmVUZXh0OiBfb2JzY3VyZVBhc3N3b3JkLAogICAgICAgICAgICAgICAgZGVjb3JhdGlvbjogSW5wdXREZWNvcmF0aW9uKAogICAgICAgICAgICAgICAgICBsYWJlbFRleHQ6ICdQYXNzd29yZCcsCiAgICAgICAgICAgICAgICAgIGJvcmRlcjogY29uc3QgT3V0bGluZUlucHV0Qm9yZGVyKCksCiAgICAgICAgICAgICAgICAgIHN1ZmZpeEljb246IEljb25CdXR0b24oCiAgICAgICAgICAgICAgICAgICAgaWNvbjogSWNvbigKICAgICAgICAgICAgICAgICAgICAgIF9vYnNjdXJlUGFzc3dvcmQgPyBJY29ucy52aXNpYmlsaXR5IDogSWNvbnMudmlzaWJpbGl0eV9vZmYsCiAgICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICAgICBvblByZXNzZWQ6IF90b2dnbGVQYXNzd29yZFZpc2liaWxpdHksCiAgICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgdmFsaWRhdG9yOiAodmFsdWUpIHsKICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlID09IG51bGwgfHwgdmFsdWUuaXNFbXB0eSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAnUGxlYXNlIGVudGVyIHlvdXIgcGFzc3dvcmQnOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZS5sZW5ndGggPCA2KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdQYXNzd29yZCBtdXN0IGJlIGF0IGxlYXN0IDYgY2hhcmFjdGVycyc7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgY29uc3QgU2l6ZWRCb3goaGVpZ2h0OiAyNCksCiAgICAgICAgICAgICAgRWxldmF0ZWRCdXR0b24oCiAgICAgICAgICAgICAgICBvblByZXNzZWQ6IF9pc0xvYWRpbmcgPyBudWxsIDogX2xvZ2luLAogICAgICAgICAgICAgICAgY2hpbGQ6IF9pc0xvYWRpbmcKICAgICAgICAgICAgICAgICAgICA/IGNvbnN0IENpcmN1bGFyUHJvZ3Jlc3NJbmRpY2F0b3IoKQogICAgICAgICAgICAgICAgICAgIDogY29uc3QgVGV4dCgnTG9naW4nKSwKICAgICAgICAgICAgICApLAogICAgICAgICAgICAgIGNvbnN0IFNpemVkQm94KGhlaWdodDogMTYpLAogICAgICAgICAgICAgIFRleHRCdXR0b24oCiAgICAgICAgICAgICAgICBvblByZXNzZWQ6ICgpIHsKICAgICAgICAgICAgICAgICAgLy8gTmF2aWdhdGUgdG8gZm9yZ290IHBhc3N3b3JkCiAgICAgICAgICAgICAgICAgIC8vIE5hdmlnYXRvci5vZihjb250ZXh0KS5wdXNoTmFtZWQoJy9mb3Jnb3QtcGFzc3dvcmQnKTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBjaGlsZDogY29uc3QgVGV4dCgnRm9yZ290IFBhc3N3b3JkPycpLAogICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgVGV4dEJ1dHRvbigKICAgICAgICAgICAgICAgIG9uUHJlc3NlZDogKCkgewogICAgICAgICAgICAgICAgICAvLyBOYXZpZ2F0ZSB0byByZWdpc3RlcgogICAgICAgICAgICAgICAgICAvLyBOYXZpZ2F0b3Iub2YoY29udGV4dCkucHVzaE5hbWVkKCcvcmVnaXN0ZXInKTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBjaGlsZDogY29uc3QgVGV4dCgnRG9uXFwndCBoYXZlIGFuIGFjY291bnQ/IFJlZ2lzdGVyJyksCiAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgXSwKICAgICAgICAgICksCiAgICAgICAgKSwKICAgICAgKSwKICAgICk7CiAgfQp9CicnJzsKfQo=",
      "type": "text"
    },
    {
      "path": "lib/utils.dart",
      "data":
          "aW1wb3J0ICdkYXJ0OmlvJzsKaW1wb3J0ICdwYWNrYWdlOm1hc29uL21hc29uLmRhcnQnOwoKYm9vbCBpc1ZhbGlkUHJvamVjdE5hbWUoU3RyaW5nIG5hbWUpIHsKICBmaW5hbCBwcm9qZWN0TmFtZVJlZ2V4ID0gUmVnRXhwKHInXlthLXpfXVthLXowLTlfXSokJyk7CiAgcmV0dXJuIHByb2plY3ROYW1lUmVnZXguaGFzTWF0Y2gobmFtZSk7Cn0KCnZvaWQgY3JlYXRlRmlsZShTdHJpbmcgcGF0aCwgU3RyaW5nIGNvbnRlbnQsIEhvb2tDb250ZXh0IGNvbnRleHQpIHsKICBmaW5hbCBmaWxlID0gRmlsZShwYXRoKTsKICBpZiAoIWZpbGUuZXhpc3RzU3luYygpKSB7CiAgICBmaWxlLndyaXRlQXNTdHJpbmdTeW5jKGNvbnRlbnQpOwogICAgY29udGV4dC5sb2dnZXIuaW5mbygnQ3JlYXRlZCBmaWxlOiAkcGF0aCcpOwogIH0KfQoKU3RyaW5nIHRvQ2xhc3NOYW1lKFN0cmluZyBuYW1lKSB7CiAgZmluYWwgcGFydHMgPSBuYW1lLnNwbGl0KCdfJyk7CiAgcmV0dXJuIHBhcnRzLm1hcCgocGFydCkgPT4gcGFydC5pc05vdEVtcHR5ID8gcGFydFswXS50b1VwcGVyQ2FzZSgpICsgcGFydC5zdWJzdHJpbmcoMSkgOiAnJykuam9pbignJyk7Cn0KCi8vIFRlbXBsYXRlIGdlbmVyYXRvciBmb3IgZW50aXRpZXMKU3RyaW5nIGdlbmVyYXRlRW50aXR5VGVtcGxhdGUoU3RyaW5nIGZlYXR1cmVOYW1lKSB7CiAgZmluYWwgY2xhc3NOYW1lID0gdG9DbGFzc05hbWUoZmVhdHVyZU5hbWUpOwogIHJldHVybiAnJycKLy8gJHtjbGFzc05hbWV9RW50aXR5Ci8vIFRoaXMgZmlsZSB3YXMgYXV0by1nZW5lcmF0ZWQgYnkgTWFzb24KCmNsYXNzICR7Y2xhc3NOYW1lfUVudGl0eSB7CiAgZmluYWwgU3RyaW5nIGlkOwogIGZpbmFsIFN0cmluZyBuYW1lOwogIC8vIEFkZCBtb3JlIGZpZWxkcyBhcyBuZWVkZWQKICAKICAke2NsYXNzTmFtZX1FbnRpdHkoewogICAgcmVxdWlyZWQgdGhpcy5pZCwKICAgIHJlcXVpcmVkIHRoaXMubmFtZSwKICB9KTsKfQonJyc7Cn0KCi8vIFRlbXBsYXRlIGZvciByZXBvc2l0b3J5IGludGVyZmFjZQpTdHJpbmcgZ2VuZXJhdGVSZXBvc2l0b3J5VGVtcGxhdGUoU3RyaW5nIGZlYXR1cmVOYW1lKSB7CiAgZmluYWwgY2xhc3NOYW1lID0gdG9DbGFzc05hbWUoZmVhdHVyZU5hbWUpOwogIHJldHVybiAnJycKLy8gJHtjbGFzc05hbWV9UmVwb3NpdG9yeSBpbnRlcmZhY2UKLy8gVGhpcyBmaWxlIHdhcyBhdXRvLWdlbmVyYXRlZCBieSBNYXNvbgppbXBvcnQgJy4uL2VudGl0aWVzLyR7ZmVhdHVyZU5hbWV9X2VudGl0eS5kYXJ0JzsKCmFic3RyYWN0IGNsYXNzICR7Y2xhc3NOYW1lfVJlcG9zaXRvcnkgewogIEZ1dHVyZTxMaXN0PCR7Y2xhc3NOYW1lfUVudGl0eT4+IGdldEFsbCgpOwogIEZ1dHVyZTwke2NsYXNzTmFtZX1FbnRpdHk+IGdldEJ5SWQoU3RyaW5nIGlkKTsKICBGdXR1cmU8dm9pZD4gY3JlYXRlKCR7Y2xhc3NOYW1lfUVudGl0eSBlbnRpdHkpOwogIEZ1dHVyZTx2b2lkPiB1cGRhdGUoJHtjbGFzc05hbWV9RW50aXR5IGVudGl0eSk7CiAgRnV0dXJlPHZvaWQ+IGRlbGV0ZShTdHJpbmcgaWQpOwp9CicnJzsKfQoKLy8gVGVtcGxhdGUgZm9yIHVzZSBjYXNlClN0cmluZyBnZW5lcmF0ZVVzZUNhc2VUZW1wbGF0ZShTdHJpbmcgZmVhdHVyZU5hbWUpIHsKICBmaW5hbCBjbGFzc05hbWUgPSB0b0NsYXNzTmFtZShmZWF0dXJlTmFtZSk7CiAgcmV0dXJuICcnJwovLyAke2NsYXNzTmFtZX1Vc2VDYXNlCi8vIFRoaXMgZmlsZSB3YXMgYXV0by1nZW5lcmF0ZWQgYnkgTWFzb24KaW1wb3J0ICcuLi9lbnRpdGllcy8ke2ZlYXR1cmVOYW1lfV9lbnRpdHkuZGFydCc7CmltcG9ydCAnLi4vcmVwb3NpdG9yaWVzLyR7ZmVhdHVyZU5hbWV9X3JlcG9zaXRvcnkuZGFydCc7CgpjbGFzcyBHZXQke2NsYXNzTmFtZX1Vc2VDYXNlIHsKICBmaW5hbCAke2NsYXNzTmFtZX1SZXBvc2l0b3J5IHJlcG9zaXRvcnk7CiAgCiAgR2V0JHtjbGFzc05hbWV9VXNlQ2FzZSh0aGlzLnJlcG9zaXRvcnkpOwogIAogIEZ1dHVyZTxMaXN0PCR7Y2xhc3NOYW1lfUVudGl0eT4+IGV4ZWN1dGUoKSB7CiAgICByZXR1cm4gcmVwb3NpdG9yeS5nZXRBbGwoKTsKICB9Cn0KCmNsYXNzIEdldCR7Y2xhc3NOYW1lfUJ5SWRVc2VDYXNlIHsKICBmaW5hbCAke2NsYXNzTmFtZX1SZXBvc2l0b3J5IHJlcG9zaXRvcnk7CiAgCiAgR2V0JHtjbGFzc05hbWV9QnlJZFVzZUNhc2UodGhpcy5yZXBvc2l0b3J5KTsKICAKICBGdXR1cmU8JHtjbGFzc05hbWV9RW50aXR5PiBleGVjdXRlKFN0cmluZyBpZCkgewogICAgcmV0dXJuIHJlcG9zaXRvcnkuZ2V0QnlJZChpZCk7CiAgfQp9CicnJzsKfQoKLy8gVGVtcGxhdGUgZm9yIG1vZGVsClN0cmluZyBnZW5lcmF0ZU1vZGVsVGVtcGxhdGUoU3RyaW5nIGZlYXR1cmVOYW1lKSB7CiAgZmluYWwgY2xhc3NOYW1lID0gdG9DbGFzc05hbWUoZmVhdHVyZU5hbWUpOwogIHJldHVybiAnJycKLy8gJHtjbGFzc05hbWV9TW9kZWwKLy8gVGhpcyBmaWxlIHdhcyBhdXRvLWdlbmVyYXRlZCBieSBNYXNvbgppbXBvcnQgJy4uLy4uL2RvbWFpbi9lbnRpdGllcy8ke2ZlYXR1cmVOYW1lfV9lbnRpdHkuZGFydCc7CgpjbGFzcyAke2NsYXNzTmFtZX1Nb2RlbCBleHRlbmRzICR7Y2xhc3NOYW1lfUVudGl0eSB7CiAgJHtjbGFzc05hbWV9TW9kZWwoewogICAgcmVxdWlyZWQgU3RyaW5nIGlkLAogICAgcmVxdWlyZWQgU3RyaW5nIG5hbWUsCiAgfSkgOiBzdXBlcigKICAgIGlkOiBpZCwKICAgIG5hbWU6IG5hbWUsCiAgKTsKICAKICBmYWN0b3J5ICR7Y2xhc3NOYW1lfU1vZGVsLmZyb21Kc29uKE1hcDxTdHJpbmcsIGR5bmFtaWM+IGpzb24pIHsKICAgIHJldHVybiAke2NsYXNzTmFtZX1Nb2RlbCgKICAgICAgaWQ6IGpzb25bJ2lkJ10sCiAgICAgIG5hbWU6IGpzb25bJ25hbWUnXSwKICAgICk7CiAgfQogIAogIE1hcDxTdHJpbmcsIGR5bmFtaWM+IHRvSnNvbigpIHsKICAgIHJldHVybiB7CiAgICAgICdpZCc6IGlkLAogICAgICAnbmFtZSc6IG5hbWUsCiAgICB9OwogIH0KICAKICBmYWN0b3J5ICR7Y2xhc3NOYW1lfU1vZGVsLmZyb21FbnRpdHkoJHtjbGFzc05hbWV9RW50aXR5IGVudGl0eSkgewogICAgcmV0dXJuICR7Y2xhc3NOYW1lfU1vZGVsKAogICAgICBpZDogZW50aXR5LmlkLAogICAgICBuYW1lOiBlbnRpdHkubmFtZSwKICAgICk7CiAgfQp9CicnJzsKfQoKLy8gVGVtcGxhdGUgZm9yIHJlcG9zaXRvcnkgaW1wbGVtZW50YXRpb24KU3RyaW5nIGdlbmVyYXRlUmVwb3NpdG9yeUltcGxUZW1wbGF0ZShTdHJpbmcgZmVhdHVyZU5hbWUpIHsKICBmaW5hbCBjbGFzc05hbWUgPSB0b0NsYXNzTmFtZShmZWF0dXJlTmFtZSk7CiAgcmV0dXJuICcnJwovLyAke2NsYXNzTmFtZX1SZXBvc2l0b3J5SW1wbAovLyBUaGlzIGZpbGUgd2FzIGF1dG8tZ2VuZXJhdGVkIGJ5IE1hc29uCmltcG9ydCAnLi4vLi4vZG9tYWluL2VudGl0aWVzLyR7ZmVhdHVyZU5hbWV9X2VudGl0eS5kYXJ0JzsKaW1wb3J0ICcuLi8uLi9kb21haW4vcmVwb3NpdG9yaWVzLyR7ZmVhdHVyZU5hbWV9X3JlcG9zaXRvcnkuZGFydCc7CmltcG9ydCAnLi4vZGF0YXNvdXJjZXMvJHtmZWF0dXJlTmFtZX1fZGF0YV9zb3VyY2UuZGFydCc7CmltcG9ydCAnLi4vbW9kZWxzLyR7ZmVhdHVyZU5hbWV9X21vZGVsLmRhcnQnOwoKY2xhc3MgJHtjbGFzc05hbWV9UmVwb3NpdG9yeUltcGwgaW1wbGVtZW50cyAke2NsYXNzTmFtZX1SZXBvc2l0b3J5IHsKICBmaW5hbCAke2NsYXNzTmFtZX1EYXRhU291cmNlIGRhdGFTb3VyY2U7CiAgCiAgJHtjbGFzc05hbWV9UmVwb3NpdG9yeUltcGwoewogICAgcmVxdWlyZWQgdGhpcy5kYXRhU291cmNlLAogIH0pOwogIAogIEBvdmVycmlkZQogIEZ1dHVyZTxMaXN0PCR7Y2xhc3NOYW1lfUVudGl0eT4+IGdldEFsbCgpIGFzeW5jIHsKICAgIGZpbmFsIHJlc3VsdCA9IGF3YWl0IGRhdGFTb3VyY2UuZ2V0QWxsKCk7CiAgICByZXR1cm4gcmVzdWx0Lm1hcCgobW9kZWwpID0+IG1vZGVsKS50b0xpc3QoKTsKICB9CiAgCiAgQG92ZXJyaWRlCiAgRnV0dXJlPCR7Y2xhc3NOYW1lfUVudGl0eT4gZ2V0QnlJZChTdHJpbmcgaWQpIGFzeW5jIHsKICAgIHJldHVybiBhd2FpdCBkYXRhU291cmNlLmdldEJ5SWQoaWQpOwogIH0KICAKICBAb3ZlcnJpZGUKICBGdXR1cmU8dm9pZD4gY3JlYXRlKCR7Y2xhc3NOYW1lfUVudGl0eSBlbnRpdHkpIGFzeW5jIHsKICAgIGF3YWl0IGRhdGFTb3VyY2UuY3JlYXRlKCR7Y2xhc3NOYW1lfU1vZGVsLmZyb21FbnRpdHkoZW50aXR5KSk7CiAgfQogIAogIEBvdmVycmlkZQogIEZ1dHVyZTx2b2lkPiB1cGRhdGUoJHtjbGFzc05hbWV9RW50aXR5IGVudGl0eSkgYXN5bmMgewogICAgYXdhaXQgZGF0YVNvdXJjZS51cGRhdGUoJHtjbGFzc05hbWV9TW9kZWwuZnJvbUVudGl0eShlbnRpdHkpKTsKICB9CiAgCiAgQG92ZXJyaWRlCiAgRnV0dXJlPHZvaWQ+IGRlbGV0ZShTdHJpbmcgaWQpIGFzeW5jIHsKICAgIGF3YWl0IGRhdGFTb3VyY2UuZGVsZXRlKGlkKTsKICB9Cn0KJycnOwp9CgovLyBUZW1wbGF0ZSBmb3IgZGF0YSBzb3VyY2UKU3RyaW5nIGdlbmVyYXRlRGF0YVNvdXJjZVRlbXBsYXRlKFN0cmluZyBmZWF0dXJlTmFtZSkgewogIGZpbmFsIGNsYXNzTmFtZSA9IHRvQ2xhc3NOYW1lKGZlYXR1cmVOYW1lKTsKICByZXR1cm4gJycnCi8vICR7Y2xhc3NOYW1lfURhdGFTb3VyY2UKLy8gVGhpcyBmaWxlIHdhcyBhdXRvLWdlbmVyYXRlZCBieSBNYXNvbgppbXBvcnQgJy4uL21vZGVscy8ke2ZlYXR1cmVOYW1lfV9tb2RlbC5kYXJ0JzsKCmFic3RyYWN0IGNsYXNzICR7Y2xhc3NOYW1lfURhdGFTb3VyY2UgewogIEZ1dHVyZTxMaXN0PCR7Y2xhc3NOYW1lfU1vZGVsPj4gZ2V0QWxsKCk7CiAgRnV0dXJlPCR7Y2xhc3NOYW1lfU1vZGVsPiBnZXRCeUlkKFN0cmluZyBpZCk7CiAgRnV0dXJlPHZvaWQ+IGNyZWF0ZSgke2NsYXNzTmFtZX1Nb2RlbCBtb2RlbCk7CiAgRnV0dXJlPHZvaWQ+IHVwZGF0ZSgke2NsYXNzTmFtZX1Nb2RlbCBtb2RlbCk7CiAgRnV0dXJlPHZvaWQ+IGRlbGV0ZShTdHJpbmcgaWQpOwp9CgpjbGFzcyAke2NsYXNzTmFtZX1SZW1vdGVEYXRhU291cmNlIGltcGxlbWVudHMgJHtjbGFzc05hbWV9RGF0YVNvdXJjZSB7CiAgLy8gVE9ETzogSW1wbGVtZW50IHJlbW90ZSBkYXRhIHNvdXJjZSAoQVBJIGNhbGxzLCBldGMuKQogIAogIEBvdmVycmlkZQogIEZ1dHVyZTxMaXN0PCR7Y2xhc3NOYW1lfU1vZGVsPj4gZ2V0QWxsKCkgYXN5bmMgewogICAgLy8gVE9ETzogSW1wbGVtZW50IEFQSSBjYWxsCiAgICByZXR1cm4gW107CiAgfQogIAogIEBvdmVycmlkZQogIEZ1dHVyZTwke2NsYXNzTmFtZX1Nb2RlbD4gZ2V0QnlJZChTdHJpbmcgaWQpIGFzeW5jIHsKICAgIC8vIFRPRE86IEltcGxlbWVudCBBUEkgY2FsbAogICAgdGhyb3cgVW5pbXBsZW1lbnRlZEVycm9yKCk7CiAgfQogIAogIEBvdmVycmlkZQogIEZ1dHVyZTx2b2lkPiBjcmVhdGUoJHtjbGFzc05hbWV9TW9kZWwgbW9kZWwpIGFzeW5jIHsKICAgIC8vIFRPRE86IEltcGxlbWVudCBBUEkgY2FsbAogIH0KICAKICBAb3ZlcnJpZGUKICBGdXR1cmU8dm9pZD4gdXBkYXRlKCR7Y2xhc3NOYW1lfU1vZGVsIG1vZGVsKSBhc3luYyB7CiAgICAvLyBUT0RPOiBJbXBsZW1lbnQgQVBJIGNhbGwKICB9CiAgCiAgQG92ZXJyaWRlCiAgRnV0dXJlPHZvaWQ+IGRlbGV0ZShTdHJpbmcgaWQpIGFzeW5jIHsKICAgIC8vIFRPRE86IEltcGxlbWVudCBBUEkgY2FsbAogIH0KfQoKY2xhc3MgJHtjbGFzc05hbWV9TG9jYWxEYXRhU291cmNlIGltcGxlbWVudHMgJHtjbGFzc05hbWV9RGF0YVNvdXJjZSB7CiAgLy8gVE9ETzogSW1wbGVtZW50IGxvY2FsIGRhdGEgc291cmNlIChzaGFyZWQgcHJlZnMsIGRhdGFiYXNlLCBldGMuKQogIAogIEBvdmVycmlkZQogIEZ1dHVyZTxMaXN0PCR7Y2xhc3NOYW1lfU1vZGVsPj4gZ2V0QWxsKCkgYXN5bmMgewogICAgLy8gVE9ETzogSW1wbGVtZW50IGxvY2FsIHN0b3JhZ2UgcmV0cmlldmFsCiAgICByZXR1cm4gW107CiAgfQogIAogIEBvdmVycmlkZQogIEZ1dHVyZTwke2NsYXNzTmFtZX1Nb2RlbD4gZ2V0QnlJZChTdHJpbmcgaWQpIGFzeW5jIHsKICAgIC8vIFRPRE86IEltcGxlbWVudCBsb2NhbCBzdG9yYWdlIHJldHJpZXZhbAogICAgdGhyb3cgVW5pbXBsZW1lbnRlZEVycm9yKCk7CiAgfQogIAogIEBvdmVycmlkZQogIEZ1dHVyZTx2b2lkPiBjcmVhdGUoJHtjbGFzc05hbWV9TW9kZWwgbW9kZWwpIGFzeW5jIHsKICAgIC8vIFRPRE86IEltcGxlbWVudCBsb2NhbCBzdG9yYWdlIHNhdmluZwogIH0KICAKICBAb3ZlcnJpZGUKICBGdXR1cmU8dm9pZD4gdXBkYXRlKCR7Y2xhc3NOYW1lfU1vZGVsIG1vZGVsKSBhc3luYyB7CiAgICAvLyBUT0RPOiBJbXBsZW1lbnQgbG9jYWwgc3RvcmFnZSB1cGRhdGluZwogIH0KICAKICBAb3ZlcnJpZGUKICBGdXR1cmU8dm9pZD4gZGVsZXRlKFN0cmluZyBpZCkgYXN5bmMgewogICAgLy8gVE9ETzogSW1wbGVtZW50IGxvY2FsIHN0b3JhZ2UgZGVsZXRpb24KICB9Cn0KJycnOwp9CgovLyBUZW1wbGF0ZSBmb3IgcGFnZQpTdHJpbmcgZ2VuZXJhdGVQYWdlVGVtcGxhdGUoU3RyaW5nIGZlYXR1cmVOYW1lKSB7CiAgZmluYWwgY2xhc3NOYW1lID0gdG9DbGFzc05hbWUoZmVhdHVyZU5hbWUpOwogIHJldHVybiAnJycKLy8gJHtjbGFzc05hbWV9UGFnZQovLyBUaGlzIGZpbGUgd2FzIGF1dG8tZ2VuZXJhdGVkIGJ5IE1hc29uCmltcG9ydCAncGFja2FnZTpmbHV0dGVyL21hdGVyaWFsLmRhcnQnOwppbXBvcnQgJy4uL3dpZGdldHMvJHtmZWF0dXJlTmFtZX1fd2lkZ2V0LmRhcnQnOwoKY2xhc3MgJHtjbGFzc05hbWV9UGFnZSBleHRlbmRzIFN0YXRlbGVzc1dpZGdldCB7CiAgY29uc3QgJHtjbGFzc05hbWV9UGFnZSh7S2V5PyBrZXl9KSA6IHN1cGVyKGtleToga2V5KTsKCiAgQG92ZXJyaWRlCiAgV2lkZ2V0IGJ1aWxkKEJ1aWxkQ29udGV4dCBjb250ZXh0KSB7CiAgICByZXR1cm4gU2NhZmZvbGQoCiAgICAgIGFwcEJhcjogQXBwQmFyKAogICAgICAgIHRpdGxlOiBUZXh0KCcke2NsYXNzTmFtZX0nKSwKICAgICAgKSwKICAgICAgYm9keTogJHtjbGFzc05hbWV9V2lkZ2V0KCksCiAgICApOwogIH0KfQonJyc7Cn0KCi8vIFRlbXBsYXRlIGZvciB3aWRnZXQKU3RyaW5nIGdlbmVyYXRlV2lkZ2V0VGVtcGxhdGUoU3RyaW5nIGZlYXR1cmVOYW1lKSB7CiAgZmluYWwgY2xhc3NOYW1lID0gdG9DbGFzc05hbWUoZmVhdHVyZU5hbWUpOwogIHJldHVybiAnJycKLy8gJHtjbGFzc05hbWV9V2lkZ2V0Ci8vIFRoaXMgZmlsZSB3YXMgYXV0by1nZW5lcmF0ZWQgYnkgTWFzb24KaW1wb3J0ICdwYWNrYWdlOmZsdXR0ZXIvbWF0ZXJpYWwuZGFydCc7CgpjbGFzcyAke2NsYXNzTmFtZX1XaWRnZXQgZXh0ZW5kcyBTdGF0ZWxlc3NXaWRnZXQgewogIGNvbnN0ICR7Y2xhc3NOYW1lfVdpZGdldCh7S2V5PyBrZXl9KSA6IHN1cGVyKGtleToga2V5KTsKCiAgQG92ZXJyaWRlCiAgV2lkZ2V0IGJ1aWxkKEJ1aWxkQ29udGV4dCBjb250ZXh0KSB7CiAgICByZXR1cm4gQ2VudGVyKAogICAgICBjaGlsZDogVGV4dCgnJHtjbGFzc05hbWV9IEZlYXR1cmUnKSwKICAgICk7CiAgfQp9CicnJzsKfQoKLy8gVGVtcGxhdGUgZm9yIHNlcnZpY2UKU3RyaW5nIGdlbmVyYXRlU2VydmljZVRlbXBsYXRlKFN0cmluZyBtb2R1bGVOYW1lKSB7CiAgZmluYWwgY2xhc3NOYW1lID0gdG9DbGFzc05hbWUobW9kdWxlTmFtZSk7CiAgcmV0dXJuICcnJwovLyAke2NsYXNzTmFtZX1TZXJ2aWNlCi8vIFRoaXMgZmlsZSB3YXMgYXV0by1nZW5lcmF0ZWQgYnkgTWFzb24KCmNsYXNzICR7Y2xhc3NOYW1lfVNlcnZpY2UgewogIC8vIFRPRE86IEFkZCBzZXJ2aWNlIG1ldGhvZHMgYW5kIHByb3BlcnRpZXMKICAKICBGdXR1cmU8dm9pZD4gaW5pdGlhbGl6ZSgpIGFzeW5jIHsKICAgIC8vIFRPRE86IEltcGxlbWVudCBpbml0aWFsaXphdGlvbiBsb2dpYwogIH0KfQonJyc7Cn0KCi8vIFRlbXBsYXRlIGZvciBjb250cm9sbGVyClN0cmluZyBnZW5lcmF0ZUJhc2ljQ29udHJvbGxlcihTdHJpbmcgZmVhdHVyZU5hbWUpIHsKICBmaW5hbCBjbGFzc05hbWUgPSB0b0NsYXNzTmFtZShmZWF0dXJlTmFtZSk7CiAgcmV0dXJuICcnJwovLyAke2NsYXNzTmFtZX1Db250cm9sbGVyIGJhc2ljIGltcGxlbWVudGF0aW9uCi8vIEdlbmVyYXRlZCBieSBNYXNvbgoKY2xhc3MgJHtjbGFzc05hbWV9Q29udHJvbGxlciB7CiAgYm9vbCBpc0xvYWRpbmcgPSBmYWxzZTsKICBTdHJpbmc/IGVycm9yTWVzc2FnZTsKICBMaXN0PGR5bmFtaWM+IGl0ZW1zID0gW107CiAgCiAgRnV0dXJlPHZvaWQ+IGZldGNoRGF0YSgpIGFzeW5jIHsKICAgIGlzTG9hZGluZyA9IHRydWU7CiAgICAKICAgIHRyeSB7CiAgICAgIC8vIFRPRE86IEltcGxlbWVudCBkYXRhIGZldGNoaW5nCiAgICAgIGVycm9yTWVzc2FnZSA9IG51bGw7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIGVycm9yTWVzc2FnZSA9IGUudG9TdHJpbmcoKTsKICAgIH0gZmluYWxseSB7CiAgICAgIGlzTG9hZGluZyA9IGZhbHNlOwogICAgfQogIH0KfQonJyc7Cn0KClN0cmluZyBnZW5lcmF0ZVByb3ZpZGVyQ29udHJvbGxlcihTdHJpbmcgZmVhdHVyZU5hbWUpIHsKICBmaW5hbCBjbGFzc05hbWUgPSB0b0NsYXNzTmFtZShmZWF0dXJlTmFtZSk7CiAgcmV0dXJuICcnJwovLyAke2NsYXNzTmFtZX1Db250cm9sbGVyIHdpdGggUHJvdmlkZXIKLy8gR2VuZXJhdGVkIGJ5IE1hc29uCmltcG9ydCAncGFja2FnZTpmbHV0dGVyL2ZvdW5kYXRpb24uZGFydCc7CmltcG9ydCAnLi4vc2VydmljZXMvJHtmZWF0dXJlTmFtZX1fc2VydmljZS5kYXJ0JzsKCmNsYXNzICR7Y2xhc3NOYW1lfUNvbnRyb2xsZXIgZXh0ZW5kcyBDaGFuZ2VOb3RpZmllciB7CiAgZmluYWwgJHtjbGFzc05hbWV9U2VydmljZSBfc2VydmljZSA9ICR7Y2xhc3NOYW1lfVNlcnZpY2UoKTsKICAKICBib29sIF9pc0xvYWRpbmcgPSBmYWxzZTsKICBTdHJpbmc/IF9lcnJvck1lc3NhZ2U7CiAgTGlzdDxkeW5hbWljPiBfaXRlbXMgPSBbXTsKICAKICBib29sIGdldCBpc0xvYWRpbmcgPT4gX2lzTG9hZGluZzsKICBTdHJpbmc/IGdldCBlcnJvck1lc3NhZ2UgPT4gX2Vycm9yTWVzc2FnZTsKICBMaXN0PGR5bmFtaWM+IGdldCBpdGVtcyA9PiBfaXRlbXM7CiAgCiAgRnV0dXJlPHZvaWQ+IGZldGNoRGF0YSgpIGFzeW5jIHsKICAgIF9pc0xvYWRpbmcgPSB0cnVlOwogICAgX2Vycm9yTWVzc2FnZSA9IG51bGw7CiAgICBub3RpZnlMaXN0ZW5lcnMoKTsKICAgIAogICAgdHJ5IHsKICAgICAgLy8gVE9ETzogSW1wbGVtZW50IGRhdGEgZmV0Y2hpbmcKICAgICAgLy8gRXhhbXBsZTogX2l0ZW1zID0gYXdhaXQgX3NlcnZpY2UuZ2V0SXRlbXMoKTsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgX2Vycm9yTWVzc2FnZSA9IGUudG9TdHJpbmcoKTsKICAgIH0gZmluYWxseSB7CiAgICAgIF9pc0xvYWRpbmcgPSBmYWxzZTsKICAgICAgbm90aWZ5TGlzdGVuZXJzKCk7CiAgICB9CiAgfQp9CicnJzsKfQoKU3RyaW5nIGdlbmVyYXRlUml2ZXJwb2RDb250cm9sbGVyKFN0cmluZyBmZWF0dXJlTmFtZSkgewogIGZpbmFsIGNsYXNzTmFtZSA9IHRvQ2xhc3NOYW1lKGZlYXR1cmVOYW1lKTsKICByZXR1cm4gJycnCi8vICR7Y2xhc3NOYW1lfUNvbnRyb2xsZXIgd2l0aCBSaXZlcnBvZAovLyBHZW5lcmF0ZWQgYnkgTWFzb24KaW1wb3J0ICdwYWNrYWdlOmZsdXR0ZXJfcml2ZXJwb2QvZmx1dHRlcl9yaXZlcnBvZC5kYXJ0JzsKaW1wb3J0ICcuLi9zZXJ2aWNlcy8ke2ZlYXR1cmVOYW1lfV9zZXJ2aWNlLmRhcnQnOwoKLy8gU3RhdGUgY2xhc3MKY2xhc3MgJHtjbGFzc05hbWV9U3RhdGUgewogIGZpbmFsIGJvb2wgaXNMb2FkaW5nOwogIGZpbmFsIFN0cmluZz8gZXJyb3JNZXNzYWdlOwogIGZpbmFsIExpc3Q8ZHluYW1pYz4gaXRlbXM7CiAgCiAgY29uc3QgJHtjbGFzc05hbWV9U3RhdGUoewogICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZSwKICAgIHRoaXMuZXJyb3JNZXNzYWdlLAogICAgdGhpcy5pdGVtcyA9IGNvbnN0IFtdLAogIH0pOwogIAogICR7Y2xhc3NOYW1lfVN0YXRlIGNvcHlXaXRoKHsKICAgIGJvb2w/IGlzTG9hZGluZywKICAgIFN0cmluZz8gZXJyb3JNZXNzYWdlLAogICAgTGlzdDxkeW5hbWljPj8gaXRlbXMsCiAgfSkgewogICAgcmV0dXJuICR7Y2xhc3NOYW1lfVN0YXRlKAogICAgICBpc0xvYWRpbmc6IGlzTG9hZGluZyA/PyB0aGlzLmlzTG9hZGluZywKICAgICAgZXJyb3JNZXNzYWdlOiBlcnJvck1lc3NhZ2UgPz8gdGhpcy5lcnJvck1lc3NhZ2UsCiAgICAgIGl0ZW1zOiBpdGVtcyA/PyB0aGlzLml0ZW1zLAogICAgKTsKICB9Cn0KCi8vIFByb3ZpZGVyCmZpbmFsICR7ZmVhdHVyZU5hbWV9UHJvdmlkZXIgPSBTdGF0ZU5vdGlmaWVyUHJvdmlkZXI8JHtjbGFzc05hbWV9Q29udHJvbGxlciwgJHtjbGFzc05hbWV9U3RhdGU+KChyZWYpIHsKICByZXR1cm4gJHtjbGFzc05hbWV9Q29udHJvbGxlcigpOwp9KTsKCi8vIENvbnRyb2xsZXIKY2xhc3MgJHtjbGFzc05hbWV9Q29udHJvbGxlciBleHRlbmRzIFN0YXRlTm90aWZpZXI8JHtjbGFzc05hbWV9U3RhdGU+IHsKICBmaW5hbCAke2NsYXNzTmFtZX1TZXJ2aWNlIF9zZXJ2aWNlID0gJHtjbGFzc05hbWV9U2VydmljZSgpOwogIAogICR7Y2xhc3NOYW1lfUNvbnRyb2xsZXIoKSA6IHN1cGVyKGNvbnN0ICR7Y2xhc3NOYW1lfVN0YXRlKCkpIHsKICAgIGZldGNoRGF0YSgpOwogIH0KICAKICBGdXR1cmU8dm9pZD4gZmV0Y2hEYXRhKCkgYXN5bmMgewogICAgc3RhdGUgPSBzdGF0ZS5jb3B5V2l0aChpc0xvYWRpbmc6IHRydWUsIGVycm9yTWVzc2FnZTogbnVsbCk7CiAgICAKICAgIHRyeSB7CiAgICAgIC8vIFRPRE86IEltcGxlbWVudCBkYXRhIGZldGNoaW5nCiAgICAgIC8vIEV4YW1wbGU6IGZpbmFsIGl0ZW1zID0gYXdhaXQgX3NlcnZpY2UuZ2V0SXRlbXMoKTsKICAgICAgLy8gc3RhdGUgPSBzdGF0ZS5jb3B5V2l0aChpdGVtczogaXRlbXMsIGlzTG9hZGluZzogZmFsc2UpOwogICAgICBzdGF0ZSA9IHN0YXRlLmNvcHlXaXRoKGlzTG9hZGluZzogZmFsc2UpOwogICAgfSBjYXRjaCAoZSkgewogICAgICBzdGF0ZSA9IHN0YXRlLmNvcHlXaXRoKAogICAgICAgIGlzTG9hZGluZzogZmFsc2UsCiAgICAgICAgZXJyb3JNZXNzYWdlOiBlLnRvU3RyaW5nKCksCiAgICAgICk7CiAgICB9CiAgfQp9CicnJzsKfQoKU3RyaW5nIGdlbmVyYXRlR2V0WENvbnRyb2xsZXIoU3RyaW5nIGZlYXR1cmVOYW1lKSB7CiAgZmluYWwgY2xhc3NOYW1lID0gdG9DbGFzc05hbWUoZmVhdHVyZU5hbWUpOwogIHJldHVybiAnJycKLy8gJHtjbGFzc05hbWV9Q29udHJvbGxlciB3aXRoIEdldFgKLy8gR2VuZXJhdGVkIGJ5IE1hc29uCmltcG9ydCAncGFja2FnZTpnZXQvZ2V0LmRhcnQnOwppbXBvcnQgJy4uL3NlcnZpY2VzLyR7ZmVhdHVyZU5hbWV9X3NlcnZpY2UuZGFydCc7CgpjbGFzcyAke2NsYXNzTmFtZX1Db250cm9sbGVyIGV4dGVuZHMgR2V0eENvbnRyb2xsZXIgewogIGZpbmFsICR7Y2xhc3NOYW1lfVNlcnZpY2UgX3NlcnZpY2UgPSAke2NsYXNzTmFtZX1TZXJ2aWNlKCk7CiAgCiAgZmluYWwgUnhCb29sIGlzTG9hZGluZyA9IGZhbHNlLm9iczsKICBmaW5hbCBSeDxTdHJpbmc/PiBlcnJvck1lc3NhZ2UgPSBSeDxTdHJpbmc/PihudWxsKTsKICBmaW5hbCBSeExpc3Q8ZHluYW1pYz4gaXRlbXMgPSA8ZHluYW1pYz5bXS5vYnM7CiAgCiAgQG92ZXJyaWRlCiAgdm9pZCBvbkluaXQoKSB7CiAgICBzdXBlci5vbkluaXQoKTsKICAgIGZldGNoRGF0YSgpOwogIH0KICAKICBGdXR1cmU8dm9pZD4gZmV0Y2hEYXRhKCkgYXN5bmMgewogICAgaXNMb2FkaW5nLnZhbHVlID0gdHJ1ZTsKICAgIGVycm9yTWVzc2FnZS52YWx1ZSA9IG51bGw7CiAgICAKICAgIHRyeSB7CiAgICAgIC8vIFRPRE86IEltcGxlbWVudCBkYXRhIGZldGNoaW5nCiAgICAgIC8vIEV4YW1wbGU6IGZpbmFsIHJlc3VsdCA9IGF3YWl0IF9zZXJ2aWNlLmdldEl0ZW1zKCk7CiAgICAgIC8vIGl0ZW1zLnZhbHVlID0gcmVzdWx0OwogICAgfSBjYXRjaCAoZSkgewogICAgICBlcnJvck1lc3NhZ2UudmFsdWUgPSBlLnRvU3RyaW5nKCk7CiAgICB9IGZpbmFsbHkgewogICAgICBpc0xvYWRpbmcudmFsdWUgPSBmYWxzZTsKICAgIH0KICB9Cn0KJycnOwp9CgpTdHJpbmcgZ2VuZXJhdGVNb2JYQ29udHJvbGxlcihTdHJpbmcgZmVhdHVyZU5hbWUpIHsKICBmaW5hbCBjbGFzc05hbWUgPSB0b0NsYXNzTmFtZShmZWF0dXJlTmFtZSk7CiAgcmV0dXJuICcnJwovLyAke2NsYXNzTmFtZX1Db250cm9sbGVyIHdpdGggTW9iWAovLyBHZW5lcmF0ZWQgYnkgTWFzb24KaW1wb3J0ICdwYWNrYWdlOm1vYngvbW9ieC5kYXJ0JzsKaW1wb3J0ICcuLi9zZXJ2aWNlcy8ke2ZlYXR1cmVOYW1lfV9zZXJ2aWNlLmRhcnQnOwoKLy8gSW5jbHVkZSBnZW5lcmF0ZWQgZmlsZQpwYXJ0ICcke2ZlYXR1cmVOYW1lfV9jb250cm9sbGVyLmcuZGFydCc7CgovLyBUaGlzIGlzIHRoZSBjbGFzcyB1c2VkIGJ5IHJlc3Qgb2YgdGhlIGNvZGViYXNlCmNsYXNzICR7Y2xhc3NOYW1lfUNvbnRyb2xsZXIgPSBfJHtjbGFzc05hbWV9Q29udHJvbGxlciB3aXRoIF9cJCR7Y2xhc3NOYW1lfUNvbnRyb2xsZXI7CgovLyBUaGUgY29udHJvbGxlciBjbGFzcwphYnN0cmFjdCBjbGFzcyBfJHtjbGFzc05hbWV9Q29udHJvbGxlciB3aXRoIFN0b3JlIHsKICBmaW5hbCAke2NsYXNzTmFtZX1TZXJ2aWNlIF9zZXJ2aWNlID0gJHtjbGFzc05hbWV9U2VydmljZSgpOwogIAogIEBvYnNlcnZhYmxlCiAgYm9vbCBpc0xvYWRpbmcgPSBmYWxzZTsKCiAgQG9ic2VydmFibGUKICBTdHJpbmc/IGVycm9yTWVzc2FnZTsKICAKICBAb2JzZXJ2YWJsZQogIE9ic2VydmFibGVMaXN0PGR5bmFtaWM+IGl0ZW1zID0gT2JzZXJ2YWJsZUxpc3Q8ZHluYW1pYz4oKTsKICAKICBfJHtjbGFzc05hbWV9Q29udHJvbGxlcigpIHsKICAgIGZldGNoRGF0YSgpOwogIH0KICAKICBAYWN0aW9uCiAgRnV0dXJlPHZvaWQ+IGZldGNoRGF0YSgpIGFzeW5jIHsKICAgIGlzTG9hZGluZyA9IHRydWU7CiAgICBlcnJvck1lc3NhZ2UgPSBudWxsOwogICAgCiAgICB0cnkgewogICAgICAvLyBUT0RPOiBJbXBsZW1lbnQgZGF0YSBmZXRjaGluZwogICAgICAvLyBFeGFtcGxlOiBmaW5hbCByZXN1bHQgPSBhd2FpdCBfc2VydmljZS5nZXRJdGVtcygpOwogICAgICAvLyBpdGVtcy5jbGVhcigpOwogICAgICAvLyBpdGVtcy5hZGRBbGwocmVzdWx0KTsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgZXJyb3JNZXNzYWdlID0gZS50b1N0cmluZygpOwogICAgfSBmaW5hbGx5IHsKICAgICAgaXNMb2FkaW5nID0gZmFsc2U7CiAgICB9CiAgfQp9CicnJzsKfQ==",
      "type": "text"
    },
    {
      "path": "pre_gen.dart",
      "data":
          "aW1wb3J0ICdkYXJ0OmlvJzsKCmltcG9ydCAncGFja2FnZTptYXNvbi9tYXNvbi5kYXJ0JzsKCi8vIEltcG9ydCBoZWxwZXIgZmlsZXMKaW1wb3J0ICdsaWIvYXJjaGl0ZWN0dXJlX2hhbmRsZXIuZGFydCc7CmltcG9ydCAnbGliL2ZlYXR1cmVfZ2VuZXJhdG9yLmRhcnQnOwppbXBvcnQgJ2xpYi91dGlscy5kYXJ0JzsKCnZvaWQgcnVuKEhvb2tDb250ZXh0IGNvbnRleHQpIHsKICAvLyBWYWxpZGF0ZSBwcm9qZWN0IG5hbWUKICBmaW5hbCBwcm9qZWN0TmFtZSA9IGNvbnRleHQudmFyc1sncHJvamVjdF9uYW1lJ10gYXMgU3RyaW5nOwogIGZpbmFsIGFyY2hpdGVjdHVyZSA9IGNvbnRleHQudmFyc1snYXJjaGl0ZWN0dXJlJ10gYXMgU3RyaW5nOwogIGZpbmFsIHN0YXRlTWFuYWdlbWVudCA9IGNvbnRleHQudmFyc1snc3RhdGVfbWFuYWdlbWVudCddIGFzIFN0cmluZzsKICB2YXIgZmVhdHVyZXMgPSBjb250ZXh0LnZhcnNbJ2ZlYXR1cmVzJ10gYXMgTGlzdDxkeW5hbWljPjsKICBmaW5hbCBtb2R1bGVzID0gY29udGV4dC52YXJzWydtb2R1bGVzJ10gYXMgTGlzdDxkeW5hbWljPjsKCiAgLy8gVmFsaWRhdGUgcHJvamVjdCBuYW1lCiAgaWYgKCFpc1ZhbGlkUHJvamVjdE5hbWUocHJvamVjdE5hbWUpKSB7CiAgICB0aHJvdyBBcmd1bWVudEVycm9yKAogICAgICAgICdJbnZhbGlkIHByb2plY3QgbmFtZS4gTXVzdCBzdGFydCB3aXRoIGEgbGV0dGVyIG9yIHVuZGVyc2NvcmUsICcKICAgICAgICAnY29udGFpbiBvbmx5IGxvd2VyY2FzZSBsZXR0ZXJzLCBudW1iZXJzLCBhbmQgdW5kZXJzY29yZXMuJyk7CiAgfQoKICAvLyBNYWtlIEF1dGhlbnRpY2F0aW9uIHRoZSBkZWZhdWx0IGZlYXR1cmUgaWYgbm9uZSBhcmUgc2VsZWN0ZWQKICBpZiAoZmVhdHVyZXMuaXNFbXB0eSkgewogICAgZmVhdHVyZXMgPSBbJ0F1dGhlbnRpY2F0aW9uJ107CiAgICBjb250ZXh0LmxvZ2dlcgogICAgICAgIC5pbmZvKCdObyBmZWF0dXJlcyBzZWxlY3RlZCwgYWRkaW5nIGRlZmF1bHQgZmVhdHVyZTogQXV0aGVudGljYXRpb24nKTsKICB9IGVsc2UgaWYgKCFmZWF0dXJlcy5jb250YWlucygnQXV0aGVudGljYXRpb24nKSkgewogICAgLy8gQWRkIEF1dGhlbnRpY2F0aW9uIGlmIG5vdCBhbHJlYWR5IGluY2x1ZGVkCiAgICBmZWF0dXJlcyA9IFsuLi5mZWF0dXJlc107CiAgICBjb250ZXh0LmxvZ2dlci5pbmZvKCdBZGRpbmcgZGVmYXVsdCBmZWF0dXJlOiBBdXRoZW50aWNhdGlvbicpOwogIH0KCiAgLy8gTG9nIHByb2plY3QgZGV0YWlscwogIGNvbnRleHQubG9nZ2VyLmluZm8oJ0dlbmVyYXRpbmcgcHJvamVjdDogJHByb2plY3ROYW1lJyk7CiAgY29udGV4dC5sb2dnZXIuaW5mbygnQXJjaGl0ZWN0dXJlOiAkYXJjaGl0ZWN0dXJlJyk7CiAgY29udGV4dC5sb2dnZXIuaW5mbygnU3RhdGUgTWFuYWdlbWVudDogJHN0YXRlTWFuYWdlbWVudCcpOwogIGNvbnRleHQubG9nZ2VyLmluZm8oJ0ZlYXR1cmVzOiAkZmVhdHVyZXMnKTsKICBjb250ZXh0LmxvZ2dlci5pbmZvKCdNb2R1bGVzOiAkbW9kdWxlcycpOwoKICAvLyBDcmVhdGUgcHJvamVjdCBzdHJ1Y3R1cmUKICBjcmVhdGVQcm9qZWN0U3RydWN0dXJlKGNvbnRleHQsIHByb2plY3ROYW1lKTsKCiAgLy8gQ3JlYXRlIGFyY2hpdGVjdHVyZS1zcGVjaWZpYyBzdHJ1Y3R1cmUKICBjcmVhdGVBcmNoaXRlY3R1cmVTdHJ1Y3R1cmUoY29udGV4dCwgcHJvamVjdE5hbWUsIGFyY2hpdGVjdHVyZSk7CgogIC8vIENyZWF0ZSBmZWF0dXJlIHN0cnVjdHVyZXMgYmFzZWQgb24gYXJjaGl0ZWN0dXJlIGFuZCBzdGF0ZSBtYW5hZ2VtZW50CiAgY3JlYXRlRmVhdHVyZVN0cnVjdHVyZXMoCiAgICAgIGNvbnRleHQsIHByb2plY3ROYW1lLCBmZWF0dXJlcywgYXJjaGl0ZWN0dXJlLCBzdGF0ZU1hbmFnZW1lbnQpOwoKICAvLyBDcmVhdGUgbW9kdWxlIHN0cnVjdHVyZXMKICBjcmVhdGVNb2R1bGVTdHJ1Y3R1cmVzKGNvbnRleHQsIHByb2plY3ROYW1lLCBtb2R1bGVzLCBhcmNoaXRlY3R1cmUpOwoKICBjb250ZXh0LmxvZ2dlci5zdWNjZXNzKCdQcm9qZWN0IHN0cnVjdHVyZSBjcmVhdGVkIHN1Y2Nlc3NmdWxseSEnKTsKfQoKLy8gTWFpbiBtZXRob2QgcmVxdWlyZWQgZm9yIGtlcm5lbCBjb21waWxhdGlvbgp2b2lkIG1haW4oTGlzdDxTdHJpbmc+IGFyZ3MpIHsKICAvLyBUaGlzIGlzIGEgcGxhY2Vob2xkZXIgbWFpbiBtZXRob2QKICBwcmludCgnTWFzb24gcHJlLWdlbmVyYXRpb24gaG9vaycpOwp9Cgp2b2lkIGNyZWF0ZVByb2plY3RTdHJ1Y3R1cmUoSG9va0NvbnRleHQgY29udGV4dCwgU3RyaW5nIHByb2plY3ROYW1lKSB7CiAgZmluYWwgZGlyZWN0b3JpZXMgPSBbCiAgICAnbGliJywKICAgICd0ZXN0JywKICAgICdhc3NldHMnLAogICAgJ2Fzc2V0cy9pbWFnZXMnLAogICAgJ2Fzc2V0cy9mb250cycsCiAgICAnYXNzZXRzL3RyYW5zbGF0aW9ucycsCiAgXTsKCiAgZm9yIChmaW5hbCBkaXIgaW4gZGlyZWN0b3JpZXMpIHsKICAgIGZpbmFsIGRpcmVjdG9yeSA9IERpcmVjdG9yeSgnJHByb2plY3ROYW1lLyRkaXInKTsKICAgIGlmICghZGlyZWN0b3J5LmV4aXN0c1N5bmMoKSkgewogICAgICBkaXJlY3RvcnkuY3JlYXRlU3luYyhyZWN1cnNpdmU6IHRydWUpOwogICAgICBjb250ZXh0LmxvZ2dlci5pbmZvKCdDcmVhdGVkIGRpcmVjdG9yeTogJGRpcicpOwogICAgfQogIH0KfQoKdm9pZCBjcmVhdGVNb2R1bGVTdHJ1Y3R1cmVzKEhvb2tDb250ZXh0IGNvbnRleHQsIFN0cmluZyBwcm9qZWN0TmFtZSwKICAgIExpc3Q8ZHluYW1pYz4gbW9kdWxlcywgU3RyaW5nIGFyY2hpdGVjdHVyZSkgewogIGZvciAoZmluYWwgbW9kdWxlIGluIG1vZHVsZXMpIHsKICAgIGZpbmFsIG1vZHVsZU5hbWUgPSBtb2R1bGUudG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpLnJlcGxhY2VBbGwoJyAnLCAnXycpOwogICAgU3RyaW5nIGJhc2VEaXI7CgogICAgc3dpdGNoIChhcmNoaXRlY3R1cmUpIHsKICAgICAgY2FzZSAnQ2xlYW4gQXJjaGl0ZWN0dXJlJzoKICAgICAgICBiYXNlRGlyID0gJ2NvcmUnOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICdNVlZNJzoKICAgICAgY2FzZSAnTVZDJzoKICAgICAgICBiYXNlRGlyID0gJ3NoYXJlZC9zZXJ2aWNlcyc7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgJ0ZlYXR1cmUtRHJpdmVuJzoKICAgICAgICBiYXNlRGlyID0gJ3NoYXJlZC9zZXJ2aWNlcyc7CiAgICAgICAgYnJlYWs7CiAgICAgIGRlZmF1bHQ6CiAgICAgICAgYmFzZURpciA9ICdzaGFyZWQvc2VydmljZXMnOwogICAgfQoKICAgIGZpbmFsIGRpcmVjdG9yeSA9IERpcmVjdG9yeSgnJHByb2plY3ROYW1lL2xpYi8kYmFzZURpci8kbW9kdWxlTmFtZScpOwogICAgaWYgKCFkaXJlY3RvcnkuZXhpc3RzU3luYygpKSB7CiAgICAgIGRpcmVjdG9yeS5jcmVhdGVTeW5jKHJlY3Vyc2l2ZTogdHJ1ZSk7CiAgICAgIGNvbnRleHQubG9nZ2VyLmluZm8oJ0NyZWF0ZWQgbW9kdWxlIGRpcmVjdG9yeTogbGliLyRiYXNlRGlyLyRtb2R1bGVOYW1lJyk7CgogICAgICAvLyBDcmVhdGUgYSBiYXNlIGZpbGUgZm9yIHRoZSBtb2R1bGUKICAgICAgY3JlYXRlRmlsZSgKICAgICAgICAgICckcHJvamVjdE5hbWUvbGliLyRiYXNlRGlyLyRtb2R1bGVOYW1lLyR7bW9kdWxlTmFtZX1fc2VydmljZS5kYXJ0JywKICAgICAgICAgIGdlbmVyYXRlU2VydmljZVRlbXBsYXRlKG1vZHVsZU5hbWUpLAogICAgICAgICAgY29udGV4dCk7CiAgICB9CiAgfQp9Cg==",
      "type": "text"
    },
    {
      "path": "pubspec.yaml",
      "data":
          "bmFtZTogZmx1dHRlcl9idW5ueV9jbGkKCmVudmlyb25tZW50OgogIHNkazogIl4zLjYuMCIKCmRlcGVuZGVuY2llczoKICBtYXNvbjogXjAuMS4wCg==",
      "type": "text"
    }
  ],
  "name": "bunny_cli_template",
  "description": "A generator for flutter bunny cli.",
  "version": "0.1.0+1",
  "environment": {"mason": ">=0.1.0"},
  "readme": {
    "path": "README.md",
    "data":
        "IyBidW5ueV90ZW1wbGF0ZQoKWyFbUG93ZXJlZCBieSBNYXNvbl0oaHR0cHM6Ly9pbWcuc2hpZWxkcy5pby9lbmRwb2ludD91cmw9aHR0cHMlM0ElMkYlMkZ0aW55dXJsLmNvbSUyRm1hc29uLWJhZGdlKV0oaHR0cHM6Ly9naXRodWIuY29tL2ZlbGFuZ2VsL21hc29uKQoKQSBuZXcgYnJpY2sgY3JlYXRlZCB3aXRoIHRoZSBNYXNvbiBDTEkuCgpfR2VuZXJhdGVkIGJ5IFttYXNvbl1bMV0g8J+nsV8KCiMjIEdldHRpbmcgU3RhcnRlZCDwn5qACgpUaGlzIGlzIGEgc3RhcnRpbmcgcG9pbnQgZm9yIGEgbmV3IGJyaWNrLgpBIGZldyByZXNvdXJjZXMgdG8gZ2V0IHlvdSBzdGFydGVkIGlmIHRoaXMgaXMgeW91ciBmaXJzdCBicmljayB0ZW1wbGF0ZToKCi0gW09mZmljaWFsIE1hc29uIERvY3VtZW50YXRpb25dWzJdCi0gW0NvZGUgZ2VuZXJhdGlvbiB3aXRoIE1hc29uIEJsb2ddWzNdCi0gW1ZlcnkgR29vZCBMaXZlc3RyZWFtOiBGZWxpeCBBbmdlbG92IERlbW9zIE1hc29uXVs0XQotIFtGbHV0dGVyIFBhY2thZ2Ugb2YgdGhlIFdlZWs6IE1hc29uXVs1XQotIFtPYnNlcnZhYmxlIEZsdXR0ZXI6IEJ1aWxkaW5nIGEgTWFzb24gYnJpY2tdWzZdCi0gW01lZXQgTWFzb246IEZsdXR0ZXIgVmlraW5ncyAyMDIyXVs3XQoKWzFdOiBodHRwczovL2dpdGh1Yi5jb20vZmVsYW5nZWwvbWFzb24KWzJdOiBodHRwczovL2RvY3MuYnJpY2todWIuZGV2ClszXTogaHR0cHM6Ly92ZXJ5Z29vZC52ZW50dXJlcy9ibG9nL2NvZGUtZ2VuZXJhdGlvbi13aXRoLW1hc29uCls0XTogaHR0cHM6Ly95b3V0dS5iZS9HNFBUakE2dHBUVQpbNV06IGh0dHBzOi8veW91dHUuYmUvcWpBMEpGaVBNblEKWzZdOiBodHRwczovL3lvdXR1LmJlL284QjFFZmNVaXN3Cls3XTogaHR0cHM6Ly95b3V0dS5iZS9MWGhnaUY1SGlRZwo=",
    "type": "text"
  },
  "changelog": {
    "path": "CHANGELOG.md",
    "data": "IyAwLjEuMCsxCgotIFRPRE86IERlc2NyaWJlIGluaXRpYWwgcmVsZWFzZS4K",
    "type": "text"
  },
  "license": {
    "path": "LICENSE",
    "data": "VE9ETzogQWRkIHlvdXIgbGljZW5zZSBoZXJlLgo=",
    "type": "text"
  },
  "vars": {
    "project_name": {
      "type": "string",
      "description": "The project or app name",
      "default": "flutter_bunny",
      "prompt": "What is the project name?"
    },
    "bundle_identifier": {
      "type": "string",
      "description": "The organization name",
      "default": "com.example",
      "prompt": "What is the organization name?"
    },
    "architecture": {
      "type": "enum",
      "description": "The architecture pattern to use",
      "default": "Clean Architecture",
      "values": ["Clean Architecture", "MVVM", "MVC", "Feature-Driven"]
    },
    "state_management": {
      "type": "enum",
      "description": "The state management solution to use",
      "default": "Provider",
      "values": ["Provider", "Riverpod", "Bloc", "GetX", "MobX", "Redux"]
    },
    "features": {
      "type": "list",
      "description": "Features to include in the application",
      "defaults": ["Authentication"],
      "values": [
        "Authentication",
        "User Profile",
        "Settings",
        "Dashboard",
        "Products",
        "Shopping Cart"
      ]
    },
    "modules": {
      "type": "list",
      "description": "Additional modules to include",
      "defaults": ["Network Layer"],
      "values": [
        "Network Layer",
        "Local Storage",
        "Analytics",
        "Push Notifications",
        "Theme Manager"
      ]
    }
  }
});
